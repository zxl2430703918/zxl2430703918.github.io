<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>vim命令教程</title>
    <link href="/2022/08/08/vim%E5%91%BD%E4%BB%A4%E6%95%99%E7%A8%8B/"/>
    <url>/2022/08/08/vim%E5%91%BD%E4%BB%A4%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="vim文本初始化编辑：-root-vimrc"><a href="#vim文本初始化编辑：-root-vimrc" class="headerlink" title="vim文本初始化编辑：/root/.vimrc"></a>vim文本初始化编辑：/root/.vimrc</h1><figure class="highlight sh"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">set</span> nu<br><span class="hljs-built_in">set</span> si<br><span class="hljs-built_in">set</span> incsearch<br><span class="hljs-built_in">set</span> showcmd<br>imap &lt;tab&gt;  &lt;c-n&gt;<br>nmap &lt;tab&gt;  v&gt;<br><br><span class="hljs-built_in">set</span> wildmode=longest:list,full<br>inoremap <span class="hljs-string">&#x27; &#x27;</span><span class="hljs-string">&#x27;&lt;Esc&gt;i</span><br><span class="hljs-string">inoremap &quot; &quot;&quot;&lt;Esc&gt;i</span><br><span class="hljs-string">inoremap ( ()&lt;Esc&gt;i</span><br><span class="hljs-string">inoremap [ []&lt;Esc&gt;i</span><br><span class="hljs-string">inoremap &#123; &#123;&#125;&lt;Esc&gt;i</span><br><span class="hljs-string">inoremap &lt; &lt;&gt;&lt;Esc&gt;i</span><br><span class="hljs-string">func Setsh()</span><br><span class="hljs-string">        call setline(1, &quot;#!/bin/bash&quot;)</span><br><span class="hljs-string">        call setline(2, &quot;#Author:张雪龙&quot;)</span><br><span class="hljs-string">        call setline(3, &quot;#&quot;.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;))</span><br><span class="hljs-string">        call setline(4, &quot;# mail: 1024320609@qq.com&quot;)</span><br><span class="hljs-string">        call setline(5, &quot;#############################&quot;)</span><br><span class="hljs-string">normal G</span><br><span class="hljs-string">normal o</span><br><span class="hljs-string">normal o</span><br><span class="hljs-string">endfunc</span><br><span class="hljs-string">autocmd bufnewfile *.sh call Setsh()</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>shell脚本编程</title>
    <link href="/2022/08/06/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/08/06/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="编程概述"><a href="#编程概述" class="headerlink" title="编程概述"></a>编程概述</h1><h2 id="程序组成"><a href="#程序组成" class="headerlink" title="程序组成"></a>程序组成</h2><ul><li>程序：算法+数据结构</li><li>算法：处理数据的方式</li><li>数据结构：数据在计算机中的类型和组织方式</li><li>数据：是程序的核心,程序为数据提供服务</li></ul><h2 id="编程风格"><a href="#编程风格" class="headerlink" title="编程风格"></a>编程风格</h2><ul><li>面向过程语言</li><li>面向对象</li></ul><h2 id="编程语言排行榜"><a href="#编程语言排行榜" class="headerlink" title="编程语言排行榜"></a>编程语言排行榜</h2><figure class="highlight http"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs http">https://www.tiobe.com/tiobe-index/<br></code></pre></td></tr></table></figure><h2 id="编程语言级别分类"><a href="#编程语言级别分类" class="headerlink" title="编程语言级别分类"></a>编程语言级别分类</h2><h3 id="低级语言"><a href="#低级语言" class="headerlink" title="低级语言"></a>低级语言</h3><ul><li>机器：二进制的0和1的序列，称为机器指令。与自然语言差异太大，难懂、难写</li><li>汇编：用一些助记符号替代机器指令，称为汇编语言</li></ul><h3 id="高级编-程语言"><a href="#高级编-程语言" class="headerlink" title="高级编#程语言"></a>高级编#程语言</h3><ul><li>编译：高级语言–&gt;编译器–&gt;机器代码文件–&gt;执行，如：C，C++</li><li>解释：高级语言–&gt;执行–&gt;解释器–&gt;机器代码，如：shell，python，php，JavaScript，perl</li></ul><h3 id="强类型和弱类型语言"><a href="#强类型和弱类型语言" class="headerlink" title="强类型和弱类型语言"></a>强类型和弱类型语言</h3><ul><li>强类型语言：不同类型数据操作，必须经过强制转换才同一类型才能运算，如java ， c# ，<br>python</li><li>弱类型语言：语言的运行时会隐式做数据类型转换。无须指定类型，默认均为字符型；参与运算会自动进行隐式类型转换；变量无须事先定义可直接调用，如：bash ，php，javascript</li></ul><h1 id="shell脚本基本用法"><a href="#shell脚本基本用法" class="headerlink" title="shell脚本基本用法"></a>shell脚本基本用法</h1><h2 id="shell脚本用途"><a href="#shell脚本用途" class="headerlink" title="shell脚本用途"></a>shell脚本用途</h2><ul><li>将简单的命令组合完成复杂的工作,自动化执行命令,提高工作效率</li><li>减少手工命令的输入，一定程度上避免人为错误</li><li>将软件或应用的安装及配置实现标准化</li><li>用于实现日常性的,重复性的,非交互式的运维工作,如:文件打包压缩备份,监控系统运行状态并实现告警等</li></ul><h2 id="shell-脚本基本结构"><a href="#shell-脚本基本结构" class="headerlink" title="shell 脚本基本结构"></a>shell 脚本基本结构</h2><h3 id="shell脚本编程"><a href="#shell脚本编程" class="headerlink" title="shell脚本编程"></a>shell脚本编程</h3><p>​    是基于过程式、解释执行的语言</p><h3 id="编程语言的基本结构"><a href="#编程语言的基本结构" class="headerlink" title="编程语言的基本结构"></a>编程语言的基本结构</h3><ul><li><p>各种系统命令的组合</p></li><li><p>数据存储：变量、数组</p></li><li><p>表达式：a + b</p></li><li><p>控制语句：if</p></li><li><p>shell脚本：包含一些命令或声明，并符合一定格式的文本文件</p></li><li><p>格式要求：首行shebang机制</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">#!/bin/bash<br>#!/usr/bin/python<br>#!/usr/bin/perl<br>#!/usr/bin/ruby<br>#!/usr/bin/lua<br></code></pre></td></tr></table></figure></li></ul><h2 id="shell脚本的创建"><a href="#shell脚本的创建" class="headerlink" title="shell脚本的创建"></a>shell脚本的创建</h2><ul><li><p>第一步：使用文本编辑器来创建文本文件，第一行必须包括shell声明序列：注释开头#!</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">#!/bin/bash<br></code></pre></td></tr></table></figure></li><li><p>第二步：加执行权限，给予执行权限，在命令行上指定脚本的绝对或相对路径</p></li><li><p>第三步：运行脚本，直接运行解释器，将脚本作为解释器程序的参数运行</p></li></ul><h2 id="shell脚本注释规范"><a href="#shell脚本注释规范" class="headerlink" title="shell脚本注释规范"></a>shell脚本注释规范</h2><ol><li>第一行一般为调用使用的语言</li><li>程序名称，避免更改文件名为无法找到正确的文件</li><li>版本号</li><li>更改后的时间</li><li>作者相关信息</li><li>该程序的作用，及注意事项</li><li>最后是各版本的更新简要说明</li></ol><h2 id="第一个shell脚本"><a href="#第一个shell脚本" class="headerlink" title="第一个shell脚本"></a>第一个shell脚本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:34:44 root@localhost ~]<span class="hljs-comment">#vim  hello.sh</span><br><br>  1 <span class="hljs-comment">#!/bin/bash</span><br>  2 <span class="hljs-comment">#Author:张雪龙</span><br>  3 <span class="hljs-comment">#2022-08-06 01:37:12</span><br>  4 <span class="hljs-comment"># mail: 1024320609@qq.com</span><br>  5 <span class="hljs-comment">#############################</span><br>  6 <br>  7 <span class="hljs-comment">#经典写法</span><br>  8 <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello, world&quot;</span><br>  9 <span class="hljs-comment">#流行写法</span><br> 10 <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Hello, world!&#x27;</span><br><br></code></pre></td></tr></table></figure><h2 id="shell执行方法种类"><a href="#shell执行方法种类" class="headerlink" title="shell执行方法种类"></a>shell执行方法种类</h2><ol><li><p>bash + 脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:43:24 root@localhost ~]<span class="hljs-comment">#bash hello.sh </span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>cat + 脚本文件名 |bash</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:47:26 root@localhost ~]<span class="hljs-comment">#cat hello.sh |bash</span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>bash &lt;  脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:47:51 root@localhost ~]<span class="hljs-comment">#bash &lt; hello.sh </span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>chmod +x 脚本文件 ——》./脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:48:20 root@localhost ~]<span class="hljs-comment">#ll hello.sh </span><br>-rw-r--r--. 1 root root 177 8月   6 01:39 hello.sh<br>[01:48:53 root@localhost ~]<span class="hljs-comment">#chmod +x hello.sh </span><br>[01:49:19 root@localhost ~]<span class="hljs-comment">#./hello.sh </span><br>hello, world<br></code></pre></td></tr></table></figure></li><li><p>本方法可以实现执行远程主机的shell脚本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:51:54 root@localhost ~]<span class="hljs-comment">#yum install httpd -y</span><br>[01:52:23 root@localhost ~]<span class="hljs-comment">#systemctl start httpd</span><br>[01:52:54 root@localhost ~]<span class="hljs-comment">#cp hello.sh  /var/www/html/</span><br>[01:53:40 root@localhost ~]<span class="hljs-comment">#ls /var/www/html/</span><br><br><span class="hljs-comment">#方法1</span><br>[01:58:34 root@localhost ~]<span class="hljs-comment"># curl -s  http://192.168.100.30/hello.sh |bash</span><br>hello, world<br>Hello, world!<br><br><span class="hljs-comment">#方法2</span><br>[02:01:15 root@localhost ~]<span class="hljs-comment">#curl http://192.168.100.30/hello.sh 2&gt;/dev/null |bash</span><br>hello, world<br>Hello, world!<br><br><span class="hljs-comment">#方法3</span><br>[02:08:15 root@localhost ~]<span class="hljs-comment">#wget -qO -  http://192.168.100.30/hello.sh |bash</span><br>hello, world<br>Hello, world!<br><br></code></pre></td></tr></table></figure></li><li><p>远程主机运行本地shell脚本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:15:37 root@localhost ~]<span class="hljs-comment">#bash test.sh </span><br>192.168.100.30 192.168.122.1 <br>[02:15:44 root@localhost ~]<span class="hljs-comment">#ssh 192.168.100.31 /bin/bash &lt; test.sh </span><br>The authenticity of host <span class="hljs-string">&#x27;192.168.100.31 (192.168.100.31)&#x27;</span> can<span class="hljs-string">&#x27;t be established.</span><br><span class="hljs-string">ECDSA key fingerprint is SHA256:zK4fUjtCYg/mFj+ASqJf+rKYnp+cwdBrbhHJ5gFCAds.</span><br><span class="hljs-string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="hljs-string">Warning: Permanently added &#x27;</span>192.168.100.31<span class="hljs-string">&#x27; (ECDSA) to the list of known hosts.</span><br><span class="hljs-string">root@192.168.100.31&#x27;</span>s password: <br>192.168.100.31 192.168.122.1 <br></code></pre></td></tr></table></figure></li></ol><h2 id="shell脚本案例"><a href="#shell脚本案例" class="headerlink" title="shell脚本案例"></a>shell脚本案例</h2><h3 id="备份脚本"><a href="#备份脚本" class="headerlink" title="备份脚本"></a>备份脚本</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:32:52 root@localhost data]<span class="hljs-comment">#cat /root/bak.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#Author:张雪龙</span><br><span class="hljs-comment">#2022-08-06 02:23:09</span><br><span class="hljs-comment"># mail: 1024320609@qq.com</span><br><span class="hljs-comment">#############################</span><br><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\033[1;32mStarting backup...\033[0m&quot;</span><br><span class="hljs-built_in">sleep</span> 2<br><span class="hljs-built_in">cp</span> -av /etc/ /data/etc`<span class="hljs-built_in">date</span> +%F`/<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\033[1;32mBackup is finished\033[0m&quot;</span><br><br>[02:34:08 root@localhost data]<span class="hljs-comment">#bash /root/bak.sh</span><br>[02:34:36 root@localhost data]<span class="hljs-comment">#ll</span><br>总用量 12<br>drwxr-xr-x.   2 root root    6 8月   6 02:28 bak<br>drwxr-xr-x. 148 root root 8192 8月   6 01:52 etc2022-08-06<br></code></pre></td></tr></table></figure><h2 id="shell脚本调试"><a href="#shell脚本调试" class="headerlink" title="shell脚本调试"></a>shell脚本调试</h2><ul><li><p>只检测脚本中的语法错误，但无法检查出命令错误，但不真正执行脚本</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">bash -n /path/to/some_script<br></code></pre></td></tr></table></figure></li><li><p>调试并执行</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">bash -x /path/to/some_script<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:53:48 root@localhost data]<span class="hljs-comment">#cat -A test.sh </span><br><span class="hljs-comment">#!/bin/bash$</span><br><span class="hljs-comment">#Author:M-eM-&lt;M- M-iM-^[M-*M-iM-&gt;M-^Y$</span><br><span class="hljs-comment">#2022-08-06 02:38:28$</span><br><span class="hljs-comment"># mail: 1024320609@qq.com$</span><br><span class="hljs-comment">#############################$</span><br>$<br><span class="hljs-built_in">echo</span> line1$<br>hostnam$<br><span class="hljs-built_in">cat</span> &gt; test.txt &lt;&lt;<span class="hljs-string">EOF $</span><br><span class="hljs-string">aaa</span><br><span class="hljs-string">bbb$</span><br><span class="hljs-string">ccc$</span><br><span class="hljs-string">EOF</span> $<br>$<br><span class="hljs-built_in">echo</span> line2  $<br>$<br>[02:53:59 root@localhost data]<span class="hljs-comment">#bash -n test.sh </span><br>test.sh:行16: 警告:立即文档在第 9 行被文件结束符分隔 (需要 `EOF<span class="hljs-string">&#x27;)</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure></li><li><p>总结：脚本错误常见的有三种</p><ul><li>语法错误，会导致后续的命令不继续执行，可以用bash -n 检查错误，提示的出错行数不一定是准确的</li><li>命令错误，默认后续的命令还会继续执行，用bash -n 无法检查出来 ，可以使用 bash -x 进行观察</li><li>逻辑错误：只能使用 bash -x 进行观察</li></ul></li></ul><h2 id="shell变量"><a href="#shell变量" class="headerlink" title="shell变量"></a>shell变量</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>表示命名的内存空间，将数据放在内存空间中，通过变量名引用，获取数据。</p><h3 id="变量类型："><a href="#变量类型：" class="headerlink" title="变量类型："></a>变量类型：</h3><ul><li><p>内置变量，如：PS1，PATH，UID，HOSTNAME，$$，BASHPID，PPID，$?，HISTSIZE</p></li><li><p>用户自定义变量</p></li><li><p>不同的变量存放的数据不同，决定了以下</p><ul><li>数据存储方式</li><li>参与的运算</li><li>表示的数据范围</li></ul></li><li><p>变量数据类型：</p><ul><li>字符</li><li>数值：整型、浮点型, bash 不支持浮点数</li></ul></li></ul><h3 id="Shell中变量命名法则"><a href="#Shell中变量命名法则" class="headerlink" title="Shell中变量命名法则"></a>Shell中变量命名法则</h3><ul><li>命名要求<ul><li>区分大小写</li><li>不能使程序中的保留字和内置变量：如：if, for</li><li>只能使用数字、字母及下划线，且不能以数字开头，注意：不支持短横线 “ - ”，和主机名相反</li></ul></li></ul><h3 id="命名习惯"><a href="#命名习惯" class="headerlink" title="命名习惯"></a>命名习惯</h3><ul><li>见名知义，用英文单词命名，并体现出实际作用，不要用简写，如：ATM</li><li>变量名大写</li><li>局部变量小写</li><li>函数名小写</li><li>大驼峰StudentFirstName,由多个单词组成，且每个单词的首字母是大写，其它小写</li><li>小驼峰studentFirstName ,由多个单词组成，第一个单词的首字母小写，后续每个单词的首字母是大写，其它小写</li><li>下划线: student_name</li></ul><h3 id="变量定义和引用"><a href="#变量定义和引用" class="headerlink" title="变量定义和引用"></a>变量定义和引用</h3><h3 id="变量的生效范围等标准划分变量类型"><a href="#变量的生效范围等标准划分变量类型" class="headerlink" title="变量的生效范围等标准划分变量类型"></a>变量的生效范围等标准划分变量类型</h3><ul><li>普通变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，包括当前shell的子shell进程均无效</li><li>环境变量：生效范围为当前shell进程及其子进程</li><li>本地变量：生效范围为当前shell进程中某代码片断，通常指函数</li></ul><h3 id="变量赋值"><a href="#变量赋值" class="headerlink" title="变量赋值"></a>变量赋值</h3><ul><li><p>```HTTP<br>name=’value’</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>- value 可以是以下多种形式<br><br>  ```HTTP<br>  直接字串：<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;root&#x27;</span><br>  变量引用：<span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span><br>  命令引用：<span class="hljs-attribute">name</span>=`COMMAND` 或者 <span class="hljs-attribute">name</span>=$(COMMAND)<br></code></pre></td></tr></table></figure></li><li><p>注意:变量赋值是临时生效，当退出终端后，变量会自动删除，无法持久保存，脚本中的变量会随着脚本结束，也会自动删除</p></li><li><p>变量引用</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs HTTP">$name<br>$&#123;name&#125;<br></code></pre></td></tr></table></figure><ul><li><p>弱引用和强引用</p><ul><li>“$name” 弱引用，其中的变量引用会被替换为变量值</li><li>‘$name’ 强引用，其中的变量引用不会被替换为变量值，而保持原字符串</li></ul></li><li><p>范例：变量的各种赋值方式和引用</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:54:02 root@localhost data]<span class="hljs-comment">#name=&#x27;zhang&#x27;</span><br>[03:22:57 root@localhost data]<span class="hljs-comment">#echo $name</span><br>zhang<br><br>[03:23:03 root@localhost data]<span class="hljs-comment">#echo I am $name</span><br>I am zhang<br><br>[03:23:25 root@localhost data]<span class="hljs-comment">#echo &quot;I am $name&quot;</span><br>I am zhang<br><br>[03:23:42 root@localhost data]<span class="hljs-comment">#echo &#x27;I am $name&#x27;</span><br>I am <span class="hljs-variable">$name</span><br><br>[03:23:50 root@localhost data]<span class="hljs-comment">#echo $USER</span><br>root<br>[03:25:40 root@localhost data]<span class="hljs-comment">#name=$USER</span><br>[03:26:08 root@localhost data]<span class="hljs-comment">#echo $name</span><br>root<br><br>[03:27:11 root@localhost data]<span class="hljs-comment">#USER=`whoami`</span><br>[03:27:37 root@localhost data]<span class="hljs-comment">#echo $USER</span><br>root<br><br></code></pre></td></tr></table></figure></li></ul><p>#当内容中包含空格，则最好用双引号<br>  [22:56:14 root@localhost ~]#echo $(seq 5)<br>  1 2 3 4 5<br>  [22:57:01 root@localhost ~]#echo “$(seq 5)”<br>  1<br>  2<br>  3<br>  4<br>  5<br>  [23:00:53 root@localhost ~]#name=”ni<br>  hao<br>  ya”<br>  [23:01:07 root@localhost ~]#echo $name<br>  ni hao ya<br>  [23:01:24 root@localhost ~]#echo “$name”<br>  ni<br>  hao<br>  ya</p>  <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><br>- 案例：变量引用<br><br>  ```sh<br>  <span class="hljs-selector-attr">[23:01:31 root@localhost ~]</span>#name=zxl<br>  <span class="hljs-selector-attr">[23:03:29 root@localhost ~]</span>#age=<span class="hljs-number">20</span><br>  <span class="hljs-selector-attr">[23:03:39 root@localhost ~]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$name</span> <span class="hljs-variable">$age</span><br>  zxl <span class="hljs-number">20</span><br>  <span class="hljs-selector-attr">[23:03:52 root@localhost ~]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$name</span><span class="hljs-variable">$age</span><br>  zxl20<br>  <br>  #注意“_”变量名包含下划线，需要中括号&#123;&#125;包含变量名<br>  <span class="hljs-selector-attr">[23:04:11 root@localhost ~]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$name_</span><span class="hljs-variable">$age</span><br>  <span class="hljs-number">20</span><br>  <span class="hljs-selector-attr">[23:04:32 root@localhost ~]</span><span class="hljs-selector-id">#echo</span> $&#123;name&#125;__<span class="hljs-variable">$age</span><br>zxl__20<br></code></pre></td></tr></table></figure><ul><li><p>案例：变量的间接赋值和引用</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [23:10:01 root@localhost ~]<span class="hljs-comment">#name=zhang</span><br>  [23:13:27 root@localhost ~]<span class="hljs-comment">#title=mage</span><br>  [23:13:49 root@localhost ~]<span class="hljs-comment">#name=$title</span><br>  [23:14:05 root@localhost ~]<span class="hljs-comment">#echo $name</span><br>  mage<br>  [23:14:09 root@localhost ~]<span class="hljs-comment">#echo $title</span><br>  mage<br>  [23:14:26 root@localhost ~]<span class="hljs-comment">#title=zhang</span><br>  [23:15:54 root@localhost ~]<span class="hljs-comment">#echo $name</span><br>mage<br></code></pre></td></tr></table></figure></li><li><p>案例：变量追加值</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[23:19:17 root@localhost ~]<span class="hljs-comment">#title=ni</span><br>[23:20:19 root@localhost ~]<span class="hljs-comment">#title+=&quot; hao&quot;</span><br>[23:20:26 root@localhost ~]<span class="hljs-comment">#echo $title </span><br>ni hao<br>  <br></code></pre></td></tr></table></figure></li><li><p>案例：利用变量实现动态命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [23:20:32 root@localhost ~]<span class="hljs-comment">#hostname</span><br>  localhost.localdomain<br>  [23:21:47 root@localhost ~]<span class="hljs-comment">#cmd=hostname</span><br>  [23:22:37 root@localhost ~]<span class="hljs-comment">#$cmd</span><br>  localhost.localdomain<br>  [23:22:43 root@localhost ~]<span class="hljs-comment">#$cmd -I</span><br>192.168.100.30 192.168.122.1 <br></code></pre></td></tr></table></figure></li><li><p>案例：<strong>set</strong> 显示已定义的所有变量</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [23:25:10 root@localhost ~]<span class="hljs-comment">#set |head -n 6</span><br>  BASH=/bin/bash<br>  BASHOPTS=checkwinsize:cmdhist:complete_fullquote:expand_aliases:extglob:extquote:force_fignore:histappend:interactive_comments:login_shell:progcomp:promptvars:sourcepath<br>  BASHRCSOURCED=Y<br>  BASH_ALIASES=()<br>  BASH_ARGC=()<br>BASH_ARGV=()<br></code></pre></td></tr></table></figure></li><li><p>案例：<strong>unset</strong>删除变量</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [23:25:24 root@localhost ~]<span class="hljs-comment">#$cmd</span><br>  localhost.localdomain<br>  [23:27:24 root@localhost ~]<span class="hljs-comment">#unset cmd</span><br>  [23:27:32 root@localhost ~]<span class="hljs-comment">#$cmd</span><br>[23:27:39 root@localhost ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">  <span class="hljs-variable">$GREEN</span>----------------------Host systeminfo--------------------<span class="hljs-variable">$END</span><br>  echo -e <span class="hljs-string">&quot;HOSTNAME: <span class="hljs-variable">$RED</span>`hostname`<span class="hljs-variable">$END</span>&quot;</span><br>  #echo -e <span class="hljs-string">&quot;IPADDR: <span class="hljs-variable">$RED</span>` ifconfig eth0|grep -Eo &#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]</span><br><span class="hljs-string">  &#123;1,3&#125;&#x27; |head -n1`<span class="hljs-variable">$END</span>&quot;</span><br>  echo -e <span class="hljs-string">&quot;IPADDR: <span class="hljs-variable">$RED</span>` hostname -I`<span class="hljs-variable">$END</span>&quot;</span><br>  echo -e <span class="hljs-string">&quot;OSVERSION: <span class="hljs-variable">$RED</span><span class="hljs-variable">$PRETTY_NAME</span><span class="hljs-variable">$END</span>&quot;</span><br>  范例:<br>  echo -e <span class="hljs-string">&quot;KERNEL: <span class="hljs-variable">$RED</span>`uname -r`<span class="hljs-variable">$END</span>&quot;</span><br>  echo -e <span class="hljs-string">&quot;CPU: <span class="hljs-variable">$RED</span>`lscpu|grep &#x27;^Model name&#x27;|tr -s &#x27; &#x27;|cut -d : -</span><br><span class="hljs-string">  f2`<span class="hljs-variable">$END</span>&quot;</span><br>  echo -e <span class="hljs-string">&quot;MEMORY: <span class="hljs-variable">$RED</span>`free -h|grep Mem|tr -s &#x27; &#x27; : |cut -d : -f2`<span class="hljs-variable">$END</span>&quot;</span><br>  echo -e <span class="hljs-string">&quot;DISK: <span class="hljs-variable">$RED</span>`lsblk |grep &#x27;^sd&#x27; |tr -s &#x27; &#x27; |cut -d &quot;</span> <span class="hljs-string">&quot; -f4`<span class="hljs-variable">$END</span>&quot;</span><br><span class="hljs-variable">$GREEN</span>---------------------------------------------------------<span class="hljs-variable">$END</span><br></code></pre></td></tr></table></figure></li><li><p>综合案例1：显示系统信息</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [00:40:14 root@localhost ~]<span class="hljs-comment">#bash showSystemInfo.sh</span><br>  ------------------------SYSTEMINF---------------------<br>  主机名：                localhost.localdomain <br>  系统版本号：            8 <br>  内核信息：              4.18.0-348.el8.x86_64 <br>  CPU:                    4 <br>  IP地址：                192.168.100.30 <br>  内存大小:               3.6Gi <br>  硬盘大小:               200G <br>  ------------------------SYSTEMINF---------------------<br>  [00:40:15 root@localhost ~]<span class="hljs-comment">#cat showSystemInfo.sh</span><br>  <span class="hljs-comment">#!/bin/bash</span><br>  <span class="hljs-comment"># **********************************************************</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># * Author        : 张雪龙</span><br>  <span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>  <span class="hljs-comment"># * Create time   : 2022-08-06 23:43</span><br>  <span class="hljs-comment"># * Filename      : showSystemInfo.sh</span><br>  <span class="hljs-comment"># * Description   : </span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># **********************************************************</span><br>  <br>  RED=<span class="hljs-string">&quot;\E[1;31m&quot;</span><br>  GREEN=<span class="hljs-string">&quot;echo -e \E[1;32m&quot;</span><br>  END=<span class="hljs-string">&quot;\E[0m&quot;</span><br>  . /etc/os-release<br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;------------------------SYSTEMINF---------------------&quot;</span><span class="hljs-variable">$END</span><br>  <br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;主机名：                <span class="hljs-subst">$(hostname)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;系统版本号：            <span class="hljs-variable">$VERSION</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;内核信息：              <span class="hljs-subst">$(uname -r)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;CPU:                    <span class="hljs-subst">$(lscpu|sed -n &#x27;4p&#x27;|tr -s <span class="hljs-string">&quot; &quot;</span>|cut -d<span class="hljs-string">&quot; &quot;</span> -f2)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;IP地址：                <span class="hljs-subst">$(ifconfig|sed -n &#x27;2p&#x27;|tr -s <span class="hljs-string">&quot; &quot;</span>|cut -d<span class="hljs-string">&quot; &quot;</span> -f3)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;内存大小:               <span class="hljs-subst">$(free -h|grep &#x27;^Mem&#x27;|tr -s <span class="hljs-string">&quot; &quot;</span>|cut -d<span class="hljs-string">&quot; &quot;</span> -f2)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;硬盘大小:               <span class="hljs-subst">$(lsblk|grep &#x27;^sd&#x27;|tr -s <span class="hljs-string">&quot; &quot;</span>|cut -d<span class="hljs-string">&quot; &quot;</span> -f4)</span>&quot;</span> <span class="hljs-variable">$END</span><br>  <br><span class="hljs-built_in">echo</span> -e <span class="hljs-variable">$RED</span><span class="hljs-string">&quot;------------------------SYSTEMINF---------------------&quot;</span><span class="hljs-variable">$END</span><br></code></pre></td></tr></table></figure></li><li><p>综合案例2：数据备份</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:11:28 root@localhost ~]<span class="hljs-comment">#cat backup.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># **********************************************************</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># * Author        : 张雪龙</span><br><span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br><span class="hljs-comment"># * Create time   : 2022-08-07 00:54</span><br><span class="hljs-comment"># * Filename      : backup.sh</span><br><span class="hljs-comment"># * Description   : </span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># **********************************************************</span><br><br><br>RED=<span class="hljs-string">&quot;\E[1;31m&quot;</span><br>GREEN=<span class="hljs-string">&quot;echo -e \E[1;32m&quot;</span><br>END=<span class="hljs-string">&quot;\E[0m&quot;</span><br><br><span class="hljs-variable">$GREEN</span> <span class="hljs-string">&quot;开始备份&quot;</span> <span class="hljs-variable">$END</span><br><span class="hljs-built_in">sleep</span> 3<br>BACK_URL=/data/backup/<br>SRC_URL=/etc<br><span class="hljs-built_in">date</span>=$(<span class="hljs-built_in">date</span> +%F_%T)<br><span class="hljs-built_in">cp</span> -av <span class="hljs-variable">$SRC_URL</span> <span class="hljs-variable">$&#123;BACK_URL&#125;</span><span class="hljs-variable">$&#123;SRC_URL&#125;</span>_<span class="hljs-variable">$date</span><br><span class="hljs-variable">$GREEN</span> <span class="hljs-string">&quot;备份完成&quot;</span> <span class="hljs-variable">$END</span><br><br>[01:12:01 root@localhost ~]<span class="hljs-comment">#bash backup.sh </span><br> 开始备份 <br> 备份完成 <br>[01:12:58 root@localhost ~]<span class="hljs-comment">#</span><br>[01:12:58 root@localhost ~]<span class="hljs-comment">#ls /data/backup/</span><br>2022-08-07_01:09:54  etc  etc_2022-08-07_01:11:19  etc_2022-08-07_01:12:58<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><ul><li><p>环境变量</p><ul><li>可以使子进程（包括孙子进程）继承父进程的变量，但是无法让父进程使用子进程的变量</li><li>一旦子进程修改从父进程继承的变量，将会新的值传递给孙子进程</li><li>一般只在系统配置文件中使用，在脚本中较少使用</li></ul></li><li><p>变量声明和赋值：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">#声明并赋值<br>export name=VALUE<br>declare -x name=VALUE<br>#或者分两步实现<br>name=VALUE<br>export name<br></code></pre></td></tr></table></figure></li><li><p>显示所有环境变量：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">env<br>printenv<br>export<br>declare -x<br></code></pre></td></tr></table></figure></li><li><p>查看指定进程的环境变量</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#cat /proc/$PID/environ</span><br>[01:21:17 root@localhost ~]<span class="hljs-comment">#echo $BASHPID </span><br>9311<br>[01:22:16 root@localhost ~]<span class="hljs-comment">#cat /proc/$BASHPID/environ </span><br>USER=rootLOGNAME=rootHOME=/rootPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/binSHELL=/bin/bashTERM=xtermSELINUX_ROLE_REQUESTED=SELINUX_LEVEL_REQUESTED=SELINUX_USE_CURRENT_RANGE=XDG_SESSION_ID=12XDG_RUNTIME_DIR=/run/user/0DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/0/busSSH_CLIENT=192.168.100.1 14129 22SSH_CONNECTION=192.168.100.1 14129 192.168.100.30 22SSH_TTY=/dev/pts/0[01:22:30 root@localhost ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure></li><li><p>删除变量：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">unset name<br></code></pre></td></tr></table></figure></li><li><p>bash内建的环境变量</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs http">PATH<br>SHELL<br>USER<br>UID<br>HOME<br>PWD<br>SHLVL #shell的嵌套层数，即深度<br>LANG<br>MAIL<br>HOSTNAME<br>HISTSIZE<br></code></pre></td></tr></table></figure></li></ul><h3 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h3><p>只读变量：只能声明定义，但后续不能修改和删除，即常量</p><ul><li><p>声明只读变量：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">readonly name<br>declare -r name<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:36:17 root@localhost ~]<span class="hljs-comment">#readonly PI=3.1415926</span><br>[01:36:58 root@localhost ~]<span class="hljs-comment">#echo $PI</span><br>3.1415926<br>[01:37:04 root@localhost ~]<span class="hljs-comment">#PI=3.14</span><br>-bash: PI: 只读变量<br>[01:37:12 root@localhost ~]<span class="hljs-comment">#unset PI</span><br>-bash: <span class="hljs-built_in">unset</span>: PI: 无法取消设定: 只读 variable<br>[01:37:21 root@localhost ~]<span class="hljs-comment">#echo $PI</span><br>3.1415926<br>[01:37:40 root@localhost ~]<span class="hljs-comment">#exit</span><br>注销<br>Connection closing...Socket close.<br><br>Connection closed by foreign host.<br><br>Disconnected from remote host(192.168.100.30) at 01:37:58.<br><br>Type `<span class="hljs-built_in">help</span><span class="hljs-string">&#x27; to learn how to use Xshell prompt.</span><br><span class="hljs-string">[D:\~]$ </span><br><span class="hljs-string"></span><br><span class="hljs-string">Connecting to 192.168.100.30:22...</span><br><span class="hljs-string">Connection established.</span><br><span class="hljs-string">To escape to local shell, press &#x27;</span>Ctrl+Alt+]<span class="hljs-string">&#x27;.</span><br><span class="hljs-string"></span><br><span class="hljs-string">ni hao ya zhang xue long</span><br><span class="hljs-string">Activate the web console with: systemctl enable --now cockpit.socket</span><br><span class="hljs-string"></span><br><span class="hljs-string">Last login: Sun Aug  7 00:14:03 2022 from 192.168.100.1</span><br><span class="hljs-string">[01:38:04 root@localhost ~]#echo $PI</span><br><span class="hljs-string"></span><br><span class="hljs-string">[01:38:08 root@localhost ~]#</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure></li></ul><h3 id="位置变量"><a href="#位置变量" class="headerlink" title="位置变量"></a>位置变量</h3><ul><li><p>位置变量：在bash shell中内置的变量, 在脚本代码中调用通过命令行传递给脚本的参数</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-meta"><span class="hljs-keyword">$1</span>, $2, ... 对应第1个、第2个等参数，shift [n]换位置</span><br><span class="hljs-meta"><span class="hljs-keyword">$0</span> 命令本身,包括路径</span><br><span class="hljs-symbol">$</span>* 传递给脚本的所有参数，全部参数合为一个字符串<br><span class="hljs-symbol">$</span>@ 传递给脚本的所有参数，每个参数为独立字符串<br><span class="hljs-symbol">$</span># 传递给脚本的参数的个数<br>注意：<span class="hljs-symbol">$</span>@ <span class="hljs-symbol">$</span>* 只在被双引号包起来的时候才会有差异<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:48:53 root@localhost ~]<span class="hljs-comment">#bash /root/postion.sh 1 2 3 4 5 6 7 8 9 10 11 12</span><br>0st arg is /root/postion.sh<br>1st arg is 1<br>2st arg is 2<br>3st arg is 3<br>10st arg is 10<br>11st arg is 11<br>The number of arg is 12<br>All args are 1 2 3 4 5 6 7 8 9 10 11 12<br>All args are 1 2 3 4 5 6 7 8 9 10 11 12<br>The scriptname is postion.sh<br>[01:49:07 root@localhost ~]<span class="hljs-comment">#cat postion.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># **********************************************************</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># * Author        : 张雪龙</span><br><span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br><span class="hljs-comment"># * Create time   : 2022-08-07 01:43</span><br><span class="hljs-comment"># * Filename      : postion.sh</span><br><span class="hljs-comment"># * Description   : </span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># **********************************************************</span><br><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;0st arg is <span class="hljs-variable">$0</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;1st arg is <span class="hljs-variable">$1</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;2st arg is <span class="hljs-variable">$2</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;3st arg is <span class="hljs-variable">$3</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;10st arg is <span class="hljs-variable">$&#123;10&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;11st arg is <span class="hljs-variable">$&#123;11&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The number of arg is <span class="hljs-variable">$#</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;All args are $*&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;All args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The scriptname is `basename <span class="hljs-variable">$0</span>`&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>$*和$@的区别</p><ul><li><p>当$*和$@没有被引用的时候，它们确实没有什么区别，都会把位置参数当成一个个体。(我们最好不要使用，因为如果位置参数中带有空格或者通配符的情况下，可能结果会和我们想要的不一样)</p></li><li><p>“$<em>“   会把所有位置参数当成一个整体（或者说当成一个单词），如果没有位置参数，则”$</em>“为空，如果有两个位置参数并且IFS为空格时，”$*”相当于”$1 $2”</p></li><li><p>“$@” 会把所有位置参数当成一个单独的字段，如果没有位置参数（$#为0），则”$@”展开为空（不是空字符串，而是空列表），如果存在一个位置参数，则”$@”相当于”$1”，如果有两个参数，则”$@”相当于”$1” “$2”等等</p></li><li><p>案例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 scripts]<span class="hljs-comment">#cat f1.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f1.sh:all args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f1.sh:all args are $*&quot;</span><br>./file.sh <span class="hljs-string">&quot;$*&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#cat f2.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f2.sh:all args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f2.sh:all args are $*&quot;</span><br>./file.sh <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#cat file.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;file.sh:1st arg is <span class="hljs-variable">$1</span>&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#./f1.sh a b c</span><br>f1.sh:all args are a b c<br>f1.sh:all args are a b c<br>file.sh:1st arg is a b c<br>[root@centos8 scripts]<span class="hljs-comment">#./f2.sh a b c</span><br>f2.sh:all args are a b c<br>f2.sh:all args are a b c<br>file.sh:1st arg is a<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="退出状态码变量"><a href="#退出状态码变量" class="headerlink" title="退出状态码变量"></a>退出状态码变量</h3><ul><li><p><strong>$?</strong>  变量  保存状态码的相关数字，不同的值反应成功或失败，$?取值范例 0-255</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">$?的值为0 #代表成功<br>$?的值是1到255 #代表失败<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:04:25 root@localhost ~]<span class="hljs-comment">#ping 114.114.114.114 -c1 &gt;/dev/null </span><br>[02:05:16 root@localhost ~]<span class="hljs-comment">#echo $?</span><br>0<br></code></pre></td></tr></table></figure></li><li><p>用户可以在脚本中使用以下命令自定义退出状态码</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">exit [n]<br></code></pre></td></tr></table></figure><ul><li>注意：<ul><li>脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字</li><li>如果exit后面无数字,终止退出状态取决于exit命令前面命令执行结果</li><li>如果没有exit命令, 即未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后<br>一条命令的状态码</li></ul></li></ul></li></ul><h3 id="展开命令行"><a href="#展开命令行" class="headerlink" title="展开命令行"></a>展开命令行</h3><ul><li><p>展开命令执行顺序</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http">把命令行分成单个命令词<br>展开别名<br>展开大括号的声明&#123;&#125;<br>展开波浪符声明 ~<br>命令替换$() 和 ``<br>再次把命令行分成命令词<br>展开文件通配符*、?、[abc]等等<br>准备I/0重导向 &lt;、&gt;<br>运行命令<br></code></pre></td></tr></table></figure></li><li><p>防止扩展</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">反斜线（\）会使随后的字符按原意解释<br></code></pre></td></tr></table></figure><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#echo Your cost: \$5.00</span><br>Your cost: <span class="hljs-variable">$5</span>.00<br>[root@rocky8 ~]<span class="hljs-comment">#echo &quot;The book&#x27;s price is \$10&quot;</span><br>The book<span class="hljs-string">&#x27;s price is $10</span><br></code></pre></td></tr></table></figure></li><li><p>加引号来防止扩展</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">`` : 反引号，命令替换<br>\：反斜线，禁止单个字符扩展<br>!：叹号，历史命令替换<br></code></pre></td></tr></table></figure></li><li><p>范例: ``和$() 区别</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:05:23 root@localhost ~]<span class="hljs-comment">#echo `echo \`</span><br>&gt; ^C<br>[02:52:46 root@localhost ~]<span class="hljs-comment">#echo `echo \\`</span><br>\<br>[02:52:52 root@localhost ~]<span class="hljs-comment">#echo `echo \\\`</span><br>&gt; ^C<br>[02:53:09 root@localhost ~]<span class="hljs-comment">#echo `echo \\\\`</span><br>\<br>[02:53:12 root@localhost ~]<span class="hljs-comment">#echo $(echo \)</span><br>&gt; ^C<br>[02:53:35 root@localhost ~]<span class="hljs-comment">#echo $(echo \\)</span><br>\<br>[02:53:39 root@localhost ~]<span class="hljs-comment">#echo $(echo \\\)</span><br>&gt; ^C<br>[02:54:21 root@localhost ~]<span class="hljs-comment">#echo $(echo \\\\)</span><br>\\<br></code></pre></td></tr></table></figure><ul><li>｀｀很容易与”搞混乱，尤其对初学者来说。</li><li>在多层次的复合替换中，｀｀必须要额外的转义字符处理（反斜线），而$( )比较直观。</li><li>最后，$( )的弊端是，并不是所有的类unix系统都支持这种方式，但反引号是肯定支持的。</li></ul></li></ul><h3 id="脚本安全和-set"><a href="#脚本安全和-set" class="headerlink" title="脚本安全和 set"></a>脚本安全和 set</h3><p>​    set 命令：可以用来定制 shell 环境</p><ul><li><p>$- 变量</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">h</span>：hashall，打开选项后，Shell 会将命令所在的路径hash下来，避免每次都要查询。通过<span class="hljs-built_in">set</span> +<span class="hljs-built_in">h</span>将<span class="hljs-built_in">h</span>选<br>项关闭<br>i：interactive<span class="hljs-literal">-comments</span>，包含这个选项说明当前的 shell 是一个交互式的 shell。所谓的交互式shell,<br>在脚本中，i选项是关闭的<br>m：monitor，打开监控模式，就可以通过Job control来控制进程的停止、继续，后台或者前台执行等<br>B：braceexpand，大括号扩展<br><span class="hljs-built_in">H</span>：<span class="hljs-built_in">history</span>，<span class="hljs-built_in">H</span>选项打开，可以展开历史列表中的命令，可以通过!感叹号来完成，例如“!!”返回上最近的<br>一个历史命令，“!n”返回第 n 个历史命令<br></code></pre></td></tr></table></figure><p>案例</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo $-</span><br>himBHs<br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#set +h</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo $-</span><br>imBHs<br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#hash</span><br>-bash: hash: hashing disabled<br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo &#123;1..10&#125;</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span> <span class="hljs-number">10</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo $-</span><br>imBHs<br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#set +B</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo $-</span><br>imHs<br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#echo &#123;1..10&#125;</span><br>&#123;<span class="hljs-number">1.</span><span class="hljs-number">.10</span>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>第二周作业</title>
    <link href="/2022/08/04/%E7%AC%AC%E4%BA%8C%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/08/04/%E7%AC%AC%E4%BA%8C%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="1-权限管理及文本编辑工具"><a href="#1-权限管理及文本编辑工具" class="headerlink" title="1. 权限管理及文本编辑工具"></a>1. 权限管理及文本编辑工具</h1><h2 id="1-1-默认权限管理"><a href="#1-1-默认权限管理" class="headerlink" title="1.1. 默认权限管理"></a>1.1. 默认权限管理</h2><h3 id="1-1-1-umask-值用来保留在创建文件或目录的权限"><a href="#1-1-1-umask-值用来保留在创建文件或目录的权限" class="headerlink" title="1.1.1. umask 值用来保留在创建文件或目录的权限"></a>1.1.1. umask 值用来保留在创建文件或目录的权限</h3><ul><li><p>新建文件和目录默认权限</p><ul><li><p>新建文件默认权限：666-umask，如果所得结果某位存在执行（奇数）权限，则将其权限+1,偶数不变。</p></li><li><p>新建目录的默认权限: 777-umask</p></li></ul></li><li><p>用户默认权限</p><ul><li>非特权用户umask默认是 002</li><li>root的umask 默认是 022</li></ul></li><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs http">umask<br>#模式方式显示<br>umask –S<br>#输出可被调用<br>umask –p<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#查询umask的值</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask </span><br>0022<br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask -p</span><br><span class="hljs-built_in">umask</span> 0044<br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask -S</span><br>u=rwx,g=wx,o=wx<br><br><span class="hljs-comment">#umask值022新建文件和目录默认权限</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask </span><br>0022<br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># ls</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># touch file</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># mkdir dir</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># ll</span><br>总用量 0<br>drwxr-xr-x. 2 root root 6 8月   4 09:42 <span class="hljs-built_in">dir</span><br>-rw-r--r--. 1 root root 0 8月   4 09:42 file<br><br><span class="hljs-comment">#修改 umask的值</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask -S 044</span><br>u=rwx,g=wx,o=wx<br><br><span class="hljs-comment">#umask值044新建文件和目录默认权限</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># umask </span><br>0044<br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># touch file02</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># mkdir dir02</span><br>[root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment"># ll</span><br>总用量 0<br>drwxr-xr-x. 2 root root 6 8月   4 09:42 <span class="hljs-built_in">dir</span><br>drwx-wx-wx. 2 root root 6 8月   4 09:43 dir02<br>-rw-r--r--. 1 root root 0 8月   4 09:42 file<br>-rw--w--w-. 1 root root 0 8月   4 09:43 file02<br><br><br><span class="hljs-comment">#umask一次性临时修改值，新建文件默认权限</span><br>[10:47:06 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#umask </span><br>0044<br>[10:47:19 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#(umask 066;touch file03 ; mkdir dir03)</span><br>[10:48:01 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#umask </span><br>0044<br>[10:48:18 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 0<br>drwx--x--x. 2 root root 6 8月   4 10:48 dir03<br>-rw-------. 1 root root 0 8月   4 10:48 file03<br><br><br></code></pre></td></tr></table></figure></li><li><p>永久保存umask</p><ul><li><p>全局设置： /etc/bashrc</p></li><li><p>用户设置：~/.bashrc</p></li></ul></li></ul><h2 id="1-2-特殊权限和属性及ACL"><a href="#1-2-特殊权限和属性及ACL" class="headerlink" title="1.2. 特殊权限和属性及ACL"></a>1.2. 特殊权限和属性及ACL</h2><ul><li>特殊权限：SUID, SGID, Sticky</li><li>特殊权限<ul><li>SUID 作用于二进制可执行文件上,用户将继承此程序所有者的权限</li><li>SGID<ul><li>作用于二进制可执行文件上,用户将继承此程序所有组的权限</li><li>作于于目录上, 此目录中新建的文件的所属组将自动从此目录继承</li></ul></li><li>STICKY 作用于目录上,此目录中的文件只能由所有者自已来删除</li></ul></li></ul><h3 id="1-2-1-特殊权限SUID"><a href="#1-2-1-特殊权限SUID" class="headerlink" title="1.2.1. 特殊权限SUID"></a>1.2.1. 特殊权限SUID</h3><ul><li><p>前提：进程有属主和属组；文件有属主和属组</p><ul><li>任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有执行权限</li><li>启动为进程之后，其进程的属主为发起者,进程的属组为发起者所属的组</li><li>进程访问文件时的权限，取决于进程的发起者</li></ul></li><li><p>二进制的可执行文件上SUID权限功能：</p><ul><li>任何一个可执行程序文件能不能启动为进程：取决发起者对程序文件是否拥有执行权限</li><li>启动为进程之后，其进程的属主为原程序文件的属主</li><li>SUID只对二进制可执行程序有效</li><li>SUID设置在目录上无意义</li></ul></li><li><p>SUID权限设定：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">chmod u+s FILE...<br>chmod 4xxx FILE<br>chmod u-s FILE...<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sh">[11:14:29 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 36<br>-rwxr-xr-x. 1 root root 33600 8月   4 11:11 passwd<br><br>[11:14:33 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#chmod u+s passwd </span><br>[11:15:00 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 36<br>-rwsr-xr-x. 1 root root 33600 8月   4 11:11 passwd<br><br>[11:15:02 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#chmod u-s passwd </span><br>[11:15:37 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 36<br>-rwxr-xr-x. 1 root root 33600 8月   4 11:11 passwd<br><br>[11:15:40 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#chmod 4777 passwd </span><br>[11:16:04 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 36<br>-rwsrwxrwx. 1 root root 33600 8月   4 11:11 passwd<br><br>[11:16:28 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#chmod 0755 passwd </span><br>[11:16:35 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll</span><br>总用量 36<br>-rwxr-xr-x. 1 root root 33600 8月   4 11:11 passwd<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2-2-特殊权限SGID"><a href="#1-2-2-特殊权限SGID" class="headerlink" title="1.2.2. 特殊权限SGID"></a>1.2.2. 特殊权限SGID</h3><ul><li><p>二进制的可执行文件上SGID权限功能：</p><ul><li>任何一个可执行程序文件能不能启动为进程：取决发起者对程序文件是否拥有执行权限</li><li>启动为进程之后，其进程的属组为原程序文件的属组</li></ul></li><li><p>SGID权限设定：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">chmod g+s FILE...<br>chmod 2xxx FILE<br>chmod g-s FILE...<br></code></pre></td></tr></table></figure></li><li><p>目录上的SGID权限功能</p><p>默认情况下，用户创建文件时，其属组为此用户所属的主组，一旦某目录被设定了SGID，则对此目录有写权限的用户在此目录中创建的文件所属的组为此目录的属组，通常用于创建一个协作目录</p></li><li><p>SGID权限设定：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">chmod g+s DIR...<br>chmod 2xxx DIR<br>chmod g-s DIR...<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2-3-特殊权限-Sticky-位"><a href="#1-2-3-特殊权限-Sticky-位" class="headerlink" title="1.2.3. 特殊权限 Sticky 位"></a>1.2.3. 特殊权限 Sticky 位</h3><ul><li><p>权限说明：具有写权限的目录通常用户可以删除该目录中的任何文件，无论该文件的权限或拥有权<br>在目录设置Sticky 位，只有文件的所有者或root可以删除该文件<br>sticky 设置在文件上无意义。</p></li><li><p>Sticky权限设定：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">chmod o+t DIR...<br>chmod 1xxx DIR<br>chmod o-t DIR...<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sh">[11:32:54 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#touch dir/file</span><br>[11:33:53 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll dir/file </span><br>-rw-r--r--. 1 root root 0 8月   4 11:33 <span class="hljs-built_in">dir</span>/file<br>[11:34:00 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#chmod 777 dir/file </span><br>[11:34:48 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll dir/file </span><br>-rwxrwxrwx. 1 root root 0 8月   4 11:33 <span class="hljs-built_in">dir</span>/file<br>[11:34:58 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#su zxl</span><br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">rm</span> -fr <span class="hljs-built_in">dir</span>/file <br><span class="hljs-built_in">rm</span>: 无法删除<span class="hljs-string">&#x27;dir/file&#x27;</span>: 不允许的操作<br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">touch</span> <span class="hljs-built_in">dir</span>/file_zxl<br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ ll <span class="hljs-built_in">dir</span>/*<br>-rwxrwxrwx. 1 root root 0 8月   4 11:33 <span class="hljs-built_in">dir</span>/file<br>-rw-rw-r--. 1 zxl  zxl  0 8月   4 11:35 <span class="hljs-built_in">dir</span>/file_zxl<br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">exit</span><br><span class="hljs-built_in">exit</span><br>[11:37:57 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#rm rf dir/filez_zxl</span><br><span class="hljs-built_in">rm</span>: 无法删除<span class="hljs-string">&#x27;rf&#x27;</span>: 没有那个文件或目录<br><span class="hljs-built_in">rm</span>: 无法删除<span class="hljs-string">&#x27;dir/filez_zxl&#x27;</span>: 没有那个文件或目录<br>[11:38:32 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ls dir/</span><br>file  file_zxl<br>[11:38:47 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#rm dir/file_zxl</span><br><span class="hljs-built_in">rm</span>：是否删除普通空文件 <span class="hljs-string">&#x27;dir/file_zxl&#x27;</span>？y<br>[11:39:53 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#ll dir/file </span><br>-rwxrwxrwx. 1 root root 0 8月   4 11:33 <span class="hljs-built_in">dir</span>/file<br>[11:40:32 root@localhost <span class="hljs-built_in">umask</span>]<span class="hljs-comment">#su zxl</span><br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">rm</span> -fr <span class="hljs-built_in">dir</span>/file <br><span class="hljs-built_in">rm</span>: 无法删除<span class="hljs-string">&#x27;dir/file&#x27;</span>: 不允许的操作<br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;写入文件内容&quot;</span> &gt; <span class="hljs-built_in">dir</span>/file <br>[zxl@localhost <span class="hljs-built_in">umask</span>]$ <span class="hljs-built_in">cat</span> <span class="hljs-built_in">dir</span>/file <br>写入文件内容<br><br></code></pre></td></tr></table></figure></li></ul><h2 id="1-3-文本编辑工具vim"><a href="#1-3-文本编辑工具vim" class="headerlink" title="1.3. 文本编辑工具vim"></a>1.3. 文本编辑工具vim</h2><p>vim是Linux或者类unix系统下非常实用的文本编辑处理工具。</p><p><img src="https://img-blog.csdn.net/20171117235553427" alt="img"></p><ul><li><p>参考链接</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://www.w3cschool.cn/vim/<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-1-vim-命令格式"><a href="#1-3-1-vim-命令格式" class="headerlink" title="1.3.1. vim 命令格式"></a>1.3.1. vim 命令格式</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">vim [<span class="hljs-keyword">OPTION</span>]... <span class="hljs-keyword">FILE</span>...<br></code></pre></td></tr></table></figure><ul><li><p>常用选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">+<span class="hljs-comment"># 打开文件后，让光标处于第#行的行首，+默认行尾</span><br>+/PATTERN 让光标处于第一个被PATTERN匹配到的行行首<br>-b file 二进制方式打开文件<br>-d file1 file2… 比较多个文件，相当于 vimdiff<br>-m file 只读打开文件<br>-e file 直接进入ex模式，相当于执行ex file<br>-y file Easy mode (like <span class="hljs-string">&quot;evim&quot;</span>, modeless)，直接可以操作文件，ctrl+o:wq|q! 保存和不<br>保存退出<br></code></pre></td></tr></table></figure></li><li><p>说明</p><ul><li>如果该文件存在，文件被打开并显示内容</li><li>如果该文件不存在，当编辑后第一次存盘时创建它</li></ul></li></ul><h3 id="1-3-2-三种主要模式和转换"><a href="#1-3-2-三种主要模式和转换" class="headerlink" title="1.3.2. 三种主要模式和转换"></a>1.3.2. 三种主要模式和转换</h3><p>vim 是 一个模式编辑器，击键行为是依赖于 vim的 的“模式”</p><ul><li><p>VIM四种常见模式：</p><ul><li>命令或普通(Normal)模式：默认模式，可以实现移动光标，剪切/粘贴文本</li><li>插入(Insert)或编辑模式：用于修改文本</li><li>扩展命令(extended command )或命令(末)行模式：保存，退出等</li><li>可视模式：在正常模式按下<code>v, V, &lt;Ctrl&gt;+v</code>，可以进入可视模式</li></ul></li><li><p>模式转换</p></li></ul><p><img src="image-20220807121025252.png" alt="image-20220807121025252"></p><ul><li><p>命令模式 –&gt; 插入模式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">i insert, 在光标所在处输入<br>I 在当前光标所在行的行首输入<br>a append, 在光标所在处后面输入<br>A 在当前光标所在行的行尾输入<br>o 在当前光标所在行的下方打开一个新行<br>O 在当前光标所在行的上方打开一个新行<br></code></pre></td></tr></table></figure></li><li><p>插入模式 — ESC—–&gt; 命令模式<br>命令模式 —- : —-&gt; 扩展命令模式<br>扩展命令模式 —-ESC,enter—-&gt; 命令模式</p></li><li><p>案例: 插入颜色字符</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">1 切换至插入模式<br>2 按ctrl+v+[ 三个键,显示^[<br>3 后续输入颜色信息,如:^[[32mhello^[[0m<br>4 切换至扩展命令模式,保存退出<br>5 cat 文件可以看到下面显示<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-3-扩展命令模式"><a href="#1-3-3-扩展命令模式" class="headerlink" title="1.3.3. 扩展命令模式"></a>1.3.3. 扩展命令模式</h3><p>按“:”进入Ex模式 ，创建一个命令提示符: 处于底部的屏幕左侧</p><ul><li><p>扩展命令模式基本命令</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs http">w 写（存）磁盘文件<br>wq 写入并退出<br>x 写入并退出<br>X 加密<br>q 退出<br>q！ 不存盘退出，即使更改都将丢失<br>r filename 读文件内容到当前文件中<br>w filename 将当前文件内容写入另一个文件<br>!command 执行命令<br>r!command 读入命令的输出<br></code></pre></td></tr></table></figure></li><li><p>地址定界</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">:start_pos,end_pos CMD<br></code></pre></td></tr></table></figure><ul><li><p>地址定界格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs http"># #具体第#行，例如2表示第2行<br>#,# #从左侧#表示起始行，到右侧#表示结尾行<br>#,+# #从左侧#表示的起始行，加上右侧#表示的行数，范例：2,+3 表示2到5行<br>. #当前行<br>$ #最后一行<br>.,$-1 #当前行到倒数第二行<br>% #全文, 相当于1,$<br>/pattern/ #从当前行向下查找，直到匹配pattern的第一行,即:正则表达式<br>/pat1/,/pat2/ #从第一次被pat1模式匹配到的行开始，一直到第一次被pat2匹配到的行结束<br>#,/pat/ #从指定行开始，一直找到第一个匹配pattern的行结束<br>/pat/,$ #向下找到第一个匹配patttern的行到整个文件的结尾的所有行<br></code></pre></td></tr></table></figure></li><li><p>地址定界后跟一个编辑命令</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">d #删除<br>y #复制<br>w file #将范围内的行另存至指定文件中<br>r file #在指定位置插入指定文件中的所有内容<br>t#行号 将前面指定的行复制到#行后<br>m#行号 将前面指定的行移动到#行后<br></code></pre></td></tr></table></figure></li></ul></li><li><p>查找并替换</p><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">%s/要查找的内容/替换为的内容/修饰符<br></code></pre></td></tr></table></figure></li><li><p>说明</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">要查找的内容：可使用基本正则表达式模式<br>替换为的内容：不能使用模式，但可以使用\1, \2, ...等后向引用符号；还可以使用“&amp;”引用前面查找时查找到的整个内容<br></code></pre></td></tr></table></figure></li><li><p>修饰符</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">i #忽略大小写<br>g #全局替换，默认情况下，每一行只替换第一次出现<br>gc #全局替换，每次替换前询问<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[12:33:09 root@localhost ~]<span class="hljs-comment">#cat f1</span><br>abc<br>123<br>qqq<br>ccc<br>[12:33:16 root@localhost ~]<span class="hljs-comment">#vim f1</span><br>:%s<span class="hljs-comment">#123#6#g</span><br>[12:40:22 root@localhost ~]<span class="hljs-comment">#cat f1</span><br>abc<br>6<br>qqq<br>ccc<br><br></code></pre></td></tr></table></figure></li></ul></li><li><p>定制vim的工作特性</p><p>扩展命令模式的配置只是对当前vim进程有效，可将配置存放在文件中持久保存</p><ul><li><p>配置文件</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">/etc/vimrc #全局<br>~/.vimrc #个人<br></code></pre></td></tr></table></figure></li><li><p>行号</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">显示：set number，简写 set nu<br>取消显示：set nonumber, 简写 set nonu<br></code></pre></td></tr></table></figure></li><li><p>忽略字符的大小写</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set ignorecase，简写 set ic<br>不忽略：set noic<br></code></pre></td></tr></table></figure></li><li><p>自动缩进</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set autoindent，简写 set ai<br>禁用：set noai<br></code></pre></td></tr></table></figure></li><li><p>复制保留格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set paste<br>禁用：set nopaste<br></code></pre></td></tr></table></figure></li><li><p>显示Tab ^I和换行符 和$显示</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set list<br>禁用：set nolist<br></code></pre></td></tr></table></figure></li><li><p>高亮搜索</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set hlsearch<br>禁用：set nohlsearch 简写：nohl<br></code></pre></td></tr></table></figure></li><li><p>语法高亮</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：syntax on<br>禁用：syntax off<br></code></pre></td></tr></table></figure></li><li><p>文件格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">启用windows格式：set fileformat=dos<br>启用unix格式：set fileformat=unix<br>简写 set ff=dos|unix<br></code></pre></td></tr></table></figure></li><li><p>Tab 用空格代替</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set expandtab 默认为8个空格代替Tab<br>禁用：set noexpandtab<br>简写：set et<br></code></pre></td></tr></table></figure></li><li><p>Tab用指定空格的个数代替</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set tabstop=# 指定#个空格代替Tab<br>简写：set ts=4<br></code></pre></td></tr></table></figure></li><li><p>设置缩进宽度</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">#向右缩进 命令模式&gt;&gt;<br>#向左缩进 命令模式&lt;&lt;<br>#设置缩进为4个字符<br>set shiftwidth=4<br></code></pre></td></tr></table></figure></li><li><p>设置文本宽度</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">set textwidth=65 (vim only) #从左向右计数<br>set wrapmargin=15 #从右到左计数<br></code></pre></td></tr></table></figure></li><li><p>设置光标所在行的标识线</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用：set cursorline，简写 set cul<br>禁用：set nocursorline<br></code></pre></td></tr></table></figure></li><li><p>加密</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">启用： set key=password<br>禁用： set key=<br></code></pre></td></tr></table></figure></li><li><p>set 帮助</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">:help option-list<br>:set or :set all<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="1-3-4-命令模式"><a href="#1-3-4-命令模式" class="headerlink" title="1.3.4. 命令模式"></a>1.3.4. 命令模式</h3><p>命令模式，又称为Normal模式，功能强大，只是此模式输入指令并在屏幕上显示，所以需要记忆大量<br>的快捷按键才能更好的使用</p><ul><li><p>退出VIM</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">ZZ 保存退出<br>ZQ 不保存退出<br></code></pre></td></tr></table></figure></li><li><p>光标跳转</p><ul><li><p>字符间跳转</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">h</span><span class="hljs-punctuation">: </span>左<br><span class="hljs-attribute">L</span><span class="hljs-punctuation">: </span>右<br><span class="hljs-attribute">j</span><span class="hljs-punctuation">: </span>下<br><span class="hljs-attribute">k</span><span class="hljs-punctuation">: </span>上<br>#COMMAND：跳转由#指定的个数的字符<br></code></pre></td></tr></table></figure></li><li><p>单词间跳转</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">w：下一个单词的词首<br>e：当前或下一单词的词尾<br>b：当前或前一个单词的词首<br>#COMMAND：由#指定一次跳转的单词数<br></code></pre></td></tr></table></figure></li><li><p>当前页跳转</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">H：页首<br>M：页中间行<br>L：页底<br>zt：将光标所在当前行移到屏幕顶端<br>zz：将光标所在当前行移到屏幕中间<br>zb：将光标所在当前行移到屏幕底端<br></code></pre></td></tr></table></figure></li><li><p>行首行尾跳转</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">^ 跳转至行首的第一个非空白字符<br>0 跳转至行首<br>$ 跳转至行尾<br></code></pre></td></tr></table></figure></li><li><p>行间移动</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">#G 或者扩展命令模式下<br>:# 跳转至由第#行<br>G 最后一行<br>1G, gg 第一行<br></code></pre></td></tr></table></figure></li><li><p>句间移动</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">) 下一句<br>( 上一句<br></code></pre></td></tr></table></figure></li><li><p>命令模式翻屏操作</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">Ctrl+f 向文件尾部翻一屏,相当于Pagedown<br>Ctrl+b 向文件首部翻一屏,相当于Pageup<br>Ctrl+d 向文件尾部翻半屏<br>Ctrl+u 向文件首部翻半屏<br></code></pre></td></tr></table></figure></li></ul></li><li><p>字符编辑</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">x 剪切光标处的字符<br>#x 剪切光标处起始的#个字符<br>xp 交换光标所在处的字符及其后面字符的位置<br>~ 转换大小写<br>J 删除当前行后的换行符<br></code></pre></td></tr></table></figure></li><li><p>替换命令(replace)</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">r 只替换光标所在处的一个字符<br>R 切换成REPLACE模式（在末行出现-- REPLACE -- 提示）,按ESC回到命令模式<br></code></pre></td></tr></table></figure></li><li><p>删除命令(delete)</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs http">d 删除命令，可结合光标跳转字符，实现范围删除<br>d$ 删除到行尾<br>d^ 删除到非空行首<br>d0 删除到行首<br>dw<br>de<br>db<br>#COMMAND<br>dd： 剪切光标所在的行<br>#dd 多行删除<br>D：从当前光标位置一直删除到行尾，等同于d$<br></code></pre></td></tr></table></figure></li><li><p>复制命令(yank)</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs http">y 复制，行为相似于d命令<br>y$<br>y0<br>y^<br>ye<br>yw<br>yb<br>#COMMAND<br>yy：复制行<br>#yy 复制多行<br>Y：复制整行<br></code></pre></td></tr></table></figure></li><li><p>粘贴命令(paste)</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs http">c$<br>c^<br>c0<br>cb<br>ce<br>cw<br>#COMMAND<br>cc #删除当前行并输入新内容，相当于S<br>#cc<br>C #删除当前光标到行尾，并切换成插入模式,相当于c$<br></code></pre></td></tr></table></figure></li><li><p>查找</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">/PATTERN：从当前光标所在处向文件尾部查找<br>?PATTERN：从当前光标所在处向文件首部查找<br>n：与命令同方向<br>N：与命令反方向<br></code></pre></td></tr></table></figure><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">[12:55:28 root@localhost ~]<span class="hljs-comment">#vim f1 </span><br>abc<br>6 <br>qqq<br>ccc<br><br>:/qqq<br></code></pre></td></tr></table></figure></li></ul></li><li><p>撤消更改</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">u 撤销最近的更改，相当于windows中ctrl+z<br>#u 撤销之前多次更改<br>U 撤消光标落在这行后所有此行的更改<br>Ctrl-r 重做最后的“撤消”更改，相当于windows中crtl+y<br>. 重复前一个操作<br>#. 重复前一个操作#次<br></code></pre></td></tr></table></figure></li><li><p>高级用法</p><ul><li><p>常见Command：y 复制、d 删除、gU 变大写、gu 变小写</p></li><li><p>范例</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">0y$ 命令<br>0 → 先到行头<br>y → 从这里开始拷贝<br>$ → 拷贝到本行最后一个字符<br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">di&quot; 光标在” “之间，则删除” “之间的内容<br>yi( 光标在()之间，则复制()之间的内容<br>vi[ 光标在[]之间，则选中[]之间的内容<br>dtx 删除字符直到遇见光标之后的第一个 x 字符<br>ytx 复制字符直到遇见光标之后的第一个 x 字符<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="1-3-5-可视化模式"><a href="#1-3-5-可视化模式" class="headerlink" title="1.3.5. 可视化模式"></a>1.3.5. 可视化模式</h3><ul><li><p>说明</p><ul><li>在末行有”– VISUAL – “指示，表示在可视化模式</li><li>可视化键可用于与移动键结合使用</li><li>w ) } 箭头等突出显示的文字可被删除，复制，变更，过滤，搜索，替换等</li></ul></li><li><p>允许选择的文本块</p><ul><li>v 面向字符，– VISUAL –</li><li>V 面向整行，– VISUAL LINE –</li><li>ctrl-v 面向块，– VISUAL BLOCK –</li></ul></li><li><p>案例1：在文件指定行的行首插入#</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">1、先将光标移动到指定的第一行的行首<br>2、输入ctrl+v 进入可视化模式<br>3、向下移动光标，选中希望操作的每一行的第一个字符<br>4、输入大写字母 I 切换至插入模式<br>5、输入 #<br>6、按 ESC 键<br></code></pre></td></tr></table></figure></li><li><p>案例2：在指定的块位置插入相同的内容</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">1、光标定位到要操作的地方<br>2、CTRL+v 进入“可视块”模式，选取这一列操作多少行<br>3、SHIFT+i(I)<br>4、输入要插入的内容<br>5、按 ESC 键<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-6-多文件模式"><a href="#1-3-6-多文件模式" class="headerlink" title="1.3.6. 多文件模式"></a>1.3.6. 多文件模式</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http">vim FILE1 FILE2 FILE3 ...<br>:next 下一个<br>:prev 前一个<br>:first 第一个<br>:last 最后一个<br>:wall 保存所有<br>:qall 不保存退出所有<br>:wqall保存退出所有<br></code></pre></td></tr></table></figure><h3 id="1-3-7-多窗口模式"><a href="#1-3-7-多窗口模式" class="headerlink" title="1.3.7. 多窗口模式"></a>1.3.7. 多窗口模式</h3><ul><li><p>多文件分割</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">vim -o|-O FILE1 FILE2 ...<br>-o: 水平或上下分割<br>-O: 垂直或左右分割（vim only）<br>在窗口间切换：Ctrl+w, Arrow<br></code></pre></td></tr></table></figure></li><li><p>单文件窗口分割</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">Ctrl+w,s：split, 水平分割，上下分屏<br>Ctrl+w,v：vertical, 垂直分割，左右分屏<br>ctrl+w,q：取消相邻窗口<br>ctrl+w,o：取消全部窗口<br>:wqall 退出<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-8-帮助"><a href="#1-3-8-帮助" class="headerlink" title="1.3.8. 帮助"></a>1.3.8. 帮助</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">:help<br>:help topic<br>Use :q to exit help<br>#vimtutor<br></code></pre></td></tr></table></figure><h2 id="1-4-文本处理工具"><a href="#1-4-文本处理工具" class="headerlink" title="1.4. 文本处理工具"></a>1.4. 文本处理工具</h2><h3 id="1-4-1-文件内容查看命令"><a href="#1-4-1-文件内容查看命令" class="headerlink" title="1.4.1. 文件内容查看命令"></a>1.4.1. 文件内容查看命令</h3><h4 id="1-4-1-1-cat-可以查看文本内容"><a href="#1-4-1-1-cat-可以查看文本内容" class="headerlink" title="1.4.1.1. cat:可以查看文本内容"></a>1.4.1.1. cat:可以查看文本内容</h4><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">cat [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>常见选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">-E：显示行结束符$<br>-A：显示所有控制符，等价于 -vET<br>-n：对显示出的每一行进行编号<br>-b：非空行编号<br>-s：压缩连续的空行成一行<br>-T 或 --show-tabs: 将 TAB 字符显示为 ^I。<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:16:35 root@localhost ~]<span class="hljs-comment">#cat -A cat.txt</span><br>dadsad $<br>adsddasd  ddd a $<br> 22323 $<br>[13:16:44 root@localhost ~]<span class="hljs-comment">#cat cat.txt</span><br>dadsad <br>adsddasd  ddd a <br> 22323 <br><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-1-2-nl：显示行号，相当于cat-b"><a href="#1-4-1-2-nl：显示行号，相当于cat-b" class="headerlink" title="1.4.1.2. nl：显示行号，相当于cat -b"></a>1.4.1.2. nl：显示行号，相当于cat -b</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:16:44 root@localhost ~]<span class="hljs-comment">#cat cat.txt</span><br>dadsad <br>adsddasd  ddd a <br> 22323 <br>[13:16:49 root@localhost ~]<span class="hljs-comment">#nl cat.txt </span><br>     1dadsad <br>     2adsddasd  ddd a <br>     3 22323 <br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-1-3-tac：逆向显示文本内容"><a href="#1-4-1-3-tac：逆向显示文本内容" class="headerlink" title="1.4.1.3. tac：逆向显示文本内容"></a>1.4.1.3. tac：逆向显示文本内容</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:19:55 root@localhost ~]<span class="hljs-comment">#cat cat.txt </span><br>dadsad <br>adsddasd  ddd a <br> 22323 <br>[13:20:48 root@localhost ~]<span class="hljs-comment">#tac cat.txt </span><br> 22323 <br>adsddasd  ddd a <br>dadsad <br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-1-4-rev：将同一行的内容逆向显示"><a href="#1-4-1-4-rev：将同一行的内容逆向显示" class="headerlink" title="1.4.1.4. rev：将同一行的内容逆向显示"></a>1.4.1.4. rev：将同一行的内容逆向显示</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:19:55 root@localhost ~]<span class="hljs-comment">#cat cat.txt </span><br>dadsad <br>adsddasd  ddd a <br> 22323<br>[13:21:59 root@localhost ~]<span class="hljs-comment">#rev cat.txt </span><br> dasdad<br> a ddd  dsaddsda<br> 32322 <br><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-1-5-hexdump-查看非文本文件内容"><a href="#1-4-1-5-hexdump-查看非文本文件内容" class="headerlink" title="1.4.1.5. hexdump:查看非文本文件内容"></a>1.4.1.5. hexdump:查看非文本文件内容</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">hexdump -C -n 512 /dev/sda<br>00000000 eb 63 90 10 8e d0 bc 00 b0 b8 00 00 8e d8 8e c0 |.c..............|<br><span class="hljs-built_in">echo</span> &#123;a..z&#125; | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">&#x27; &#x27;</span>|hexdump -C<br>00000000 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 |abcdefghijklmnop|<br>00000010 71 72 73 74 75 76 77 78 79 7a 0a |qrstuvwxyz.|<br>0000001b<br></code></pre></td></tr></table></figure><h3 id="1-4-2-分页查看文件内容"><a href="#1-4-2-分页查看文件内容" class="headerlink" title="1.4.2. 分页查看文件内容"></a>1.4.2. 分页查看文件内容</h3><h4 id="1-4-2-1-more：可以实现分页查看文件，可以配合管道实现输出信息的分页"><a href="#1-4-2-1-more：可以实现分页查看文件，可以配合管道实现输出信息的分页" class="headerlink" title="1.4.2.1. more：可以实现分页查看文件，可以配合管道实现输出信息的分页"></a>1.4.2.1. more：可以实现分页查看文件，可以配合管道实现输出信息的分页</h4><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">more [OPTIONS...] FILE...<br></code></pre></td></tr></table></figure></li><li><p>选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-d: 显示翻页及退出提示</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-2-2-less：实现分页查看文件或STDIN输出，less-命令是man命令使用的分页器"><a href="#1-4-2-2-less：实现分页查看文件或STDIN输出，less-命令是man命令使用的分页器" class="headerlink" title="1.4.2.2. less：实现分页查看文件或STDIN输出，less 命令是man命令使用的分页器"></a>1.4.2.2. less：实现分页查看文件或STDIN输出，less 命令是man命令使用的分页器</h4><ul><li><p>查看时有用的命令包括</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">/文本 搜索 文本<br><span class="hljs-built_in">n</span>/<span class="hljs-built_in">N</span> 跳到下一个 或 上一个匹配<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:33:03 root@localhost ~]<span class="hljs-comment">#tree -d /etc |less</span><br>/etc<br>├── accountsservice<br>│   └── user-templates<br>├── alsa<br>│   └── conf.d<br>├── alternatives<br>│   ├── jre -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-2.el8_5.x86_64/jre<br>│   ├── jre_1.8.0 -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-2.el8_5.x86_64/jre<br>│   ├── jre_1.8.0_openjdk -&gt; /usr/lib/jvm/jre-1.8.0-openjdk-1.8.0.312.b07-2.el8_5.x86_64<br>│   └── jre_openjdk -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.312.b07-2.el8_5.x86_64/jre<br>├── anaconda<br>│   ├── conf.d<br>│   └── product.d<br>├── audit<br>│   ├── plugins.d<br>│   └── rules.d<br>├── authselect<br>│   └── custom<br>├── avahi<br>│   ├── etc<br>│   └── services<br>├── bash_completion.d<br>├── binfmt.d<br>├── bluetooth<br>├── brltty<br>│   ├── Attributes<br>│   ├── Contraction<br>│   ├── Input<br>│   │   ├── al<br>│   │   ├── at<br>│   │   ├── ba<br>│   │   ├── bd<br>│   │   ├── <span class="hljs-built_in">bg</span><br>│   │   ├── bl<br>│   │   ├── bm<br>:<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4-3-显示文本前面或后面的行内容"><a href="#1-4-3-显示文本前面或后面的行内容" class="headerlink" title="1.4.3. 显示文本前面或后面的行内容"></a>1.4.3. 显示文本前面或后面的行内容</h3><h4 id="1-4-3-1-head：显示文件或标准输入的前面行"><a href="#1-4-3-1-head：显示文件或标准输入的前面行" class="headerlink" title="1.4.3.1. head：显示文件或标准输入的前面行"></a>1.4.3.1. head：显示文件或标准输入的前面行</h4><ul><li><p>格式：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">head [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">-c # 指定获取前#字节<br>-n # 指定获取前#行,#如果为负数,表示从文件头取到倒数第#前，默认显示文件前10行<br>-v 显示文件名，默认不显示文件名<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:37:21 root@localhost ~]<span class="hljs-comment">#head -n 3  passwd </span><br>ROOT:x:0:0:ROOT:/ROOT:/bin/bash<br>bin:x:1:1:bin:/bin:/sbin/nologin<br>daemon:x:2:2:daemon:/sbin:/sbin/nologin<br><br><br>[13:38:48 root@localhost ~]<span class="hljs-comment">#head -n 3 -v  passwd </span><br>==&gt; passwd &lt;==<br>ROOT:x:0:0:ROOT:/ROOT:/bin/bash<br>bin:x:1:1:bin:/bin:/sbin/nologin<br>daemon:x:2:2:daemon:/sbin:/sbin/nologin<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-3-2-tail：tail-和head-相反，查看文件或标准输入的倒数行"><a href="#1-4-3-2-tail：tail-和head-相反，查看文件或标准输入的倒数行" class="headerlink" title="1.4.3.2. tail：tail 和head 相反，查看文件或标准输入的倒数行"></a>1.4.3.2. tail：tail 和head 相反，查看文件或标准输入的倒数行</h4><ul><li><p>格式：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">tail [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>常用选项：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">-c <span class="hljs-comment"># 指定获取后#字节</span><br>-n <span class="hljs-comment"># 指定获取后#行,如果#是负数,表示从第#行开始到文件结束</span><br>-<span class="hljs-comment"># 同上</span><br>-f 跟踪显示文件fd新追加的内容,常用日志监控，相当于 --follow=descriptor,当文件删除再新<br>建同名文件,将无法继续跟踪文件<br>-F 跟踪文件名，相当于--follow=name --retry，当文件删除再新建同名文件,将可以继续跟踪文<br>件<br>tailf 类似 <span class="hljs-built_in">tail</span> –f，当文件不增长时并不访问文件,节约资源,CentOS8已经无此工具<br>-v 显示详细的处理信息<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:42:15 root@localhost ~]<span class="hljs-comment">#tail -n 3  passwd </span><br>mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false<br>jira:x:1001:1001:Atlassian Jira:/home/jira:/bin/bash<br>apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin<br><br>[13:39:39 root@localhost ~]<span class="hljs-comment">#tail -n 3 -v  passwd </span><br>==&gt; passwd &lt;==<br>mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false<br>jira:x:1001:1001:Atlassian Jira:/home/jira:/bin/bash<br>apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4-4-按列抽取文本-cut"><a href="#1-4-4-按列抽取文本-cut" class="headerlink" title="1.4.4. 按列抽取文本 cut"></a>1.4.4. 按列抽取文本 cut</h3><ul><li><p>说明：cut 命令可以提取文本文件或STDIN数据的指定列</p></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">cut [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean">-d DELIMITER: 指明分隔符，默认tab<br>-f FILEDS:<br>        #: 第#个字段,例如:<span class="hljs-number">3</span><br>        #,#[,#]：离散的多个字段，例如:<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span><br>        #-#：连续的多个字段, 例如:<span class="hljs-number">1</span><span class="hljs-number">-6</span><br>        混合使用：<span class="hljs-number">1</span><span class="hljs-number">-3</span>,<span class="hljs-number">7</span><br>-c 按字符切割<br>--output-delimiter=STRING指定输出分隔符<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:47:56 root@localhost ~]<span class="hljs-comment">#head -n 3 passwd </span><br>ROOT:x:0:0:ROOT:/ROOT:/bin/bash<br>bin:x:1:1:bin:/bin:/sbin/nologin<br>daemon:x:2:2:daemon:/sbin:/sbin/nologin<br>[13:48:12 root@localhost ~]<span class="hljs-comment">#cut -d: -f1,3-4,7 passwd|head -n 3</span><br>ROOT:0:0:/bin/bash<br>bin:1:1:/sbin/nologin<br>daemon:2:2:/sbin/nologin<br></code></pre></td></tr></table></figure></li><li><p>案例2：获取IP地址</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:50:52 root@localhost ~]<span class="hljs-comment">#ifconfig|sed -n &#x27;2p&#x27; |tr -s &quot; &quot;|cut -d&quot; &quot; -f3</span><br>192.168.100.30<br></code></pre></td></tr></table></figure></li><li><p>案例3：获取内存信息大小</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#获取内存大小</span><br>[13:52:27 root@localhost ~]<span class="hljs-comment">#free -h|grep &#x27;^Mem&#x27;|tr -s &quot; &quot;|cut -d&quot; &quot; -f2</span><br>3.6Gi<br><span class="hljs-comment">#获取已使用内存</span><br>[13:58:36 root@localhost ~]<span class="hljs-comment">#free -h|grep &#x27;^Mem&#x27;|tr -s &quot; &quot;|cut -d&quot; &quot; -f3</span><br>2.9Gi<br><br></code></pre></td></tr></table></figure></li><li><p>案例4：获取CPU核数</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:55:02 root@localhost ~]<span class="hljs-comment">#lscpu|sed -n &#x27;4p&#x27;|tr -s &quot; &quot;|cut -d&quot; &quot; -f2</span><br>4<br></code></pre></td></tr></table></figure></li><li><p>案例5：获取硬盘大小</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:56:20 root@localhost ~]<span class="hljs-comment">#lsblk |grep &#x27;^sd&#x27;|tr -s &quot; &quot;|cut -d&quot; &quot; -f4</span><br>200G<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4-5-paste：合并多个文件"><a href="#1-4-5-paste：合并多个文件" class="headerlink" title="1.4.5. paste：合并多个文件"></a>1.4.5. paste：合并多个文件</h3><ul><li><p>说明：paste 合并多个文件同行号的列到一行</p></li><li><p>格式：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">paste [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">-d #分隔符：指定分隔符，默认用TAB<br>-s #所有行合成一行显示<br></code></pre></td></tr></table></figure></li><li><p>案例1：多文件输出合并显示</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#默认多文件内容合并为同一列</span><br>[14:19:03 root@localhost ~]<span class="hljs-comment">#cat f1</span><br>1<br>2<br>3<br>4<br>[14:19:19 root@localhost ~]<span class="hljs-comment">#cat f2</span><br>a<br>b<br>c<br>d<br>[14:19:20 root@localhost ~]<span class="hljs-comment">#paste f1 f2</span><br>1a<br>2b<br>3c<br>4d<br><br><span class="hljs-comment">#文件内容合并为同一行</span><br>[14:19:31 root@localhost ~]<span class="hljs-comment">#paste -s f1 f2</span><br>1234<br>abcd<br><br><span class="hljs-comment">#指定分隔符</span><br>[14:26:36 root@localhost ~]<span class="hljs-comment">#paste -s -d&quot;+&quot; f1</span><br>1+2+3+4<br></code></pre></td></tr></table></figure></li><li><p>案例2：批量修改密码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:28:32 root@localhost ~]<span class="hljs-comment">#paste -d&quot;:&quot; user pass </span><br>wang1:123456<br>wang2:654321<br>wang3:123654<br>[14:28:39 root@localhost ~]<span class="hljs-comment">#useradd wang1</span><br>[14:29:07 root@localhost ~]<span class="hljs-comment">#useradd wang2</span><br>[14:29:09 root@localhost ~]<span class="hljs-comment">#useradd wang3</span><br>[14:29:13 root@localhost ~]<span class="hljs-comment">#paste -d&quot;:&quot; user pass |chpasswd </span><br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4-6-分析文本的工具"><a href="#1-4-6-分析文本的工具" class="headerlink" title="1.4.6. 分析文本的工具"></a>1.4.6. 分析文本的工具</h3><ul><li>文本数据统计：wc</li><li>整理文本：sort</li><li>比较文件：diff和patch</li></ul><h4 id="1-4-6-1-wc：收集文本统计数据"><a href="#1-4-6-1-wc：收集文本统计数据" class="headerlink" title="1.4.6.1. wc：收集文本统计数据"></a>1.4.6.1. wc：收集文本统计数据</h4><ul><li><p>说明：wc 命令可用于统计文件的行总数、单词总数、字节总数和字符总数<br>可以对文件或STDIN中的数据统计</p></li><li><p>常用选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">-l 只计数行数<br>-w 只计数单词总数<br>-c 只计数字节总数<br>-m 只计数字符总数<br>-L 显示文件中最长行的长度<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:29:23 root@localhost ~]<span class="hljs-comment">#wc /etc/passwd</span><br>  52  113 2827 /etc/passwd<br>[14:32:10 root@localhost ~]<span class="hljs-comment">#wc -l /etc/passwd</span><br>52 /etc/passwd<br>[14:32:28 root@localhost ~]<span class="hljs-comment">#wc -w /etc/passwd</span><br>113 /etc/passwd<br>[14:32:37 root@localhost ~]<span class="hljs-comment">#wc -c /etc/passwd</span><br>2827 /etc/passwd<br>[14:32:48 root@localhost ~]<span class="hljs-comment">#wc -m /etc/passwd</span><br>2827 /etc/passwd<br><br><span class="hljs-comment">#通过管道符传递文件内容，可不显示文件名称</span><br>[14:32:58 root@localhost ~]<span class="hljs-comment">#cat /etc/passwd|wc -l</span><br>52<br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-6-2-sort：文本排序"><a href="#1-4-6-2-sort：文本排序" class="headerlink" title="1.4.6.2. sort：文本排序"></a>1.4.6.2. sort：文本排序</h4><ul><li><p>说明：把整理过的文本显示在STDOUT，不改变原始文件</p></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">sort [options] file(s)<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http">-r 执行反方向（由上至下）整理<br>-R 随机排序<br>-n 执行按数字大小整理<br>-h 人类可读排序,如: 2K 1G<br>-f 选项忽略（fold）字符串中的字符大小写<br>-u 选项（独特，unique），合并重复项，即去重<br>-t c 选项使用c做为字段界定符<br>-k # 选项按照使用c字符分隔的 # 列来整理能够使用多次<br></code></pre></td></tr></table></figure></li><li><p>案例1:根据用户id进行大小排序</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:34:29 root@localhost ~]<span class="hljs-comment">#cut -d: -f1,3 /etc/passwd|sort -t: -k2 -nr |head -n3</span><br>nobody:65534<br>wang3:1004<br>wang2:1003<br><br></code></pre></td></tr></table></figure></li><li><p>案例2：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:37:06 root@localhost ~]<span class="hljs-comment">#df | tr -s &quot; &quot; %|cut -d% -f5|tr -d &#x27;[:alpha:]&#x27; | sort -nr|head -n1</span><br>100<br></code></pre></td></tr></table></figure></li><li><p>案例3：统计日志访问量</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 data]<span class="hljs-comment">#cut -d&quot; &quot; -f1 /var/log/nginx/access_log |sort -u|wc -l</span><br>201<br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-6-3-去重-uniq"><a href="#1-4-6-3-去重-uniq" class="headerlink" title="1.4.6.3. 去重 uniq"></a>1.4.6.3. 去重 uniq</h4><ul><li><p>说明：uniq命令从输入中删除前后相接的重复的行</p></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">uniq [OPTION]... [FILE]...<br></code></pre></td></tr></table></figure></li><li><p>常见选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-c: 显示每行重复出现的次数</span><br><span class="hljs-deletion">-d: 仅显示重复过的行</span><br><span class="hljs-deletion">-u: 仅显示不曾重复的行</span><br></code></pre></td></tr></table></figure></li><li><p>案例1：uniq常和sort 命令一起配合使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:55:09 root@localhost ~]<span class="hljs-comment">#cat f</span><br>192.168.100.1<br>192.168.100.2<br>192.168.100.10<br>10.55.66.20<br>10.66.77.50<br>192.168.100.1<br>192.168.100.2<br>192.168.100.2<br>[14:55:48 root@localhost ~]<span class="hljs-comment">#sort f|uniq  -c</span><br>      1 10.55.66.20<br>      1 10.66.77.50<br>      2 192.168.100.1<br>      1 192.168.100.10<br>      3 192.168.100.2<br><br></code></pre></td></tr></table></figure></li><li><p>案例2：并发连接最多的远程主机IP</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[15:09:16 root@localhost ~]<span class="hljs-comment">#ss -nt|tail -n+2 |tr -s &#x27; &#x27; : |cut -d: -f6|sort|cut -d&quot;]&quot; -f1 |uniq -c|sort  -nr |head -n2</span><br>     74 127.0.0.1<br>     12 192.168.100.30<br></code></pre></td></tr></table></figure></li><li><p>案例3：取两个文件的相同和不同的行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 data]<span class="hljs-comment">#cat test1.txt</span><br>a<br>b<br>1<br>c<br>[root@centos8 data]<span class="hljs-comment">#cat test2.txt</span><br>b<br>e<br>f<br>c<br>1<br>2<br><span class="hljs-comment">#取文件的共同行</span><br>[root@centos8 data]<span class="hljs-comment">#cat test1.txt test2.txt | sort |uniq -d</span><br>1<br>b<br>c<br><span class="hljs-comment">#取文件的不同行</span><br>[root@centos8 data]<span class="hljs-comment">#cat test1.txt test2.txt | sort |uniq -u</span><br>2<br>a<br>e<br>f<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4-7-比较文件"><a href="#1-4-7-比较文件" class="headerlink" title="1.4.7. 比较文件"></a>1.4.7. 比较文件</h3><h4 id="1-4-7-1-diff：比较两个文件之间的区别"><a href="#1-4-7-1-diff：比较两个文件之间的区别" class="headerlink" title="1.4.7.1. diff：比较两个文件之间的区别"></a>1.4.7.1. diff：比较两个文件之间的区别</h4><ul><li>```<br>-u 选项来输出“统一的（unified）”diff格式文件，最适用于补丁文件<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><br>  <br><br>- 案例<br><br>  ```sh<br>  <span class="hljs-selector-attr">[21:08:22 root@localhost ~]</span><span class="hljs-selector-id">#paste</span> a1 a2<br>  zhang<span class="hljs-selector-tag">li</span><br>  wangtian<br>  <span class="hljs-selector-tag">li</span>    wang<br>  tianwang<br>  <span class="hljs-selector-attr">[21:09:02 root@localhost ~]</span><span class="hljs-selector-id">#diff</span> a1 a2<br>  <span class="hljs-number">1</span>,<span class="hljs-number">2</span>d0<br>  &lt; zhang<br>  &lt; wang<br>  <span class="hljs-number">4</span>a3,<span class="hljs-number">4</span><br>  &gt; wang<br>  &gt; wang<br>  <br>  <span class="hljs-selector-attr">[21:09:10 root@localhost ~]</span><span class="hljs-selector-id">#diff</span> -u a1 a2<br>  --- a1<span class="hljs-number">2022</span>-<span class="hljs-number">08</span>-<span class="hljs-number">07</span> <span class="hljs-number">21</span>:<span class="hljs-number">07</span>:<span class="hljs-number">15.551024796</span> +<span class="hljs-number">0800</span><br>  +++ a2<span class="hljs-number">2022</span>-<span class="hljs-number">08</span>-<span class="hljs-number">07</span> <span class="hljs-number">21</span>:<span class="hljs-number">07</span>:<span class="hljs-number">30.452025537</span> +<span class="hljs-number">0800</span><br>  @@ -<span class="hljs-number">1</span>,<span class="hljs-number">4</span> +<span class="hljs-number">1</span>,<span class="hljs-number">4</span> @@<br>  -zhang<br>  -wang<br>   <span class="hljs-selector-tag">li</span><br>   tian<br>  +wang<br>  +wang<br>  <br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-7-2-patch：复制在其它文件中进行的改变（要谨慎使用）"><a href="#1-4-7-2-patch：复制在其它文件中进行的改变（要谨慎使用）" class="headerlink" title="1.4.7.2. patch：复制在其它文件中进行的改变（要谨慎使用）"></a>1.4.7.2. patch：复制在其它文件中进行的改变（要谨慎使用）</h4><ul><li><p>选项</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">-<span class="hljs-keyword">b</span> 选项来自动备份改变了的文件<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs sh">[21:20:16 root@localhost ~]<span class="hljs-comment">#paste a1 a2 </span><br>zhangli<br>wangtian<br>liwang<br>tianwang<br>li<br>[21:21:02 root@localhost ~]<span class="hljs-comment">#diff -u a1 a2 &gt; a3</span><br>[21:21:11 root@localhost ~]<span class="hljs-comment">#cat a3</span><br>--- a12022-08-07 21:20:16.801063657 +0800<br>+++ a22022-08-07 21:07:30.452025537 +0800<br>@@ -1,5 +1,4 @@<br>-zhang<br>-wang<br> li<br> tian<br>-li<br>+wang<br>+wang<br>[21:21:13 root@localhost ~]<span class="hljs-comment">#patch -b a1 a3</span><br>patching file a1<br>[21:21:35 root@localhost ~]<span class="hljs-comment">#paste a1 a2</span><br>lili<br>tiantian<br>wangwang<br>wangwang<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-7-3-vimdiff：相当于-vim-d"><a href="#1-4-7-3-vimdiff：相当于-vim-d" class="headerlink" title="1.4.7.3. vimdiff：相当于 vim -d"></a>1.4.7.3. vimdiff：相当于 vim -d</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh">[21:24:02 root@localhost ~]<span class="hljs-comment">#paste f1 f2</span><br>1a<br>2b<br>3c<br>4d<br>[21:24:20 root@localhost ~]<span class="hljs-comment">#which vimdiff </span><br>/usr/bin/vimdiff<br>[21:25:26 root@localhost ~]<span class="hljs-comment">#ll /usr/bin/vimdiff</span><br>lrwxrwxrwx. 1 root root 3 9月  22 2021 /usr/bin/vimdiff -&gt; vim<br>[21:25:47 root@localhost ~]<span class="hljs-comment">#vimdiff f1 f2</span><br>还有 2 个文件等待编辑<br><br>  1                                            |  a                                           <br>  2                                            |  b                                           <br>  3                                            |  c                                           <br>  4                                            |  d  <br></code></pre></td></tr></table></figure></li></ul><h4 id="1-4-7-4-cmp：查看二进制文件的不同"><a href="#1-4-7-4-cmp：查看二进制文件的不同" class="headerlink" title="1.4.7.4. cmp：查看二进制文件的不同"></a>1.4.7.4. cmp：查看二进制文件的不同</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh">[21:28:22 root@localhost ~]<span class="hljs-comment">#ll /usr/bin/dir /usr/bin/ls</span><br>-rwxr-xr-x. 1 root root 143224 7月  14 2021 /usr/bin/dir<br>-rwxr-xr-x. 1 root root 143224 7月  14 2021 /usr/bin/ls<br>[21:29:01 root@localhost ~]<span class="hljs-comment">#ll /usr/bin/dir /usr/bin/ls -i</span><br>625637 -rwxr-xr-x. 1 root root 143224 7月  14 2021 /usr/bin/dir<br>625658 -rwxr-xr-x. 1 root root 143224 7月  14 2021 /usr/bin/ls<br>[21:29:32 root@localhost ~]<span class="hljs-comment">#diff /usr/bin/dir /usr/bin/ls</span><br>二进制文件 /usr/bin/dir 和 /usr/bin/ls 不同<br>[21:30:20 root@localhost ~]<span class="hljs-comment">#cmp /usr/bin/dir /usr/bin/ls</span><br>/usr/bin/dir /usr/bin/ls 不同：第 793 字节，第 1 行<br>[21:30:33 root@localhost ~]<span class="hljs-comment">#hexdump -s 790 -Cn 30 //usr/bin/dir</span><br>00000316  55 00 4a af b0 1d 71 42  b6 e7 e0 fe 2e e5 7d fa  |U.J...qB......&#125;.|<br>00000326  e7 5a 3c f5 86 8e 00 00  00 00 03 00 00 00        |.Z&lt;...........|<br>00000334<br>[21:32:05 root@localhost ~]<span class="hljs-comment">#hexdump -s 790 -Cn 30 //usr/bin/ls</span><br>00000316  55 00 bc cb 4c 17 51 6c  6a 9a d5 9c 3e c1 9b 34  |U...L.Qlj...&gt;..4|<br>00000326  7c 83 23 6c 04 c2 00 00  00 00 03 00 00 00        ||.<span class="hljs-comment">#l..........|</span><br>00000334<br><br></code></pre></td></tr></table></figure></li></ul><h1 id="2-正则表达式和相关工具及文件查找压缩"><a href="#2-正则表达式和相关工具及文件查找压缩" class="headerlink" title="2. 正则表达式和相关工具及文件查找压缩"></a>2. 正则表达式和相关工具及文件查找压缩</h1><h2 id="2-1-文本处理三剑客之grep"><a href="#2-1-文本处理三剑客之grep" class="headerlink" title="2.1. 文本处理三剑客之grep"></a>2.1. 文本处理三剑客之grep</h2><ul><li><p>说明：</p><ul><li><p>grep: Global search REgular expression and Print out the line</p></li><li><p>作用：文本搜索工具，根据用户指定的“模式”对目标文本逐行进行匹配检查；打印匹配到的行</p></li><li><p>模式：由正则表达式字符及文本字符所编写的过滤条件<br>帮助</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://man7.org/linux/man-pages/man1/grep.1.html<br></code></pre></td></tr></table></figure></li></ul></li><li><p>格式：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">grep</span> [<span class="hljs-keyword">OPTIONS</span>] PATTERN [<span class="hljs-keyword">FILE</span>...]<br></code></pre></td></tr></table></figure></li><li><p>常见选项：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs http">--color=auto 对匹配到的文本着色显示<br>-m # 匹配#次后停止<br>-v 显示不被pattern匹配到的行,即取反<br>-i 忽略字符大小写<br>-n 显示匹配的行号<br>-c 统计匹配的行数<br>-o 仅显示匹配到的字符串<br>-q 静默模式，不输出任何信息<br>-A # after, 后#行<br>-B # before, 前#行<br>-C # context, 前后各#行<br>-e 实现多个选项间的逻辑or关系,如：grep –e ‘cat &#x27; -e ‘dog&#x27; file<br>-w 匹配整个单词<br>-E 使用ERE，相当于egrep<br>-F 不支持正则表达式，相当于fgrep<br>-P 支持Perl格式的正则表达式<br>-f file 根据模式文件处理<br>-r 递归目录，但不处理软链接<br>-R 递归目录，但处理软链接<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[22:54:45 root@localhost data]<span class="hljs-comment">#cat /etc/passwd|grep root </span><br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>[22:55:26 root@localhost data]<span class="hljs-comment">#cat /etc/passwd|grep zxl </span><br>zxl:x:1000:1000:zxl:/home/zxl:/bin/bash<br>[22:55:30 root@localhost data]<span class="hljs-comment">#cat /etc/passwd|grep &quot;root&quot; </span><br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br></code></pre></td></tr></table></figure></li><li><p>案例2：统计CPU核数</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sh">[22:59:58 root@localhost data]<span class="hljs-comment">#cat /proc/cpuinfo</span><br>processor: 0<br>vendor_id: GenuineIntel<br>cpu family: 6<br>model: 140<br>model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>stepping: 1<br>microcode: 0xffffffff<br>cpu MHz: 2419.201<br>cache size: 8192 KB<br>physical <span class="hljs-built_in">id</span>: 0<br>siblings: 4<br>core <span class="hljs-built_in">id</span>: 0<br>cpu cores: 4<br>apicid: 0<br>initial apicid: 0<br>fpu: <span class="hljs-built_in">yes</span><br>fpu_exception: <span class="hljs-built_in">yes</span><br>cpuid level: 27<br>wp: <span class="hljs-built_in">yes</span><br>flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single ssbd ibrs ibpb stibp fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat flush_l1d arch_capabilities<br>bugs: spectre_v1 spectre_v2 spec_store_bypass swapgs<br>bogomips: 4838.40<br>clflush size: 64<br>cache_alignment: 64<br>address sizes: 43 bits physical, 48 bits virtual<br>power management:<br><br>[23:01:41 root@localhost data]<span class="hljs-comment">#grep -c processor /proc/cpuinfo</span><br>4<br><br></code></pre></td></tr></table></figure></li><li><p>案例3：取两个文件相同行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh">[23:04:03 root@localhost ~]<span class="hljs-comment">#paste f2 f4</span><br>ad<br>bf<br>ca<br>dc<br>[23:04:10 root@localhost ~]<span class="hljs-comment">#grep -f f2 f4</span><br>d<br>a<br>c<br><br>[23:06:45 root@localhost ~]<span class="hljs-comment">#cat f2 f4|sort |uniq -d</span><br>a<br>c<br>d<br></code></pre></td></tr></table></figure></li><li><p>案例4：取磁盘分区最大利用率</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[23:28:50 root@localhost ~]<span class="hljs-comment">#df |grep &#x27;^/dev/sd&#x27; |grep -Eow &quot;100|([0-9]&#123;1,2&#125;)%&quot;|cut -d&quot;%&quot; -f1|sort -nr|head -n 1</span><br>26<br></code></pre></td></tr></table></figure></li><li><p>案例5：连接状态的统计</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[23:37:22 root@localhost ~]<span class="hljs-comment">#ss -nta|grep -v &quot;^State&quot;|tr -s &quot; &quot;|cut -d&quot; &quot; -f1|sort|uniq -c|sort -t 1 -nr</span><br>     84 ESTAB<br>     11 LISTEN<br>      4 CLOSE-WAIT<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-2-基本正则表达式和扩展正则表达式"><a href="#2-2-基本正则表达式和扩展正则表达式" class="headerlink" title="2.2. 基本正则表达式和扩展正则表达式"></a>2.2. 基本正则表达式和扩展正则表达式</h2><ul><li><p>说明</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">REGEXP： Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符）<br>不表示字符字面意义，而表示控制或通配的功能，类似于增强版的通配符功能，但与通配符不同，通配<br>符功能是用来处理文件名，而正则表达式是处理文本内容中字符<br>正则表达式被很多程序和开发语言所广泛支持：<span class="hljs-keyword">vim</span>, less,<span class="hljs-keyword">grep</span>,sed,awk, nginx,mysql 等<br></code></pre></td></tr></table></figure></li><li><p>正则表达式分两类：</p><ul><li>基本正则表达式：BRE Basic Regular Expressions</li><li>扩展正则表达式：ERE Extended Regular Expressions</li></ul></li><li><p>正则表达式引擎</p><ul><li>采用不同算法，检查处理正则表达式的软件模块，如：PCRE</li><li>正则表达式的元字符分类：字符匹配、匹配次数、位置锚定、分组</li></ul></li><li><p>帮助：man 7 regex</p></li></ul><h3 id="2-2-1-正则表达式"><a href="#2-2-1-正则表达式" class="headerlink" title="2.2.1. 正则表达式"></a>2.2.1. 正则表达式</h3><h4 id="2-2-1-1-基本正则表达式元字符"><a href="#2-2-1-1-基本正则表达式元字符" class="headerlink" title="2.2.1.1. 基本正则表达式元字符"></a>2.2.1.1. 基本正则表达式元字符</h4><h5 id="2-2-1-1-1-字符匹配"><a href="#2-2-1-1-1-字符匹配" class="headerlink" title="2.2.1.1.1. 字符匹配"></a>2.2.1.1.1. 字符匹配</h5><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs http">. 匹配任意单个字符(除了\n)，可以是一个汉字或其它国家的文字<br>[] 匹配指定范围内的任意单个字符，示例：[wang] [0-9] [a-z] [a-zA-Z]<br>[^] 匹配指定范围外的任意单个字符,示例：[^wang]<br>[:alnum:] 字母和数字<br>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z<br>[:lower:] 小写字母,示例:[[:lower:]],相当于[a-z]<br>[:upper:] 大写字母<br>[:blank:] 空白字符（空格和制表符）<br>[:space:] 包括空格、制表符(水平和垂直)、换行符、回车符等各种类型的空白,比[:blank:]包含的范围<br>广<br>[:cntrl:] 不可打印的控制字符（退格、删除、警铃...）<br>[:digit:] 十进制数字<br>[:xdigit:]十六进制数字<br>[:graph:] 可打印的非空白字符<br>[:print:] 可打印字符<br>[:punct:] 标点符号<br>-----------------<br>\s #匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [\f\r\t\v]。注意 Unicode<br>正则表达式会匹配全角空格符<br>\S #匹配任何非空白字符。等价于 [^\f\r\t\v]<br>\w #匹配一个字母,数字,下划线,汉字,其它国家文字的字符，等价于[_[:alnum:]字]<br>\W #匹配一个非字母,数字,下划线,汉字,其它国家文字的字符，等价于[^_[:alnum:]字]<br></code></pre></td></tr></table></figure><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs sh">[21:42:33 root@localhost ~]<span class="hljs-comment">#ls /etc/ |grep rc[0-6.]</span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>rc.d<br>rc.local<br>[21:51:39 root@localhost data]<span class="hljs-comment">#ls</span><br>1.txt  3.txt  5.txt  7.txt  a.txt  b.txt  c.txt  d.txt  e.txt  f.txt  g.txt<br>2.txt  4.txt  6.txt  8.txt  A.txt  B.txt  C.txt  D.txt  E.txt  F.txt  G.txt<br>[21:51:40 root@localhost data]<span class="hljs-comment">#ls | grep &quot;[1-10].txt&quot;</span><br>1.txt<br>[21:51:49 root@localhost data]<span class="hljs-comment">#ls | grep &quot;[0-9].txt&quot;</span><br>1.txt<br>2.txt<br>3.txt<br>4.txt<br>5.txt<br>6.txt<br>7.txt<br>8.txt<br>[21:52:18 root@localhost data]<span class="hljs-comment">#ls | grep &quot;[a-z].txt&quot;</span><br>a.txt<br>b.txt<br>c.txt<br>d.txt<br>e.txt<br>f.txt<br>g.txt<br>[21:52:40 root@localhost data]<span class="hljs-comment">#ls | grep &quot;[A-Z].txt&quot;</span><br>A.txt<br>B.txt<br>C.txt<br>D.txt<br>E.txt<br>F.txt<br>G.txt<br>[21:53:19 root@localhost data]<span class="hljs-comment">#ls | grep &quot;[[:alnum:]].txt&quot;</span><br>1.txt<br>2.txt<br>3.txt<br>4.txt<br>5.txt<br>6.txt<br>7.txt<br>8.txt<br>a.txt<br>A.txt<br>b.txt<br>B.txt<br>c.txt<br>C.txt<br>d.txt<br>D.txt<br>e.txt<br>E.txt<br>f.txt<br>F.txt<br>g.txt<br>G.txt<br><br></code></pre></td></tr></table></figure></li></ul><h5 id="2-2-1-1-2-匹配次数"><a href="#2-2-1-1-2-匹配次数" class="headerlink" title="2.2.1.1.2. 匹配次数"></a>2.2.1.1.2. 匹配次数</h5><ul><li><p>说明：用在要指定次数的字符后面，用于指定前面的字符要出现的次数</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http">* #匹配前面的字符任意次，包括0次，贪婪模式：尽可能长的匹配<br>.* #任意长度的任意字符<br>\? #匹配其前面的字符出现0次或1次,即:可有可无<br>\+ #匹配其前面的字符出现最少1次,即:肯定有且 &gt;=1 次<br>\&#123;n\&#125; #匹配前面的字符n次<br>\&#123;m,n\&#125; #匹配前面的字符至少m次，至多n次<br>\&#123;,n\&#125; #匹配前面的字符至多n次,&lt;=n<br>\&#123;n,\&#125; #匹配前面的字符至少n次<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sh">[21:58:20 root@localhost data]<span class="hljs-comment">#cat test </span><br>google<br>gooogle<br>gooooogle<br>gogle<br>gggoogle<br>gogooogle<br>[21:59:20 root@localhost data]<span class="hljs-comment">#cat test |grep &quot;goo0*gle&quot;</span><br>google<br>gggoogle<br>[22:00:28 root@localhost data]<span class="hljs-comment">#cat test |grep &quot;go\&#123;1,2\&#125;gle&quot;</span><br>google<br>gogle<br>gggoogle<br>[22:00:48 root@localhost data]<span class="hljs-comment">#cat test |grep &quot;go\&#123;3,\&#125;gle&quot;</span><br>gooogle<br>gooooogle<br>gogooogle<br>[22:02:58 root@localhost data]<span class="hljs-comment">#cat test |grep &quot;gooo\+gle&quot;</span><br>gooogle<br>gooooogle<br>gogooogle<br>[22:03:17 root@localhost data]<span class="hljs-comment">#cat test |grep &quot;gooo\?gle&quot;</span><br>google<br>gooogle<br>gggoogle<br>gogooogle<br></code></pre></td></tr></table></figure></li><li><p>案例2：匹配正负数</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sh">[22:12:41 root@localhost data]<span class="hljs-comment">#cat t1.txt</span><br>abc<br>123<br>-1<br>-22<br>23<br>a12<br>-1a4<br>-f123<br>35<br><span class="hljs-comment">#方法1</span><br>[22:12:52 root@localhost data]<span class="hljs-comment">#cat t1.txt | grep &#x27;^\-\?[0-9]\+$&#x27;</span><br>123<br>-1<br>-22<br>23<br>35<br><span class="hljs-comment">#方法2</span><br>[22:12:58 root@localhost data]<span class="hljs-comment">#cat t1.txt | grep -E &#x27;^-?[0-9]+$&#x27;</span><br>123<br>-1<br>-22<br>23<br>35<br></code></pre></td></tr></table></figure></li></ul><h5 id="2-2-1-1-3-位置锚定"><a href="#2-2-1-1-3-位置锚定" class="headerlink" title="2.2.1.1.3. 位置锚定"></a>2.2.1.1.3. 位置锚定</h5><ul><li><p>s说明：位置锚定可以用于定位出现的位置</p></li><li><p>选项</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs elixir">^ <span class="hljs-comment">#行首锚定, 用于模式的最左侧</span><br><span class="hljs-variable">$ </span><span class="hljs-comment">#行尾锚定，用于模式的最右侧</span><br>^<span class="hljs-title class_">PATTERN</span><span class="hljs-variable">$ </span><span class="hljs-comment">#用于模式匹配整行</span><br>^<span class="hljs-variable">$ </span><span class="hljs-comment">#空行</span><br>^[[<span class="hljs-symbol">:space</span><span class="hljs-symbol">:</span>]]*<span class="hljs-variable">$ </span><span class="hljs-comment">#空白行</span><br>\&lt; 或 \b <span class="hljs-comment">#词首锚定，用于单词模式的左侧</span><br>\&gt; 或 \b <span class="hljs-comment">#词尾锚定，用于单词模式的右侧</span><br>\&lt;<span class="hljs-title class_">PATTERN</span>\&gt; <span class="hljs-comment">#匹配整个单词</span><br><span class="hljs-comment">#注意: 单词是由字母,数字,下划线组成</span><br></code></pre></td></tr></table></figure></li><li><p>案例1：匹配设备挂载，排除注释和空行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[22:13:55 root@localhost data]<span class="hljs-comment">#grep &#x27;^[^#]&#x27; /etc/fstab</span><br>UUID=23a498b0-3783-46e4-b55f-fdb1e1c699bb /                       xfs     defaults        0 0<br>UUID=39c438a4-ad8d-4c9c-a001-7794dc13131a /boot                   xfs     defaults        0 0<br>UUID=6c74e5a8-ebc9-4329-8454-b838f5833073 /data                   xfs     defaults        0 0<br>UUID=b65aa78c-be4d-4c68-a276-c31aee04579a none                    swap    defaults        0 0<br></code></pre></td></tr></table></figure></li></ul><h5 id="2-2-1-1-4-分组其它"><a href="#2-2-1-1-4-分组其它" class="headerlink" title="2.2.1.1.4. 分组其它"></a>2.2.1.1.4. 分组其它</h5><h6 id="2-2-1-1-4-1-分组"><a href="#2-2-1-1-4-1-分组" class="headerlink" title="2.2.1.1.4.1. 分组"></a>2.2.1.1.4.1. 分组</h6><ul><li><p>说明</p><ul><li>分组：() 将多个字符捆绑在一起，当作一个整体处理，如：(root)+</li><li>后向引用：分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名</li><li>方式为: \1, \2, \3, …</li><li>\1 表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符</li><li>注意: \0 表示正则表达式匹配的所有字符</li></ul></li><li><p>示例</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">\(string1\(string2\)\)<br>\1 ：string1\(string2\)<br>\2 ：string2<br></code></pre></td></tr></table></figure></li><li><p>注意： 后向引用引用前面的分组括号中的模式所匹配字符，而非模式本身</p></li></ul><h6 id="2-2-1-1-4-2-或者"><a href="#2-2-1-1-4-2-或者" class="headerlink" title="2.2.1.1.4.2. 或者"></a>2.2.1.1.4.2. 或者</h6><ul><li><p>或者：|</p></li><li><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">a\|b <span class="hljs-comment">#a或b</span><br>C\|<span class="hljs-built_in">cat</span> <span class="hljs-comment">#C或cat</span><br>\(C\|c\)at <span class="hljs-comment">#Cat或cat</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-2-2-扩展正则表达式元字符"><a href="#2-2-2-扩展正则表达式元字符" class="headerlink" title="2.2.2. 扩展正则表达式元字符"></a>2.2.2. 扩展正则表达式元字符</h3><h4 id="2-2-2-1-字符匹配"><a href="#2-2-2-1-字符匹配" class="headerlink" title="2.2.2.1. 字符匹配"></a>2.2.2.1. 字符匹配</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs http">. 任意单个字符<br>[wang] 指定范围的字符<br>[^wang] 不在指定范围的字符<br>[:alnum:] 字母和数字<br>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z<br>[:lower:] 小写字母,示例:[[:lower:]],相当于[a-z]<br>[:upper:] 大写字母<br>[:blank:] 空白字符（空格和制表符）<br>[:space:] 水平和垂直的空白字符（比[:blank:]包含的范围广）<br>[:cntrl:] 不可打印的控制字符（退格、删除、警铃...）<br>[:digit:] 十进制数字<br>[:xdigit:]十六进制数字<br>[:graph:] 可打印的非空白字符<br>[:print:] 可打印字符<br>[:punct:] 标点符号<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-2-2-2-次数匹配"><a href="#2-2-2-2-次数匹配" class="headerlink" title="2.2.2.2. 次数匹配"></a>2.2.2.2. 次数匹配</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">* 匹配前面字符任意次<br>? 0或1次<br>+ 1次或多次<br>&#123;n&#125; 匹配n次<br>&#123;m,n&#125; 至少m，至多n次<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-2-2-3-位置锚定"><a href="#2-2-2-3-位置锚定" class="headerlink" title="2.2.2.3. 位置锚定"></a>2.2.2.3. 位置锚定</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">^ 行首<br>$ 行尾<br>\&lt;, \b 语首<br>\&gt;, \b 语尾<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-2-2-4-分组其它"><a href="#2-2-2-4-分组其它" class="headerlink" title="2.2.2.4. 分组其它"></a>2.2.2.4. 分组其它</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">() 分组<br>后向引用：\1, \2, ... 注意: \0 表示正则表达式匹配的所有字符<br>| 或者<br>a|b #a或b<br>C|cat #C或cat<br>(C|c)at #Cat或cat<br></code></pre></td></tr></table></figure></li><li><p>案例1：ifconfig查找IP地址</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs sh">[22:36:34 root@localhost data]<span class="hljs-comment">#ifconfig | grep -Ewo &quot;(([1-9]?[0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;([1-9]?[0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])&quot;|head -n1</span><br>192.168.100.30<br><br><br>[23:55:42 root@localhost ~]<span class="hljs-comment">#ifconfig |grep -Eow &quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;</span><br>192.168.100.30<br>255.255.255.0<br>192.168.100.255<br>127.0.0.1<br>255.0.0.0<br>192.168.122.1<br>255.255.255.0<br>192.168.122.255<br><br><br>[23:55:49 root@localhost ~]<span class="hljs-comment">#echo &quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&quot;  &gt; regex.txt</span><br>[23:57:27 root@localhost ~]<span class="hljs-comment">#ifconfig |grep -Eowf regex.txt </span><br>192.168.100.30<br>255.255.255.0<br>192.168.100.255<br>127.0.0.1<br>255.0.0.0<br>192.168.122.1<br>255.255.255.0<br>192.168.122.255<br><br></code></pre></td></tr></table></figure></li><li><p>案例2：查找多个匹配行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">[23:57:44 root@localhost ~]<span class="hljs-comment">#cat /etc/passwd|grep -E &quot;root|zxl|mysql|jira&quot;</span><br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>zxl:x:1000:1000:zxl:/home/zxl:/bin/bash<br>mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false<br>jira:x:1001:1001:Atlassian Jira:/home/jira:/bin/bash<br><br>[00:33:17 root@localhost ~]<span class="hljs-comment">#cat /etc/passwd|grep -e &quot;root&quot; -e &quot;mysql&quot;</span><br>root:x:0:0:root:/root:/bin/bash<br>operator:x:11:0:operator:/root:/sbin/nologin<br>mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false<br><br><span class="hljs-comment">#匹配单词的开始和结束为统一匹配单词</span><br>[00:39:01 root@localhost ~]<span class="hljs-comment">#grep -E &quot;^(.*)\&gt;.*\&lt;\1$&quot; /etc/passwd</span><br><span class="hljs-built_in">sync</span>:x:5:0:<span class="hljs-built_in">sync</span>:/sbin:/bin/sync<br>shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<br>halt:x:7:0:halt:/sbin:/sbin/halt<br><br></code></pre></td></tr></table></figure></li><li><p>案例3：过滤掉文件的注释(包括#号的行)和空行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[00:50:40 root@localhost ~]<span class="hljs-comment">#grep -Ev &#x27;^$|#&#x27; /etc/fstab </span><br>UUID=23a498b0-3783-46e4-b55f-fdb1e1c699bb /                       xfs     defaults        0 0<br>UUID=39c438a4-ad8d-4c9c-a001-7794dc13131a /boot                   xfs     defaults        0 0<br>UUID=6c74e5a8-ebc9-4329-8454-b838f5833073 /data                   xfs     defaults        0 0<br>UUID=b65aa78c-be4d-4c68-a276-c31aee04579a none                    swap    defaults        0 0<br></code></pre></td></tr></table></figure></li><li><p>案例4：算出所有人的年龄总和</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[00:51:46 root@localhost ~]<span class="hljs-comment">#cat p</span><br>xiaoming=20<br>xiaohong=18<br>xiaoqiang=22<br>[00:57:34 root@localhost ~]<span class="hljs-comment">#cat p|grep -Eo &quot;[0-9]+&quot;|paste -s -d&quot;+&quot;|bc</span><br>60<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-3-文件查找工具"><a href="#2-3-文件查找工具" class="headerlink" title="2.3. 文件查找工具"></a>2.3. 文件查找工具</h2><ul><li>说明：在文件系统上查找符合条件的文件</li><li>文件查找<ul><li>非实时查找(数据库查找)：locate</li><li>实时查找：find</li></ul></li></ul><h3 id="2-3-1-locate"><a href="#2-3-1-locate" class="headerlink" title="2.3.1. locate"></a>2.3.1. locate</h3><ul><li><p>说明：</p><ul><li>locate 查询系统上预建的文件索引数据库 /var/lib/mlocate/mlocate.db</li><li>索引的构建是在系统较为空闲时自动进行(周期性任务)，执行updatedb可以更新数据库</li><li>索引构建过程需要遍历整个根文件系统，很消耗资源</li><li>locate和updatedb命令来自于mlocate包</li></ul></li><li><p>工作特点</p><ul><li>查找速度快</li><li>模糊查找</li><li>非实时查找</li><li>搜索的是文件的全路径，不仅仅是文件名</li><li>可能只搜索用户具备读取和执行权限的目录</li></ul></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">locate [OPTION]... [PATTERN]...<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-i 不区分大小写的搜索</span><br><span class="hljs-deletion">-n N 只列举前N个匹配项目</span><br><span class="hljs-deletion">-r 使用基本正则表达式</span><br></code></pre></td></tr></table></figure></li><li><p>案例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:09:23 root@localhost ~]<span class="hljs-comment">#locate -r &quot;passwd$&quot;</span><br>/etc/passwd<br>/etc/pam.d/passwd<br>/etc/security/opasswd<br>/root/passwd<br>/usr/bin/gpasswd<br>/usr/bin/htpasswd<br>/usr/bin/passwd<br>/usr/bin/vncpasswd<br>/usr/sbin/chgpasswd<br>/usr/sbin/chpasswd<br>/usr/sbin/lpasswd<br>/usr/share/bash-completion/completions/chpasswd<br>/usr/share/bash-completion/completions/gpasswd<br>/usr/share/bash-completion/completions/htpasswd<br>/usr/share/bash-completion/completions/ldappasswd<br>/usr/share/bash-completion/completions/passwd<br>/usr/share/bash-completion/completions/smbpasswd<br>/usr/share/doc/passwd<br>/usr/share/licenses/passwd<br>/var/lib/sss/mc/passwd<br><br></code></pre></td></tr></table></figure></li><li><p>案例2：文件新创建和删除,无法马上更新locate数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:11:03 root@localhost ~]<span class="hljs-comment">#touch abc.log</span><br>[01:11:10 root@localhost ~]<span class="hljs-comment">#locate &quot;abc.log&quot;</span><br>[01:11:21 root@localhost ~]<span class="hljs-comment">#updatedb </span><br>[01:11:32 root@localhost ~]<span class="hljs-comment">#locate &quot;abc.log&quot;</span><br>/root/abc.log<br>[01:11:35 root@localhost ~]<span class="hljs-comment">#rm abc.log </span><br><span class="hljs-built_in">rm</span>：是否删除普通空文件 <span class="hljs-string">&#x27;abc.log&#x27;</span>？y<br>[01:12:00 root@localhost ~]<span class="hljs-comment">#locate &quot;abc.log&quot;</span><br>/root/abc.log<br>[01:12:22 root@localhost ~]<span class="hljs-comment">#updatedb </span><br>[01:12:27 root@localhost ~]<span class="hljs-comment">#locate &quot;abc.log&quot;</span><br>[01:12:29 root@localhost ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-3-2-find"><a href="#2-3-2-find" class="headerlink" title="2.3.2. find"></a>2.3.2. find</h3><ul><li><p>说明：find 是实时查找工具，通过遍历指定路径完成文件查找</p></li><li><p>工作特点：</p><ul><li>查找速度略慢</li><li>精确查找</li><li>实时查找</li><li>查找条件丰富</li><li>可能只搜索用户具备读取和执行权限的目录</li></ul></li><li><p>格式：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">find [OPTION]... [查找路径] [查找条件] [处理动作]<br></code></pre></td></tr></table></figure></li><li><p>查找路径：指定具体目标路径；默认为当前目录</p></li><li><p>查找条件：指定的查找标准，可以文件名、大小、类型、权限等标准进行；默认为找出指定路径下的所有文件</p></li><li><p>处理动作：对符合条件的文件做操作，默认输出至屏幕</p></li></ul><h4 id="2-3-2-1-指定搜索目录层级"><a href="#2-3-2-1-指定搜索目录层级" class="headerlink" title="2.3.2.1. 指定搜索目录层级"></a>2.3.2.1. 指定搜索目录层级</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">-maxdepth level 最大搜索目录深度,指定目录下的文件为第1级<br>-mindepth level 最小搜索目录深度<br></code></pre></td></tr></table></figure></li><li><p>案例1：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:16:37 root@localhost ~]<span class="hljs-comment">#find /etc -maxdepth 2 -mindepth 2 |head -n 5</span><br>/etc/dnf/modules.d<br>/etc/dnf/aliases.d<br>/etc/dnf/dnf.conf<br>/etc/dnf/modules.defaults.d<br>/etc/dnf/plugins<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-2-对每个目录先处理目录内的文件，再处理目录本身"><a href="#2-3-2-2-对每个目录先处理目录内的文件，再处理目录本身" class="headerlink" title="2.3.2.2. 对每个目录先处理目录内的文件，再处理目录本身"></a>2.3.2.2. 对每个目录先处理目录内的文件，再处理目录本身</h4><ul><li><p>选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">-depth<br>-d <span class="hljs-comment">#warning: the -d option is deprecated; please use -depth instead, because the</span><br>latter is a POSIX-compliant feature<br></code></pre></td></tr></table></figure></li><li><p>案例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:20:18 root@localhost ~]<span class="hljs-comment">#tree /data/</span><br>/data/<br>├── 1.txt<br>├── 2.txt<br>├── 3.txt<br>├── 4.txt<br>├── 5.txt<br>├── 6.txt<br>├── 7.txt<br>├── 8.txt<br>├── a.txt<br>├── dir1<br>│   └── <span class="hljs-built_in">dir</span><br>├── dir2<br>│   └── <span class="hljs-built_in">dir</span><br>├── dir3<br>│   └── <span class="hljs-built_in">dir</span><br>├── t1.txt<br>└── <span class="hljs-built_in">test</span><br><br>6 directories, 11 files<br>[01:20:22 root@localhost ~]<span class="hljs-comment">#find /data/</span><br>/data/<br>/data/a.txt<br>/data/1.txt<br>/data/2.txt<br>/data/3.txt<br>/data/4.txt<br>/data/5.txt<br>/data/6.txt<br>/data/7.txt<br>/data/8.txt<br>/data/test<br>/data/t1.txt<br>/data/dir1<br>/data/dir1/dir<br>/data/dir2<br>/data/dir2/dir<br>/data/dir3<br>/data/dir3/dir<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-3-根据文件名和inode查找"><a href="#2-3-2-3-根据文件名和inode查找" class="headerlink" title="2.3.2.3. 根据文件名和inode查找"></a>2.3.2.3. 根据文件名和inode查找</h4><ul><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">-name &quot;文件名称&quot; #支持使用glob，如：*, ?, [], [^],通配符要加双引号引起来<br>-iname &quot;文件名称&quot; #不区分字母大小写<br>-inum n #按inode号查找<br>-samefile name #相同inode号的文件<br>-links n #链接数为n的文件<br>-regex “PATTERN&quot; #以PATTERN匹配整个文件路径，而非文件名称<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:24:43 root@localhost ~]<span class="hljs-comment">#find  /data/  -name &quot;*.txt&quot;</span><br>/data/a.txt<br>/data/1.txt<br>/data/2.txt<br>/data/3.txt<br>/data/4.txt<br>/data/5.txt<br>/data/6.txt<br>/data/7.txt<br>/data/8.txt<br>/data/t1.txt<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-4-根据属主、属组查找"><a href="#2-3-2-4-根据属主、属组查找" class="headerlink" title="2.3.2.4. 根据属主、属组查找"></a>2.3.2.4. 根据属主、属组查找</h4><ul><li><p>选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">-user USERNAME <span class="hljs-comment">#查找属主为指定用户(UID)的文件</span><br>-group GRPNAME <span class="hljs-comment">#查找属组为指定组(GID)的文件</span><br>-uid UserID <span class="hljs-comment">#查找属主为指定的UID号的文件</span><br>-gid GroupID <span class="hljs-comment">#查找属组为指定的GID号的文件</span><br>-nouser <span class="hljs-comment">#查找没有属主的文件</span><br>-nogroup <span class="hljs-comment">#查找没有属组的文件</span><br></code></pre></td></tr></table></figure></li><li><p>案例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:27:08 root@localhost ~]<span class="hljs-comment">#find  / -user &quot;zxl&quot; |head -n 3</span><br>find: ‘/proc/20986/task/20986/fd/6’: 没有那个文件或目录<br>find: ‘/proc/20986/task/20986/fdinfo/6’: 没有那个文件或目录<br>find: ‘/proc/20986/fd/7’: 没有那个文件或目录<br>find: ‘/proc/20986/fdinfo/7’: 没有那个文件或目录<br>/var/spool/mail/zxl<br>/home/zxl<br>/home/zxl/.mozilla<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-5-根据文件类型查找"><a href="#2-3-2-5-根据文件类型查找" class="headerlink" title="2.3.2.5. 根据文件类型查找"></a>2.3.2.5. 根据文件类型查找</h4><ul><li><p>选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">-<span class="hljs-built_in">type</span> TYPE<br>TYPE可以是以下形式：<br>f: 普通文件<br>d: 目录文件<br>l: 符号链接文件<br>s：套接字文件<br>b: 块设备文件<br>c: 字符设备文件<br>p: 管道文件<br></code></pre></td></tr></table></figure></li><li><p>案例：查找磁盘文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:29:44 root@localhost ~]<span class="hljs-comment">#find /dev/ -type &quot;b&quot;</span><br>/dev/sr0<br>/dev/sda5<br>/dev/sda4<br>/dev/sda3<br>/dev/sda2<br>/dev/sda1<br>/dev/sda<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-6-空文件或目录"><a href="#2-3-2-6-空文件或目录" class="headerlink" title="2.3.2.6. 空文件或目录"></a>2.3.2.6. 空文件或目录</h4><ul><li><p>选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-empty</span><br></code></pre></td></tr></table></figure></li><li><p>案例：查找空目录</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:30:00 root@localhost ~]<span class="hljs-comment">#find /data/ -type &quot;d&quot; -empty </span><br>/data/dir1/dir<br>/data/dir2/dir<br>/data/dir3/dir<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-7-组合条件"><a href="#2-3-2-7-组合条件" class="headerlink" title="2.3.2.7. 组合条件"></a>2.3.2.7. 组合条件</h4><ul><li><p>选项</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">与：-<span class="hljs-selector-tag">a</span> ，默认多个条件是与关系，所以可以省略-<span class="hljs-selector-tag">a</span><br>或：-o<br>非：-not !<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:31:33 root@localhost ~]<span class="hljs-comment">#find /etc/ -type d -o -type l |wc -l</span><br>705<br>[01:33:20 root@localhost ~]<span class="hljs-comment">#find /etc/ -type d -o -type l -ls |wc -l</span><br>286<br>[01:33:49 root@localhost ~]<span class="hljs-comment">#find /etc/ \( -type d -o -type l \) -ls |wc -l</span><br>705<br></code></pre></td></tr></table></figure></li><li><p>德·摩根定律</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">!A -a !B = !(A -o B)<br>!A -o !B = !(A -a B)<br></code></pre></td></tr></table></figure></li><li><p>案例2</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">find -user joe -group joe<br>find -user joe -not -group joe<br>find -user joe -o -user jane<br>find -not \( -user joe -o -user jane \)<br>find / -user joe -o -uid 500<br></code></pre></td></tr></table></figure></li><li><p>案例3：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sh">  [01:34:12 root@localhost ~]<span class="hljs-comment">#find ! \( -type d -a -empty \)| wc -l</span><br>  1027<br>  [01:36:13 root@localhost ~]<span class="hljs-comment">#find ! -type d -o ! -empty |wc -l</span><br>  1027<br>  <br>  [01:39:35 root@localhost ~]<span class="hljs-comment">#find /home/ ! -user root ! -user zxl ! -user wang1 ! -user wang2 ! -user wang3</span><br>  /home/jira<br>  /home/jira/.mozilla<br>  /home/jira/.mozilla/extensions<br>  /home/jira/.mozilla/plugins<br>  /home/jira/.bash_logout<br>  /home/jira/.bash_profile<br>  /home/jira/.bashrc<br>  /home/jira/.java<br>  /home/jira/.java/fonts<br>  /home/jira/.java/fonts/11.0.13<br>  /home/jira/.java/fonts/11.0.13/fcinfo-1-localhost.localdomain-RedHat-8.5.2111-zh.properties<br>  <br>  <br>  [10:48:35 root@localhost ~]<span class="hljs-comment">#find /home/  ! \( -user root   -o -user zxl -o -user wang1 -o -user wang1 -o -user wang2 -o -user wang3 \)</span><br>/home/jira<br>  /home/jira/.mozilla<br>  /home/jira/.mozilla/extensions<br>  /home/jira/.mozilla/plugins<br>  /home/jira/.bash_logout<br>  /home/jira/.bash_profile<br>  /home/jira/.bashrc<br>  /home/jira/.java<br>  /home/jira/.java/fonts<br>  /home/jira/.java/fonts/11.0.13<br>  /home/jira/.java/fonts/11.0.13/fcinfo-1-localhost.localdomain-RedHat-8.5.2111-zh.properties<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-8-排除目录"><a href="#2-3-2-8-排除目录" class="headerlink" title="2.3.2.8. 排除目录"></a>2.3.2.8. 排除目录</h4><ul><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#查找/data/下，除data/dir1目录的其它所有.txt后缀的文件</span><br>[11:43:21 root@localhost ~]<span class="hljs-comment">#find /data/</span><br>/data/<br>/data/a.txt<br>/data/1.txt<br>/data/2.txt<br>/data/3.txt<br>/data/4.txt<br>/data/5.txt<br>/data/6.txt<br>/data/7.txt<br>/data/8.txt<br>/data/test<br>/data/t1.txt<br>/data/dir1<br>/data/dir1/dir<br>/data/dir1/a.txt<br>/data/dir1/b.txt<br>/data/dir1/c.txt<br>/data/dir1/d.txt<br>/data/dir1/e.txt<br>/data/dir1/f.txt<br>/data/dir1/g.txt<br>/data/dir2<br>/data/dir2/dir<br>/data/dir3<br>/data/dir3/dir<br>[11:43:15 root@localhost ~]<span class="hljs-comment">#find /data -path &quot;/data/dir1&quot; -prune  -o -name &quot;*.txt&quot;</span><br>/data/a.txt<br>/data/1.txt<br>/data/2.txt<br>/data/3.txt<br>/data/4.txt<br>/data/5.txt<br>/data/6.txt<br>/data/7.txt<br>/data/8.txt<br>/data/t1.txt<br>/data/dir1<br><br><span class="hljs-comment">#统计查找/etc/下，除/etc/security和/etc/systemd,/etc/dbus-1三个目录的所有.conf后缀的文件</span><br>[11:50:23 root@localhost ~]<span class="hljs-comment">#find /etc  -name &quot;*.conf&quot;|wc -l</span><br>433<br>[11:49:32 root@localhost ~]<span class="hljs-comment">#find /etc \( -path &quot;/etc/security&quot; -o -path &quot;/etc/systemd&quot; -o -path &quot;/etc/dbus-1&quot; \)  -prune -o -name &quot;*.conf&quot;|wc -l</span><br>386<br>[11:49:41 root@localhost ~]<span class="hljs-comment">#find /etc \( -path &quot;/etc/security&quot; -o -path &quot;/etc/systemd&quot; -o -path &quot;/etc/dbus-1&quot; \) -a  -prune -o -name &quot;*.conf&quot;|wc -l</span><br>386<br><br><br><span class="hljs-comment">#排除/proc和/sys目录</span><br>[11:51:01 root@localhost ~]<span class="hljs-comment">#find / \( -path &quot;/sys&quot; -o -path &quot;/proc&quot; \) -a -prune -o -type f -a -mmin -1</span><br>/proc<br>/sys<br>/var/lib/mysql/ibdata1<br>/var/lib/mysql/mysql/innodb_table_stats.ibd<br>/var/lib/mysql/mysql/innodb_index_stats.ibd<br>/var/lib/mysql/jira/clusteredjob.ibd<br>/var/lib/mysql/jira/rundetails.ibd<br>/var/lib/mysql/jira/SEQUENCE_VALUE_ITEM.ibd<br>/var/lib/mysql/ib_logfile0<br>/var/lib/mysql/ibtmp1<br>/var/atlassian/application-data/jira/log/atlassian-jira-perf.log<br>/var/atlassian/application-data/jira/log/atlassian-jira-outgoing-mail.log<br>/var/atlassian/application-data/jira/log/atlassian-jira.log<br>/var/atlassian/application-data/jira/analytics-logs/68491876c23d7650370b5d3c4b6d778c.atlassian-analytics.log<br>/var/atlassian/application-data/jira/monitor/ConnectionPoolGraph.rrd4j<br>/var/atlassian/application-data/jira/monitor/DatabaseReadWritesGraph.rrd4j<br>/opt/atlassian/jira/temp/2022_08_05_15_38_24_1215/2022_08_08_11_50_00.part<br>/tmp/hsperfdata_jira/1215<br><br></code></pre></td></tr></table></figure></li></ul><h4 id="2-3-2-9-根据文件大小来查找"><a href="#2-3-2-9-根据文件大小来查找" class="headerlink" title="2.3.2.9. 根据文件大小来查找"></a>2.3.2.9. 根据文件大小来查找</h4><h2 id="2-4-xargs动态生成命令参数"><a href="#2-4-xargs动态生成命令参数" class="headerlink" title="2.4. xargs动态生成命令参数"></a>2.4. xargs动态生成命令参数</h2><ul><li><p>说明</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs julia">由于很多命令不支持管道|来传递参数，xargs用于产生某个命令的参数，xargs 可以读入 <span class="hljs-literal">stdin</span> 的数<br>据，并且以空格符或回车符将 <span class="hljs-literal">stdin</span> 的数据分隔成为参数另外，许多命令不能接受过多参数，命令执行可能会失败，xargs 可以解决<br></code></pre></td></tr></table></figure></li><li><p>注意：文件名或者是其他意义的名词内含有空格符的情况</p></li><li><p>find 经常和 xargs 命令进行组合,形式如下：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">find | xargs COMMAND<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#显示10个数字</span><br>[root@centos8 ~]<span class="hljs-comment">#seq 10 | xargs</span><br>1 2 3 4 5 6 7 8 9 10<br><span class="hljs-comment">#删除当前目录下的大量文件</span><br><span class="hljs-built_in">ls</span> | xargs <span class="hljs-built_in">rm</span><br><span class="hljs-comment">#</span><br>find -name <span class="hljs-string">&quot;*.sh&quot;</span> | xargs <span class="hljs-built_in">ls</span> -Sl<br>[root@centos8 data]<span class="hljs-comment">#echo &#123;1..10&#125; |xargs</span><br>1 2 3 4 5 6 7 8 9 10<br>[root@centos8 data]<span class="hljs-comment">#echo &#123;1..10&#125; |xargs -n1</span><br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>[root@centos8 data]<span class="hljs-comment">#echo &#123;1..10&#125; |xargs -n2</span><br>1 2<br>3 4<br>5 6<br>7 8<br>9 10<br><span class="hljs-comment">#批量创建和删除用户</span><br><span class="hljs-built_in">echo</span> user&#123;1..10&#125; |xargs -n1 useradd<br><span class="hljs-built_in">echo</span> user&#123;1..100&#125; | xargs -n1 userdel -r<br><span class="hljs-comment">#这个命令是错误的</span><br>find /sbin/ -perm /700 | <span class="hljs-built_in">ls</span> -l<br><span class="hljs-comment">#查找有特殊权限的文件，并排序</span><br>find /bin/ -perm /7000 | xargs <span class="hljs-built_in">ls</span> -Sl<br><span class="hljs-comment">#此命令和上面有何区别？</span><br>find /bin/ -perm -7000 | xargs <span class="hljs-built_in">ls</span> -Sl<br><span class="hljs-comment">#以字符nul分隔</span><br>find -<span class="hljs-built_in">type</span> f -name <span class="hljs-string">&quot;*.txt&quot;</span> -print0 | xargs -0 <span class="hljs-built_in">rm</span><br><span class="hljs-comment">#并发执行多个进程</span><br><span class="hljs-built_in">seq</span> 100 |xargs -i -P10 wget -P /data http://10.0.0.8/&#123;&#125;.html<br><span class="hljs-comment">#并行下载bilibili视频</span><br>yum install python3-pip -y<br>pip3 install you-get<br><span class="hljs-built_in">seq</span> 60 | xargs -i -P3 you-get https://www.bilibili.com/video/BV14K411W7UF?p=&#123;&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-5-文件压缩和打包"><a href="#2-5-文件压缩和打包" class="headerlink" title="2.5. 文件压缩和打包"></a>2.5. 文件压缩和打包</h2><p>主要针对单个文件压缩,而非目录</p><h3 id="2-5-1-compress-和-uncompress"><a href="#2-5-1-compress-和-uncompress" class="headerlink" title="2.5.1. compress 和 uncompress"></a>2.5.1. compress 和 uncompress</h3><ul><li><p>说明：此工具来自于ncompress包,此工具目前已经很少使用，对应的文件是 .Z 后缀</p></li><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">-d 解压缩，相当于uncompress<br>-c 结果输出至标准输出,不删除原文件<br>-v 显示详情<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5-2-zip和gunzip"><a href="#2-5-2-zip和gunzip" class="headerlink" title="2.5.2. zip和gunzip"></a>2.5.2. zip和gunzip</h3><ul><li><p>说明：来自于 gzip 包，对应的文件是 .gz 后缀</p></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">gzip [OPTION]... FILE ...<br></code></pre></td></tr></table></figure></li><li><p>选项</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>k keep, 保留原文件,CentOS 8 新特性<br><span class="hljs-literal">-</span>d 解压缩，相当于gunzip<br><span class="hljs-literal">-</span>c 结果输出至标准输出，保留原文件不改变<br><span class="hljs-literal">-</span><span class="hljs-comment"># 指定压缩比，#取值为1-9，值越大压缩比越大</span><br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#文件压缩</span><br>[12:22:42 root@localhost data]<span class="hljs-comment">#gzip -c 1.txt &gt; /data/dir1/1.txt.gz</span><br>[12:23:37 root@localhost data]<span class="hljs-comment">#ls /data/dir1/1.txt.gz</span><br>/data/dir1/1.txt.gz<br><span class="hljs-comment">#文件解压</span><br>[12:26:28 root@localhost data]<span class="hljs-comment">#gzip -c -d /data/dir1/1.txt.gz &gt; /data/dir1/1.txt</span><br>[12:26:37 root@localhost data]<span class="hljs-comment">#ls /data/dir1/1.txt</span><br>/data/dir1/1.txt<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5-3-bzip2和bunzip2"><a href="#2-5-3-bzip2和bunzip2" class="headerlink" title="2.5.3. bzip2和bunzip2"></a>2.5.3. bzip2和bunzip2</h3><ul><li><p>说明：来自于 bzip2 包，对应的文件是 .bz2 后缀</p></li><li><p>格式</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">bzip2 [<span class="hljs-keyword">OPTION</span>]... <span class="hljs-keyword">FILE</span> ...<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">-k keep, 保留原文件<br>-d 解压缩<br>-c 结果输出至标准输出，保留原文件不改变<br>-# 1-9，压缩比，默认为9<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#文件压缩</span><br>[12:33:19 root@localhost data]<span class="hljs-comment">#bzip2 -c  3.txt &gt; /data/dir2/2.txt.bz2</span><br>[12:33:36 root@localhost data]<span class="hljs-comment">#ls /data/dir2/2.txt.bz2</span><br>/data/dir2/2.txt.bz2<br><span class="hljs-comment">#文件解压</span><br>[12:33:42 root@localhost data]<span class="hljs-comment">#bzip2 -c -d   /data/dir2/2.txt.bz2 &gt; /data/dir1/2.txt</span><br>[12:35:17 root@localhost data]<span class="hljs-comment">#ls /data/dir1/2.txt</span><br>/data/dir1/2.txt<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5-4-xz-和-unxz"><a href="#2-5-4-xz-和-unxz" class="headerlink" title="2.5.4. xz 和 unxz"></a>2.5.4. xz 和 unxz</h3><ul><li><p>说明：来自于 xz 包,对应的文件是 .xz 后缀</p></li><li><p>格式</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">xz [<span class="hljs-keyword">OPTION</span>]... <span class="hljs-keyword">FILE</span> ...<br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">-k keep, 保留原文件<br>-d 解压缩<br>-c 结果输出至标准输出，保留原文件不改变<br>-# 压缩比，取值1-9，默认为6<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#文件压缩</span><br>[12:41:32 root@localhost data]<span class="hljs-comment">#xz -c 4.txt &gt; /data/dir1/4.txt.xz</span><br>[12:42:17 root@localhost data]<span class="hljs-comment">#ls /data/dir1/4.txt.xz</span><br>/data/dir1/4.txt.xz<br><span class="hljs-comment">#文件解压</span><br>[12:42:24 root@localhost data]<span class="hljs-comment">#xz -c -d /data/dir1/4.txt.xz &gt; /data/dir1/4.txt</span><br>[12:44:28 root@localhost data]<span class="hljs-comment">#ls /data/dir1/4.txt</span><br>/data/dir1/4.txt<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5-5-zip-和-unzip"><a href="#2-5-5-zip-和-unzip" class="headerlink" title="2.5.5. zip 和 unzip"></a>2.5.5. zip 和 unzip</h3><ul><li><p>说明：zip 可以实现打包目录和多个文件成一个文件并压缩，但可能会丢失文件属性信息，如：所有者和组信<br>息，一般建议使用 tar 代替，分别来自于 zip 和 unzip 包对应的文件是 .zip 后缀</p></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs http">-A 调整可执行的自动解压缩文件。<br>-b&lt;工作目录&gt; 指定暂时存放文件的目录。<br>-c 替每个被压缩的文件加上注释。<br>-d 从压缩文件内删除指定的文件。<br>-D 压缩文件内不建立目录名称。<br>-f 更新现有的文件。<br>-F 尝试修复已损坏的压缩文件。<br>-g 将文件压缩后附加在既有的压缩文件之后，而非另行建立新的压缩文件。<br>-h 在线帮助。<br>-i&lt;范本样式&gt; 只压缩符合条件的文件。<br>-j 只保存文件名称及其内容，而不存放任何目录名称。<br>-J 删除压缩文件前面不必要的数据。<br>-k 使用MS-DOS兼容格式的文件名称。<br>-l 压缩文件时，把LF字符置换成LF+CR字符。<br>-ll 压缩文件时，把LF+CR字符置换成LF字符。<br>-L 显示版权信息。<br>-m 将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。<br>-n&lt;字尾字符串&gt; 不压缩具有特定字尾字符串的文件。<br>-o 以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同。<br>-q 不显示指令执行过程。<br>-r 递归处理，将指定目录下的所有文件和子目录一并处理。<br>-S 包含系统和隐藏文件。<br>-t&lt;日期时间&gt; 把压缩文件的日期设成指定的日期。<br>-T 检查备份文件内的每个文件是否正确无误。<br>-u 与 -f 参数类似，但是除了更新现有的文件外，也会将压缩文件中的其他文件解压缩到目录中。<br>-v 显示指令执行过程或显示版本信息。<br>-V 保存VMS操作系统的文件属性。<br>-w 在文件名称里假如版本编号，本参数仅在VMS操作系统下有效。<br>-x&lt;范本样式&gt; 压缩时排除符合条件的文件。<br>-X 不保存额外的文件属性。<br>-y 直接保存符号连接，而非该连接所指向的文件，本参数仅在UNIX之类的系统下有效。<br>-z 替压缩文件加上注释。<br>-$ 保存第一个被压缩文件所在磁盘的卷册名称。<br>-&lt;压缩效率&gt; 压缩效率是一个介于1-9的数值。<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#打包文件并压缩</span><br>[12:51:26 root@localhost data]<span class="hljs-comment">#zip -r /data/etc.zip /etc/</span><br>[12:52:14 root@localhost data]<span class="hljs-comment">#ll /data/etc.zip </span><br>-rw-r--r--. 1 root root 219634037 8月   8 12:50 /data/etc.zip<br><span class="hljs-comment">#文件解压</span><br>[12:56:29 root@localhost data]<span class="hljs-comment">#unzip /data/etc.zip </span><br>[12:57:09 root@localhost data]<span class="hljs-comment">#ll /data/</span><br>总用量 214500<br>drwxr-xr-x. 156 root root      8192 8月   8 10:40 etc<br>-rw-r--r--.   1 root root 219634037 8月   8 12:50 etc.zip<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5-6-打包和解包"><a href="#2-5-6-打包和解包" class="headerlink" title="2.5.6. 打包和解包"></a>2.5.6. 打包和解包</h3><h4 id="2-5-6-1-tar"><a href="#2-5-6-1-tar" class="headerlink" title="2.5.6.1. tar"></a>2.5.6.1. tar</h4><ul><li><p>说明：tar 即 Tape ARchive 磁带归档，可以对目录和多个文件打包一个文件，并且可以压缩，保留文件属性不丢失，常用于备份功能，推荐使用对应的文件是 .tar 后缀</p></li><li><p>格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar [-ABcdgGhiklmMoOpPrRsStuUvwWxzZ][-b &lt;区块数目&gt;][-C &lt;目的目录&gt;][-f &lt;备份文件&gt;][-F &lt;Script文件&gt;][-K &lt;文件&gt;][-L &lt;媒体容量&gt;][-N &lt;日期时间&gt;][-T &lt;范本文件&gt;][-V &lt;卷册名称&gt;][-X &lt;范本文件&gt;][-&lt;设备编号&gt;&lt;存储密度&gt;][--after-date=&lt;日期时间&gt;][--atime-preserve][--backuup=&lt;备份方式&gt;][--checkpoint][--concatenate][--confirmation][--delete][--exclude=&lt;范本样式&gt;][--force-local][--group=&lt;群组名称&gt;][--<span class="hljs-built_in">help</span>][--ignore-failed-read][--new-volume-script=&lt;Script文件&gt;][--newer-mtime][--no-recursion][--null][--numeric-owner][--owner=&lt;用户名称&gt;][--posix][--erve][--preserve-order][--preserve-permissions][--record-size=&lt;区块数目&gt;][--recursive-unlink][--remove-files][--rsh-command=&lt;执行指令&gt;][--same-owner][--suffix=&lt;备份字尾字符串&gt;][--totals][--use-compress-program=&lt;执行指令&gt;][--version][--volno-file=&lt;编号文件&gt;][文件或目录...]<br><br></code></pre></td></tr></table></figure></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs http">-A或--catenate 新增文件到已存在的备份文件。<br>-b&lt;区块数目&gt;或--blocking-factor=&lt;区块数目&gt; 设置每笔记录的区块数目，每个区块大小为12Bytes。<br>-B或--read-full-records 读取数据时重设区块大小。<br>-c或--create 建立新的备份文件。<br>-C&lt;目的目录&gt;或--directory=&lt;目的目录&gt; 切换到指定的目录。<br>-d或--diff或--compare 对比备份文件内和文件系统上的文件的差异。<br>-f&lt;备份文件&gt;或--file=&lt;备份文件&gt; 指定备份文件。<br>-F&lt;Script文件&gt;或--info-script=&lt;Script文件&gt; 每次更换磁带时，就执行指定的Script文件。<br>-g或--listed-incremental 处理GNU格式的大量备份。<br>-G或--incremental 处理旧的GNU格式的大量备份。<br>-h或--dereference 不建立符号连接，直接复制该连接所指向的原始文件。<br>-i或--ignore-zeros 忽略备份文件中的0 Byte区块，也就是EOF。<br>-k或--keep-old-files 解开备份文件时，不覆盖已有的文件。<br>-K&lt;文件&gt;或--starting-file=&lt;文件&gt; 从指定的文件开始还原。<br>-l或--one-file-system 复制的文件或目录存放的文件系统，必须与tar指令执行时所处的文件系统相同，否则不予复制。<br>-L&lt;媒体容量&gt;或-tape-length=&lt;媒体容量&gt; 设置存放每体的容量，单位以1024 Bytes计算。<br>-m或--modification-time 还原文件时，不变更文件的更改时间。<br>-M或--multi-volume 在建立，还原备份文件或列出其中的内容时，采用多卷册模式。<br>-N&lt;日期格式&gt;或--newer=&lt;日期时间&gt; 只将较指定日期更新的文件保存到备份文件里。<br>-o或--old-archive或--portability 将资料写入备份文件时使用V7格式。<br>-O或--stdout 把从备份文件里还原的文件输出到标准输出设备。<br>-p或--same-permissions 用原来的文件权限还原文件。<br>-P或--absolute-names 文件名使用绝对名称，不移除文件名称前的&quot;/&quot;号。<br>-r或--append 新增文件到已存在的备份文件的结尾部分。<br>-R或--block-number 列出每个信息在备份文件中的区块编号。<br>-s或--same-order 还原文件的顺序和备份文件内的存放顺序相同。<br>-S或--sparse 倘若一个文件内含大量的连续0字节，则将此文件存成稀疏文件。<br>-t或--list 列出备份文件的内容。<br>-T&lt;范本文件&gt;或--files-from=&lt;范本文件&gt; 指定范本文件，其内含有一个或多个范本样式，让tar解开或建立符合设置条件的文件。<br>-u或--update 仅置换较备份文件内的文件更新的文件。<br>-U或--unlink-first 解开压缩文件还原文件之前，先解除文件的连接。<br>-v或--verbose 显示指令执行过程。<br>-V&lt;卷册名称&gt;或--label=&lt;卷册名称&gt; 建立使用指定的卷册名称的备份文件。<br>-w或--interactive 遭遇问题时先询问用户。<br>-W或--verify 写入备份文件后，确认文件正确无误。<br>-x或--extract或--get 从备份文件中还原文件。<br>-X&lt;范本文件&gt;或--exclude-from=&lt;范本文件&gt; 指定范本文件，其内含有一个或多个范本样式，让ar排除符合设置条件的文件。<br>-z或--gzip或--ungzip 通过gzip指令处理备份文件。<br>-Z或--compress或--uncompress 通过compress指令处理备份文件。<br>-&lt;设备编号&gt;&lt;存储密度&gt; 设置备份用的外围设备编号及存放数据的密度。<br>--after-date=&lt;日期时间&gt; 此参数的效果和指定&quot;-N&quot;参数相同。<br>--atime-preserve 不变更文件的存取时间。<br>--backup=&lt;备份方式&gt;或--backup 移除文件前先进行备份。<br>--checkpoint 读取备份文件时列出目录名称。<br>--concatenate 此参数的效果和指定&quot;-A&quot;参数相同。<br>--confirmation 此参数的效果和指定&quot;-w&quot;参数相同。<br>--delete 从备份文件中删除指定的文件。<br>--exclude=&lt;范本样式&gt; 排除符合范本样式的文件。<br>--group=&lt;群组名称&gt; 把加入设备文件中的文件的所属群组设成指定的群组。<br>--help 在线帮助。<br>--ignore-failed-read 忽略数据读取错误，不中断程序的执行。<br>--new-volume-script=&lt;Script文件&gt; 此参数的效果和指定&quot;-F&quot;参数相同。<br>--newer-mtime 只保存更改过的文件。<br>--no-recursion 不做递归处理，也就是指定目录下的所有文件及子目录不予处理。<br>--null 从null设备读取文件名称。<br>--numeric-owner 以用户识别码及群组识别码取代用户名称和群组名称。<br>--owner=&lt;用户名称&gt; 把加入备份文件中的文件的拥有者设成指定的用户。<br>--posix 将数据写入备份文件时使用POSIX格式。<br>--preserve 此参数的效果和指定&quot;-ps&quot;参数相同。<br>--preserve-order 此参数的效果和指定&quot;-A&quot;参数相同。<br>--preserve-permissions 此参数的效果和指定&quot;-p&quot;参数相同。<br>--record-size=&lt;区块数目&gt; 此参数的效果和指定&quot;-b&quot;参数相同。<br>--recursive-unlink 解开压缩文件还原目录之前，先解除整个目录下所有文件的连接。<br>--remove-files 文件加入备份文件后，就将其删除。<br>--rsh-command=&lt;执行指令&gt; 设置要在远端主机上执行的指令，以取代rsh指令。<br>--same-owner 尝试以相同的文件拥有者还原文件。<br>--suffix=&lt;备份字尾字符串&gt; 移除文件前先行备份。<br>--totals 备份文件建立后，列出文件大小。<br>--use-compress-program=&lt;执行指令&gt; 通过指定的指令处理备份文件。<br>--version 显示版本信息。<br>--volno-file=&lt;编号文件&gt; 使用指定文件内的编号取代预设的卷册编号。<br></code></pre></td></tr></table></figure></li><li><p>创建归档，保留权限</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar -cpvf <span class="hljs-regexp">/PATH/</span><span class="hljs-keyword">FILE</span>.tar <span class="hljs-keyword">FILE</span>...<br></code></pre></td></tr></table></figure></li><li><p> 追加文件至归档： 注：不支持对压缩文件追加</p></li></ul>  <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar -rf <span class="hljs-regexp">/PATH/</span><span class="hljs-keyword">FILE</span>.tar <span class="hljs-keyword">FILE</span>...<br></code></pre></td></tr></table></figure><ul><li> 查看归档文件中的文件列表</li></ul>  <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar -t -f <span class="hljs-regexp">/PATH/</span><span class="hljs-keyword">FILE</span>.tar<br></code></pre></td></tr></table></figure><ul><li><p>(4) 展开归档</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar xf <span class="hljs-regexp">/PATH/</span><span class="hljs-keyword">FILE</span>.tar<br>tar xf <span class="hljs-regexp">/PATH/</span><span class="hljs-keyword">FILE</span>.tar -C <span class="hljs-regexp">/PATH/</span><br></code></pre></td></tr></table></figure></li><li><p>(5) 结合压缩工具实现：归档并压缩</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-z 相当于gzip压缩工具</span><br><span class="hljs-deletion">-j 相当于bzip2压缩工具</span><br><span class="hljs-deletion">-J 相当于xz压缩工具</span><br></code></pre></td></tr></table></figure></li><li><p>案例1: 文件打包并压缩</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:05:01 root@localhost data]<span class="hljs-comment">#tar zcvf etc.tar.gz /etc/</span><br>[13:05:28 root@localhost data]<span class="hljs-comment">#ll /data/etc.tar.gz </span><br>-rw-r--r--. 1 root root 6568976 8月   8 13:04 /data/etc.tar.gz<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:07:35 root@localhost data]<span class="hljs-comment">#tar jcvf etc.tar.bz2 /etc/</span><br>[13:08:01 root@localhost data]<span class="hljs-comment">#ll etc.tar.bz2 </span><br>-rw-r--r--. 1 root root 4821812 8月   8 13:08 etc.tar.bz2<br><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:08:20 root@localhost data]<span class="hljs-comment">#tar Jcvf etc.tar.xz /etc/</span><br>[13:13:52 root@localhost data]<span class="hljs-comment">#ll /data/etc.tar.bz2 </span><br>-rw-r--r--. 1 root root 4821812 8月   8 13:08 /data/etc.tar.bz2<br></code></pre></td></tr></table></figure></li><li><p>案例2：解压</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">[13:23:53 root@localhost data]<span class="hljs-comment">#tar xf etc.tar.gz -C ./</span><br>[13:24:24 root@localhost data]<span class="hljs-comment">#ls</span><br>etc  etc.tar.bz2  etc.tar.gz  etc.tar.xz  etc.zip<br>[13:24:28 root@localhost data]<span class="hljs-comment">#ll</span><br>总用量 229620<br>drwxr-xr-x. 148 root root      8192 8月   8 10:40 etc<br>-rw-r--r--.   1 root root   4821812 8月   8 13:08 etc.tar.bz2<br>-rw-r--r--.   1 root root   6568976 8月   8 13:04 etc.tar.gz<br>-rw-r--r--.   1 root root   4086148 8月   8 13:09 etc.tar.xz<br>-rw-r--r--.   1 root root 219634037 8月   8 12:50 etc.zip<br><br></code></pre></td></tr></table></figure></li><li><p>案例3：只打包目录内的文件，不所括目录本身</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#方法1</span><br>[root@centos8 ~]<span class="hljs-comment">#cd /etc</span><br>[root@centos8 etc]<span class="hljs-comment">#tar zcvf /root/etc.tar.gz ./</span><br><span class="hljs-comment">#方法2</span><br>[root@centos8 ~]<span class="hljs-comment">#tar -C /etc -zcf etc.tar.gz ./</span><br></code></pre></td></tr></table></figure></li><li><p>案例4：排除打包目录的文件并压缩</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar zcvf /root/a.tgz --exclude=/app/host1 --exclude=/app/host2 /app<br></code></pre></td></tr></table></figure></li><li><p>案例5：</p><ul><li>-T 选项指定输入文件</li><li>-X 选项指定包含要排除的文件列表</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar zcvf mybackup.tgz -T /root/includefilelist -X /root/excludefilelist<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-5-6-2-split"><a href="#2-5-6-2-split" class="headerlink" title="2.5.6.2. split"></a>2.5.6.2. split</h4><ul><li><p>说明：split 命令可以分割一个文件为多个文件</p></li><li><p>案例</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">#分割大的 tar 文件为多份小文件<br>split -b Size –d tar-file-name prefix-name<br>示例:<br>split -b 1M mybackup.tgz mybackup-parts<br>#切换成的多个小分文件使用数字后缀<br>split -b 1M –d mybackup.tgz mybackup-parts<br></code></pre></td></tr></table></figure></li><li><p>将多个切割的小文件合并成一个大文件</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">cat</span> my<span class="hljs-built_in">backup-parts</span>* &gt; mybackup.tar.gz<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-6-文本处理三剑客之sed"><a href="#2-6-文本处理三剑客之sed" class="headerlink" title="2.6. 文本处理三剑客之sed"></a>2.6. 文本处理三剑客之sed</h2><p><img src="image-20220808133324301.png" alt="image-20220808133324301"></p><ul><li><p>说明：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Sed</span>是从文件或管道中读取一行，处理一行，输出一行；再读取一行，再处理一行，再输出一行，直到<br>最后一行。每当处理一行时，把当前处理的行存储在临时缓冲区中，称为模式空间（<span class="hljs-built_in">Pattern</span><br><span class="hljs-built_in">Space</span>），接着用<span class="hljs-variable">sed</span>命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下<br>一行，这样不断重复，直到文件末尾。一次处理一行的设计模式使得<span class="hljs-variable">sed</span>性能很高，<span class="hljs-variable">sed</span>在读取大文件时<br>不会出现卡顿的现象。如果使用<span class="hljs-variable">vi</span>命令打开几十<span class="hljs-variable">M</span>上百<span class="hljs-variable">M</span>的文件，明显会出现有卡顿的现象，这是因为<br><span class="hljs-variable">vi</span>命令打开文件是一次性将文件加载到内存，然后再打开。<span class="hljs-variable">Sed</span>就避免了这种情况，一行一行的处理，<br>打开速度非常快，执行速度也很快<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-6-1-sed-基本用法"><a href="#2-6-1-sed-基本用法" class="headerlink" title="2.6.1. sed 基本用法"></a>2.6.1. sed 基本用法</h3><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">sed [option]... &#x27;script;script;...&#x27; [inputfile...]<br></code></pre></td></tr></table></figure></li><li><p>常用选项：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">-n 不输出模式空间内容到屏幕，即不自动打印<br>-e 多点编辑<br>-f FILE 从指定文件中读取编辑脚本<br>-r, -E 使用扩展正则表达式<br>-i.bak 备份文件并原处编辑<br>-s 将多个文件视为独立文件，而不是单个连续的长文件流<br><span class="hljs-comment">#说明:</span><br>-ir 不支持<br>-i -r 支持<br>-ri 支持<br>-ni 危险选项,会清空文件<br></code></pre></td></tr></table></figure></li><li><p>script 格式：</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scheme"><span class="hljs-symbol">&#x27;地址命令</span>&#x27;<br></code></pre></td></tr></table></figure></li><li><p>地址格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">1. 不给地址：对全文进行处理<br>2. 单地址：<br><span class="hljs-comment">#：指定的行，$：最后一行</span><br>/pattern/：被此处模式所能够匹配到的每一行<br>3. 地址范围：<br><span class="hljs-comment">#,# #从#行到第#行，3，6 从第3行到第6行</span><br><span class="hljs-comment">#,+# #从#行到+#行，3,+4 表示从3行到第7行</span><br>/pat1/,/pat2/<br><span class="hljs-comment">#,/pat/</span><br>/pat/,<span class="hljs-comment">#</span><br>4. 步进：~<br>1~2 奇数行<br>2~2 偶数行<br></code></pre></td></tr></table></figure></li><li><p>命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">p 打印当前模式空间内容，追加到默认输出之后<br>Ip 忽略大小写输出<br>d 删除模式空间匹配的行，并立即启用下一轮循环<br>a [\]text 在指定行后面追加文本，支持使用\n实现多行追加<br>i [\]text 在行前面插入文本<br>c [\]text 替换行为单行或多行文本<br>w file 保存模式匹配的行至指定文件<br>r file 读取指定文件的文本至模式空间中匹配到的行后<br>= 为模式空间中的行打印行号<br>! 模式空间中匹配行取反处理<br>q 结束或退出sed<br></code></pre></td></tr></table></figure></li><li><p>查找替代</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">s<span class="hljs-regexp">/pattern/</span>string/修饰符 查找替换,支持使用其它分隔符，可以是其它形式：s@@@，s<span class="hljs-comment">###</span><br>替换修饰符：<br>g 行内全局替换<br>p 显示替换成功的行<br>w <span class="hljs-regexp">/PATH/</span>FILE 将替换成功的行保存至文件中<br>I,i 忽略大小写<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-7-文本处理三剑客之sed高有用法"><a href="#2-7-文本处理三剑客之sed高有用法" class="headerlink" title="2.7. 文本处理三剑客之sed高有用法"></a>2.7. 文本处理三剑客之sed高有用法</h2><h1 id="3-shell编程基础"><a href="#3-shell编程基础" class="headerlink" title="3. shell编程基础"></a>3. shell编程基础</h1><h2 id="3-1-shell编程基础"><a href="#3-1-shell编程基础" class="headerlink" title="3.1. shell编程基础"></a>3.1. shell编程基础</h2><h3 id="3-1-1-shell脚本编程"><a href="#3-1-1-shell脚本编程" class="headerlink" title="3.1.1. shell脚本编程"></a>3.1.1. shell脚本编程</h3><p>​    是基于过程式、解释执行的语言</p><h3 id="3-1-2-编程语言的基本结构"><a href="#3-1-2-编程语言的基本结构" class="headerlink" title="3.1.2. 编程语言的基本结构"></a>3.1.2. 编程语言的基本结构</h3><ul><li><p>各种系统命令的组合</p></li><li><p>数据存储：变量、数组</p></li><li><p>表达式：a + b</p></li><li><p>控制语句：if</p></li><li><p>shell脚本：包含一些命令或声明，并符合一定格式的文本文件</p></li><li><p>格式要求：首行shebang机制</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">#!/bin/bash<br>#!/usr/bin/python<br>#!/usr/bin/perl<br>#!/usr/bin/ruby<br>#!/usr/bin/lua<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-1-3-shell脚本的创建"><a href="#3-1-3-shell脚本的创建" class="headerlink" title="3.1.3. shell脚本的创建"></a>3.1.3. shell脚本的创建</h3><ul><li><p>第一步：使用文本编辑器来创建文本文件，第一行必须包括shell声明序列：注释开头#!</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">#!/bin/bash<br></code></pre></td></tr></table></figure></li><li><p>第二步：加执行权限，给予执行权限，在命令行上指定脚本的绝对或相对路径</p></li><li><p>第三步：运行脚本，直接运行解释器，将脚本作为解释器程序的参数运行</p></li></ul><h3 id="3-1-4-shell脚本注释规范"><a href="#3-1-4-shell脚本注释规范" class="headerlink" title="3.1.4. shell脚本注释规范"></a>3.1.4. shell脚本注释规范</h3><ol><li>第一行一般为调用使用的语言</li><li>程序名称，避免更改文件名为无法找到正确的文件</li><li>版本号</li><li>更改后的时间</li><li>作者相关信息</li><li>该程序的作用，及注意事项</li><li>最后是各版本的更新简要说明</li></ol><h3 id="3-1-5-第一个shell脚本"><a href="#3-1-5-第一个shell脚本" class="headerlink" title="3.1.5. 第一个shell脚本"></a>3.1.5. 第一个shell脚本</h3><ul><li><p>第一步：使用文本编辑器来创建文本文件，第一行必须包括shell声明序列：注释开头#!</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">#!/bin/bash<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-1-6-shell脚本注释规范"><a href="#3-1-6-shell脚本注释规范" class="headerlink" title="3.1.6. shell脚本注释规范"></a>3.1.6. shell脚本注释规范</h3><ol><li>第一行一般为调用使用的语言</li><li>程序名称，避免更改文件名为无法找到正确的文件</li><li>版本号</li><li>更改后的时间</li><li>作者相关信息</li><li>该程序的作用，及注意事项</li><li>最后是各版本的更新简要说明</li></ol><h3 id="3-1-7-第一个shell脚本"><a href="#3-1-7-第一个shell脚本" class="headerlink" title="3.1.7. 第一个shell脚本"></a>3.1.7. 第一个shell脚本</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:34:44 root@localhost ~]<span class="hljs-comment">#vim  hello.sh</span><br><br>  1 <span class="hljs-comment">#!/bin/bash</span><br>  2 <span class="hljs-comment">#Author:张雪龙</span><br>  3 <span class="hljs-comment">#2022-08-06 01:37:12</span><br>  4 <span class="hljs-comment"># mail: 1024320609@qq.com</span><br>  5 <span class="hljs-comment">#############################</span><br>  6 <br>  7 <span class="hljs-comment">#经典写法</span><br>  8 <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello, world&quot;</span><br>  9 <span class="hljs-comment">#流行写法</span><br> 10 <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Hello, world!&#x27;</span><br><br></code></pre></td></tr></table></figure><h3 id="3-1-8-shell执行方法种类"><a href="#3-1-8-shell执行方法种类" class="headerlink" title="3.1.8. shell执行方法种类"></a>3.1.8. shell执行方法种类</h3><ol><li><p>bash + 脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:43:24 root@localhost ~]<span class="hljs-comment">#bash hello.sh </span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>cat + 脚本文件名 |bash</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:47:26 root@localhost ~]<span class="hljs-comment">#cat hello.sh |bash</span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>bash &lt;  脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:47:51 root@localhost ~]<span class="hljs-comment">#bash &lt; hello.sh </span><br>hello, world<br>Hello, world!<br></code></pre></td></tr></table></figure></li><li><p>chmod +x 脚本文件 ——》./脚本文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:48:20 root@localhost ~]<span class="hljs-comment">#ll hello.sh </span><br>-rw-r--r--. 1 root root 177 8月   6 01:39 hello.sh<br>[01:48:53 root@localhost ~]<span class="hljs-comment">#chmod +x hello.sh </span><br>[01:49:19 root@localhost ~]<span class="hljs-comment">#./hello.sh </span><br>hello, world<br></code></pre></td></tr></table></figure></li></ol><h2 id="3-2-shell编程使用变量"><a href="#3-2-shell编程使用变量" class="headerlink" title="3.2. shell编程使用变量"></a>3.2. shell编程使用变量</h2><h3 id="3-2-1-变量"><a href="#3-2-1-变量" class="headerlink" title="3.2.1. 变量"></a>3.2.1. 变量</h3><p>表示命名的内存空间，将数据放在内存空间中，通过变量名引用，获取数据。</p><h3 id="3-2-2-变量类型："><a href="#3-2-2-变量类型：" class="headerlink" title="3.2.2. 变量类型："></a>3.2.2. 变量类型：</h3><ul><li><p>内置变量，如：PS1，PATH，UID，HOSTNAME，$$，BASHPID，PPID，$?，HISTSIZE</p></li><li><p>用户自定义变量</p></li><li><p>不同的变量存放的数据不同，决定了以下</p><ul><li>数据存储方式</li><li>参与的运算</li><li>表示的数据范围</li></ul></li><li><p>变量数据类型：</p><ul><li>字符</li><li>数值：整型、浮点型, bash 不支持浮点数</li></ul></li></ul><h3 id="3-2-3-Shell中变量命名法则"><a href="#3-2-3-Shell中变量命名法则" class="headerlink" title="3.2.3. Shell中变量命名法则"></a>3.2.3. Shell中变量命名法则</h3><ul><li>命名要求<ul><li>区分大小写</li><li>不能使程序中的保留字和内置变量：如：if, for</li><li>只能使用数字、字母及下划线，且不能以数字开头，注意：不支持短横线 “ - ”，和主机名相反</li></ul></li></ul><h3 id="3-2-4-命名习惯"><a href="#3-2-4-命名习惯" class="headerlink" title="3.2.4. 命名习惯"></a>3.2.4. 命名习惯</h3><ul><li>见名知义，用英文单词命名，并体现出实际作用，不要用简写，如：ATM</li><li>变量名大写</li><li>局部变量小写</li><li>函数名小写</li><li>大驼峰StudentFirstName,由多个单词组成，且每个单词的首字母是大写，其它小写</li><li>小驼峰studentFirstName ,由多个单词组成，第一个单词的首字母小写，后续每个单词的首字母是大写，其它小写</li><li>下划线: student_name</li></ul><h3 id="3-2-5-变量定义和引用"><a href="#3-2-5-变量定义和引用" class="headerlink" title="3.2.5. 变量定义和引用"></a>3.2.5. 变量定义和引用</h3><h3 id="变量的生效范围等标准划分变量类型"><a href="#变量的生效范围等标准划分变量类型" class="headerlink" title="变量的生效范围等标准划分变量类型"></a>变量的生效范围等标准划分变量类型</h3><ul><li>普通变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，包括当前shell的子shell进程均无效</li><li>环境变量：生效范围为当前shell进程及其子进程</li><li>本地变量：生效范围为当前shell进程中某代码片断，通常指函数</li></ul><h3 id="3-2-6-变量赋值"><a href="#3-2-6-变量赋值" class="headerlink" title="3.2.6. 变量赋值"></a>3.2.6. 变量赋值</h3><ul><li><p>```HTTP<br>name=’value’</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>- value 可以是以下多种形式<br><br>  ```HTTP<br>  直接字串：<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;root&#x27;</span><br>  变量引用：<span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$USER</span>&quot;</span><br>  命令引用：<span class="hljs-attribute">name</span>=`COMMAND` 或者 <span class="hljs-attribute">name</span>=$(COMMAND)<br></code></pre></td></tr></table></figure></li><li><p>注意:变量赋值是临时生效，当退出终端后，变量会自动删除，无法持久保存，脚本中的变量会随着脚本结束，也会自动删除</p></li><li><p>变量引用</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs HTTP">$name<br>$&#123;name&#125;<br></code></pre></td></tr></table></figure><ul><li><p>弱引用和强引用</p><ul><li>“$name” 弱引用，其中的变量引用会被替换为变量值</li><li>‘$name’ 强引用，其中的变量引用不会被替换为变量值，而保持原字符串</li></ul></li><li><p>范例：变量的各种赋值方式和引用</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:54:02 root@localhost data]<span class="hljs-comment">#name=&#x27;zhang&#x27;</span><br>[03:22:57 root@localhost data]<span class="hljs-comment">#echo $name</span><br>zhang<br><br>[03:23:03 root@localhost data]<span class="hljs-comment">#echo I am $name</span><br>I am zhang<br><br>[03:23:25 root@localhost data]<span class="hljs-comment">#echo &quot;I am $name&quot;</span><br>I am zhang<br><br>[03:23:42 root@localhost data]<span class="hljs-comment">#echo &#x27;I am $name&#x27;</span><br>I am <span class="hljs-variable">$name</span><br><br>[03:23:50 root@localhost data]<span class="hljs-comment">#echo $USER</span><br>root<br>[03:25:40 root@localhost data]<span class="hljs-comment">#name=$USER</span><br>[03:26:08 root@localhost data]<span class="hljs-comment">#echo $name</span><br>root<br><br>[03:27:11 root@localhost data]<span class="hljs-comment">#USER=`whoami`</span><br>[03:27:37 root@localhost data]<span class="hljs-comment">#echo $USER</span><br>root<br><br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="3-3-shell各种位置变量和状态变量"><a href="#3-3-shell各种位置变量和状态变量" class="headerlink" title="3.3. shell各种位置变量和状态变量"></a>3.3. shell各种位置变量和状态变量</h2><h3 id="3-3-1-位置变量"><a href="#3-3-1-位置变量" class="headerlink" title="3.3.1. 位置变量"></a>3.3.1. 位置变量</h3><ul><li><p>位置变量：在bash shell中内置的变量, 在脚本代码中调用通过命令行传递给脚本的参数</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-meta"><span class="hljs-keyword">$1</span>, $2, ... 对应第1个、第2个等参数，shift [n]换位置</span><br><span class="hljs-meta"><span class="hljs-keyword">$0</span> 命令本身,包括路径</span><br><span class="hljs-symbol">$</span>* 传递给脚本的所有参数，全部参数合为一个字符串<br><span class="hljs-symbol">$</span>@ 传递给脚本的所有参数，每个参数为独立字符串<br><span class="hljs-symbol">$</span># 传递给脚本的参数的个数<br>注意：<span class="hljs-symbol">$</span>@ <span class="hljs-symbol">$</span>* 只在被双引号包起来的时候才会有差异<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:48:53 root@localhost ~]<span class="hljs-comment">#bash /root/postion.sh 1 2 3 4 5 6 7 8 9 10 11 12</span><br>0st arg is /root/postion.sh<br>1st arg is 1<br>2st arg is 2<br>3st arg is 3<br>10st arg is 10<br>11st arg is 11<br>The number of arg is 12<br>All args are 1 2 3 4 5 6 7 8 9 10 11 12<br>All args are 1 2 3 4 5 6 7 8 9 10 11 12<br>The scriptname is postion.sh<br>[01:49:07 root@localhost ~]<span class="hljs-comment">#cat postion.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># **********************************************************</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># * Author        : 张雪龙</span><br><span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br><span class="hljs-comment"># * Create time   : 2022-08-07 01:43</span><br><span class="hljs-comment"># * Filename      : postion.sh</span><br><span class="hljs-comment"># * Description   : </span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># **********************************************************</span><br><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;0st arg is <span class="hljs-variable">$0</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;1st arg is <span class="hljs-variable">$1</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;2st arg is <span class="hljs-variable">$2</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;3st arg is <span class="hljs-variable">$3</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;10st arg is <span class="hljs-variable">$&#123;10&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;11st arg is <span class="hljs-variable">$&#123;11&#125;</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The number of arg is <span class="hljs-variable">$#</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;All args are $*&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;All args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;The scriptname is `basename <span class="hljs-variable">$0</span>`&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>$*和$@的区别</p><ul><li><p>当$*和$@没有被引用的时候，它们确实没有什么区别，都会把位置参数当成一个个体。(我们最好不要使用，因为如果位置参数中带有空格或者通配符的情况下，可能结果会和我们想要的不一样)</p></li><li><p>“$<em>“   会把所有位置参数当成一个整体（或者说当成一个单词），如果没有位置参数，则”$</em>“为空，如果有两个位置参数并且IFS为空格时，”$*”相当于”$1 $2”</p></li><li><p>“$@” 会把所有位置参数当成一个单独的字段，如果没有位置参数（$#为0），则”$@”展开为空（不是空字符串，而是空列表），如果存在一个位置参数，则”$@”相当于”$1”，如果有两个参数，则”$@”相当于”$1” “$2”等等</p></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 scripts]<span class="hljs-comment">#cat f1.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f1.sh:all args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f1.sh:all args are $*&quot;</span><br>./file.sh <span class="hljs-string">&quot;$*&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#cat f2.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f2.sh:all args are <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;f2.sh:all args are $*&quot;</span><br>./file.sh <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#cat file.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;file.sh:1st arg is <span class="hljs-variable">$1</span>&quot;</span><br>[root@centos8 scripts]<span class="hljs-comment">#./f1.sh a b c</span><br>f1.sh:all args are a b c<br>f1.sh:all args are a b c<br>file.sh:1st arg is a b c<br>[root@centos8 scripts]<span class="hljs-comment">#./f2.sh a b c</span><br>f2.sh:all args are a b c<br>f2.sh:all args are a b c<br>file.sh:1st arg is a<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="3-3-2-退出状态码变量"><a href="#3-3-2-退出状态码变量" class="headerlink" title="3.3.2. 退出状态码变量"></a>3.3.2. 退出状态码变量</h3><ul><li><p><strong>$?</strong>  变量  保存状态码的相关数字，不同的值反应成功或失败，$?取值范例 0-255</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">$?的值为0 #代表成功<br>$?的值是1到255 #代表失败<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[02:04:25 root@localhost ~]<span class="hljs-comment">#ping 114.114.114.114 -c1 &gt;/dev/null </span><br>[02:05:16 root@localhost ~]<span class="hljs-comment">#echo $?</span><br>0<br></code></pre></td></tr></table></figure></li><li><p>用户可以在脚本中使用以下命令自定义退出状态码</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">exit [n]<br></code></pre></td></tr></table></figure><ul><li>注意：<ul><li>脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字</li><li>如果exit后面无数字,终止退出状态取决于exit命令前面命令执行结果</li><li>如果没有exit命令, 即未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后<br>一条命令的状态码</li></ul></li></ul></li></ul><h2 id="3-4-shell编程算术和逻辑运算"><a href="#3-4-shell编程算术和逻辑运算" class="headerlink" title="3.4. shell编程算术和逻辑运算"></a>3.4. shell编程算术和逻辑运算</h2><h3 id="3-4-1-算数运算"><a href="#3-4-1-算数运算" class="headerlink" title="3.4.1. 算数运算"></a>3.4.1. 算数运算</h3><ul><li><p>说明</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">Shell</span><span class="language-bash">允许在某些情况下对算术表达式进行求值，比如：<span class="hljs-built_in">let</span>和<span class="hljs-built_in">declare</span> 内置命令，(( ))复合命令和算术扩展。求值以固定宽度的整数进行，不检查溢出，尽管除以0 被困并标记为错误。运算符及其优先级，关联性和值与C语言相同。以下运算符列表分组为等优先级运算符级别。级别按降序排列优先</span><br></code></pre></td></tr></table></figure><ul><li>注意：bash 只支持整数，不支持小数</li></ul></li><li><p>选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">+ - addition, subtraction<br>* / % multiplication, division, remainder, %表示取模，即取余数，示例：9%4=1，5%3=2<br>i++ i-- variable post-increment and post-decrement<br>++i --i variable pre-increment and pre-decrement<br>= *= /= %= += -= &lt;&lt;= &gt;&gt;= &amp;= ^= |= assignment<br>- + unary minus and plus<br>! ~ logical and bitwise negation<br>** exponentiation 乘方,即指数运算<br>&lt;&lt; &gt;&gt; left and right bitwise shifts<br>&lt;= &gt;= &lt; &gt; comparison<br>== != equality and inequality<br>&amp; bitwise AND<br>| bitwise OR<br>^ bitwise exclusive OR<br>&amp;&amp; logical AND<br>|| logical OR<br><span class="hljs-built_in">expr</span>?<span class="hljs-built_in">expr</span>:<span class="hljs-built_in">expr</span> conditional operator<br>expr1 , expr2 comma<br></code></pre></td></tr></table></figure><p>乘法符号有些场景中需要转</p></li><li><p>算术运算：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs http">(1) let var=算术表达式<br>(2) ((var=算术表达式)) 和上面等价<br>(3) var=$[算术表达式]<br>(4) var=$((算术表达式))<br>(5) var=$(expr arg1 arg2 arg3 ...)<br>(6) declare -i var = 数值<br>(7) echo &#x27;算术表达式&#x27; | bc<br></code></pre></td></tr></table></figure></li><li><p>内建的随机数生成器变量</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">$RANDOM 取值范围：0-32767<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#生成 0 - 49 之间随机数</span><br><span class="hljs-built_in">echo</span> $[<span class="hljs-variable">$RANDOM</span>%50]<br><span class="hljs-comment">#随机字体颜色</span><br>[root@centos8 ~]<span class="hljs-comment">#echo -e &quot;\033[1;$[RANDOM%7+31]mhello\033[0m&quot;</span><br>magedu<br></code></pre></td></tr></table></figure></li><li><p>增强型赋值</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs http">+= i+=10 相当于 i=i+10<br>-= i-=j 相当于 i=i-j<br>*=<br>/=<br>%=<br>++ i++,++i 相当于 i=i+1<br>-- i--,--i 相当于 i=i-1<br></code></pre></td></tr></table></figure></li><li><p>格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#let i=10*2</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $i</span><br>20<br>[root@centos8 ~]<span class="hljs-comment">#((j=i+10))</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $j</span><br>30<br></code></pre></td></tr></table></figure></li><li><p>案例2</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#自加3后自赋值</span><br><span class="hljs-built_in">let</span> count+=3<br>[root@centos8 ~]<span class="hljs-comment">#i=10</span><br>[root@centos8 ~]<span class="hljs-comment">#let i+=20 #相当于let i=i+20</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $i</span><br>30<br>[root@centos8 ~]<span class="hljs-comment">#j=20</span><br>[root@centos8 ~]<span class="hljs-comment">#let i*=j</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $i</span><br>600<br></code></pre></td></tr></table></figure></li><li><p>案例3</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#自增，自减</span><br><span class="hljs-built_in">let</span> var+=1<br><span class="hljs-built_in">let</span> var++<br><span class="hljs-built_in">let</span> var-=1<br><span class="hljs-built_in">let</span> var--<br>[root@centos8 ~]<span class="hljs-comment">#unset i j ; i=1; let j=i++; echo &quot;i=$i,j=$j&quot;</span><br>i=2,j=1<br>[root@centos8 ~]<span class="hljs-comment">#unset i j ; i=1; let j=++i; echo &quot;i=$i,j=$j&quot;</span><br>i=2,j=2<br></code></pre></td></tr></table></figure></li><li><p>案例4</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#expr 2 * 3</span><br><span class="hljs-built_in">expr</span>: syntax error: unexpected argument ‘anaconda-ks.cfg’<br>[root@centos8 ~]<span class="hljs-comment">#ls</span><br>anaconda-ks.cfg<br>[root@centos8 ~]<span class="hljs-comment">#expr 2 \* 3</span><br>6<br></code></pre></td></tr></table></figure></li><li><p>案例5</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#i=10</span><br>[root@centos8 ~]<span class="hljs-comment">#j=20</span><br>[root@centos8 ~]<span class="hljs-comment">#declare -i result=i*j</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $result</span><br>200<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-4-2-逻辑运行"><a href="#3-4-2-逻辑运行" class="headerlink" title="3.4.2. 逻辑运行"></a>3.4.2. 逻辑运行</h3><h4 id="3-4-2-1-与或非"><a href="#3-4-2-1-与或非" class="headerlink" title="3.4.2.1. 与或非"></a>3.4.2.1. 与或非</h4><p><img src="image-20220808211858098.png" alt="image-20220808211858098"></p><ul><li><p>true, false</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">1,真<br>0,假<br>#注意,以上为二进制<br></code></pre></td></tr></table></figure></li><li><p>与：&amp; 和0相与结果为0，和1相与结果保留原值, 一假则假,全真才真为0</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">0 与 0 = 0<br>0 与 1 = 0<br>1 与 0 = 0<br>1 与 1 = 1<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@ubuntu1804 ~]<span class="hljs-comment">#x=$[2&amp;6]</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#echo $x</span><br>2<br>[root@ubuntu1804 ~]<span class="hljs-comment">#x=$[7&amp;3]</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#echo $x</span><br>3<br></code></pre></td></tr></table></figure></li><li><p>或：| 和1相或结果为1，和0相或结果保留原值,一真则真,全假才假</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">0 或 0 = 0<br>0 或 1 = 1<br>1 或 0 = 1<br>1 或 1 = 1<br></code></pre></td></tr></table></figure></li><li><p>范例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@ubuntu1804 ~]<span class="hljs-comment">#x=$[7|3]</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#echo $x</span><br>7<br>[root@ubuntu1804 ~]<span class="hljs-comment">#x=$[2|5]</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#echo $x</span><br>7<br></code></pre></td></tr></table></figure></li><li><p>非：！</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">! 1 = 0 ! true<br>! 0 = 1 ! false<br></code></pre></td></tr></table></figure></li><li><p>异或：^</p><ul><li>​    异或的两个值，相同为假，不同为真。两个数字X,Y异或得到结果Z，Z再和任意两者之一X异或，将得出另一个值Y</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs http">0 ^ 0 = 0<br>0 ^ 1 = 1<br>1 ^ 0 = 1<br>1 ^ 1 = 0<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#true</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#false</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#! true</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#! false</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-5-shell编程的条件组合"><a href="#3-5-shell编程的条件组合" class="headerlink" title="3.5. shell编程的条件组合"></a>3.5. shell编程的条件组合</h2><h3 id="3-5-1-第一种方式"><a href="#3-5-1-第一种方式" class="headerlink" title="3.5.1. 第一种方式"></a>3.5.1. 第一种方式</h3><ul><li><p>格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[ EXPRESSION1 -a EXPRESSION2 ] <span class="hljs-comment">#并且，EXPRESSION1和EXPRESSION2都是真，结果才为真</span><br>[ EXPRESSION1 -o EXPRESSION2 ] <span class="hljs-comment">#或者，EXPRESSION1和EXPRESSION2只要有一个真，结果就为真</span><br>[ ! EXPRESSION ] <span class="hljs-comment">#取反</span><br></code></pre></td></tr></table></figure></li><li><p>说明： -a 和 -o 需要使用测试命令进行，[[ ]] 不支持</p></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;/data/scrips/test.sh&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#ll /data/scrips/test.sh</span><br>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh<br>[root@centos8 ~]<span class="hljs-comment">#[ -f $FILE -a -x $FILE ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#chmod +x /data/scripts/test.sh</span><br>[root@centos8 ~]<span class="hljs-comment">#ll /data/scripts/test.sh</span><br>-rwxr-xr-x 1 root root 382 Dec 23 09:32 /data/script40/test.sh<br><span class="hljs-comment">#并且</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -f $FILE -a -x $FILE ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#chmod -x /data/scripts/test.sh</span><br>[root@centos8 ~]<span class="hljs-comment">#ll /data/scripts/test.sh</span><br>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh<br><span class="hljs-comment">#或者</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -f $FILE -o -x $FILE ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ -x $FILE ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br><span class="hljs-comment">#取反</span><br>[root@centos8 ~]<span class="hljs-comment">#[ ! -x $FILE ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#! [ -x $FILE ]</span><br>0<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-5-2-第二种方式"><a href="#3-5-2-第二种方式" class="headerlink" title="3.5.2. 第二种方式"></a>3.5.2. 第二种方式</h3><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">COMMAND1 &amp;&amp; COMMAND2 #并且，短路与，代表条件性的AND THEN<br>如果COMMAND1 成功,将执行COMMAND2,否则,将不执行COMMAND2<br>COMMAND1 || COMMAND2 #或者，短路或，代表条件性的OR ELSE<br>如果COMMAND1 成功,将不执行COMMAND2,否则,将执行COMMAND2<br>! COMMAND #非,取反<br>[root@centos7 ~]#[ $[RANDOM%6] -eq 0 ] &amp;&amp; rm -rf /* || echo &quot;click&quot;<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#test &quot;A&quot; = &quot;B&quot; &amp;&amp; echo &quot;Strings are equal&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#test &quot;A&quot;-eq &quot;B&quot; &amp;&amp; echo &quot;Integers are equal&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;A&quot; = &quot;B&quot; ] &amp;&amp; echo &quot;Strings are equal&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;$A&quot; -eq &quot;$B&quot; ] &amp;&amp; echo &quot;Integers are equal&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -f /bin/cat -a -x /bin/cat ] &amp;&amp; cat /etc/fstab</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -z &quot;$HOSTNAME&quot; -o &quot;$HOSTNAME&quot; = &quot;localhost.localdomain&quot; ]&amp;&amp;</span><br>hostname www.magedu.com<br>[root@centos8 ~]<span class="hljs-comment">#id wang &amp;&gt; /dev/null || useradd wang</span><br>[root@centos8 ~]<span class="hljs-comment">#id zhang &amp;&gt; /dev/null || useradd zhang</span><br>[root@centos8 ~]<span class="hljs-comment">#getent passwd zhang</span><br>zhang:x:1002:1002::/home/zhang:/bin/bash<br>[root@centos8 ~]<span class="hljs-comment">#grep -q no_such_user /etc/passwd || echo &#x27;No such user&#x27;</span><br>No such user<br></code></pre></td></tr></table></figure></li><li><p>案例2</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#[ -f “$FILE” ] &amp;&amp; [[ “$FILE”=~ .*\.sh$ ]] &amp;&amp; chmod +x $FILE</span><br>[root@centos8 ~]<span class="hljs-comment">#ping -c1 -W1 172.16.0.1 &amp;&gt; /dev/null &amp;&amp; echo &#x27;172.16.0.1 is</span><br>up<span class="hljs-string">&#x27; || (echo &#x27;</span>172.16.0.1 is unreachable<span class="hljs-string">&#x27;; exit 1)</span><br><span class="hljs-string">172.16.0.1 is up</span><br><span class="hljs-string">[root@centos8 ~]#IP=10.0.0.111;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up</span><br><span class="hljs-string">|| echo $IP is down</span><br><span class="hljs-string">10.0.0.111 is down</span><br><span class="hljs-string">[root@centos8 ~]#IP=10.0.0.1;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up ||</span><br><span class="hljs-string">echo $IP is down</span><br><span class="hljs-string">10.0.0.1 is up</span><br></code></pre></td></tr></table></figure></li><li><p>案例3：：&amp;&amp; 和 || 组合使用</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &quot;$NAME is exist&quot;</span><br>wang is exist<br>[root@centos8 ~]<span class="hljs-comment">#NAME=wange; id $NAME &amp;&gt; /dev/null || echo &quot;$NAME is not</span><br>exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wange is not exist</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wange; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot; ||</span><br><span class="hljs-string">echo &quot;</span><span class="hljs-variable">$NAME</span> is not exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wange is not exist</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wang; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot; ||</span><br><span class="hljs-string">echo &quot;</span><span class="hljs-variable">$NAME</span> is not exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wang is exist</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wang; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot; ||</span><br><span class="hljs-string">echo &quot;</span><span class="hljs-variable">$NAME</span> is not exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wang is exist</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wang; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null || echo &quot;</span><span class="hljs-variable">$NAME</span> is not exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">&amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wang is exist</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wange; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null || echo &quot;</span><span class="hljs-variable">$NAME</span> is not<br>exist<span class="hljs-string">&quot; &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">wange is not exist</span><br><span class="hljs-string">wange is exist</span><br><span class="hljs-string">#结论：如果&amp;&amp; 和 || 混合使用，&amp;&amp; 要在前，|| 放在后</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wange; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot; ||</span><br><span class="hljs-string">useradd <span class="hljs-variable">$NAME</span></span><br><span class="hljs-string">[root@centos8 ~]#id wange</span><br><span class="hljs-string">uid=1002(wange) gid=1002(wange) groups=1002(wange)</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wangge; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot; ||</span><br><span class="hljs-string">( useradd <span class="hljs-variable">$NAME</span>; echo <span class="hljs-variable">$NAME</span> is created )</span><br><span class="hljs-string">wangge is created</span><br><span class="hljs-string">[root@centos8 ~]#id wangge</span><br><span class="hljs-string">uid=1003(wangge) gid=1003(wangge) groups=1003(wangge)</span><br><span class="hljs-string">[root@centos8 ~]#NAME=wanggege; id <span class="hljs-variable">$NAME</span> &amp;&gt; /dev/null &amp;&amp; echo &quot;</span><span class="hljs-variable">$NAME</span> is exist<span class="hljs-string">&quot;</span><br><span class="hljs-string">|| &#123; useradd <span class="hljs-variable">$NAME</span>; echo <span class="hljs-variable">$NAME</span> is created; &#125;</span><br><span class="hljs-string">wanggege is created</span><br></code></pre></td></tr></table></figure></li><li><p>案例4：网络状态判断</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /data/scripts/ping.sh</span><br>IP=172.16.0.1<br>ping -c1 -W1 <span class="hljs-variable">$IP</span> &amp;&gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$IP</span> is up&quot;</span> || &#123; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$IP</span> is</span><br><span class="hljs-string">unreachable&quot;</span>; <span class="hljs-built_in">exit</span>; &#125;<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Script is finished&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#bash /data/scripts/ping.sh</span><br>172.16.0.1 is up<br>Script is finished<br></code></pre></td></tr></table></figure></li><li><p>案例5</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#. /etc/os-release; [[ $ID == &quot;rocky&quot; ]] &amp;&amp; [[ $VERSION_ID ==</span><br>8* ]] &amp;&amp; <span class="hljs-built_in">echo</span> Rocky8 || <span class="hljs-built_in">echo</span> CentOS8<br>[root@rocky8 ~]<span class="hljs-comment">#. /etc/os-release; [[ $ID == &quot;rocky&quot; ]] &amp;&amp; [[ $VERSION_ID == 8*</span><br>]] &amp;&amp; <span class="hljs-built_in">echo</span> Rocky8 || <span class="hljs-built_in">echo</span> CentOS8<br>Rocky8<br></code></pre></td></tr></table></figure></li><li><p>案例6：磁盘空间的判断</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /data/script/disk_check.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>WARNING=80<br>SPACE_USED=`<span class="hljs-built_in">df</span>|grep <span class="hljs-string">&#x27;^/dev/sd&#x27;</span>|<span class="hljs-built_in">tr</span> -s <span class="hljs-string">&#x27; &#x27;</span> %|<span class="hljs-built_in">cut</span> -d% -f5|<span class="hljs-built_in">sort</span> -nr|<span class="hljs-built_in">head</span> -1`<br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$SPACE_USED</span>&quot;</span> -ge <span class="hljs-variable">$WARNING</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;disk used is <span class="hljs-variable">$SPACE_USED</span>,will be full&quot;</span><br>| mail -s diskwaring root<br></code></pre></td></tr></table></figure></li><li><p>案例7：磁盘空间和Inode号的检查脚本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 scripts]<span class="hljs-comment">#cat disk_check.sh</span><br><br>WARNING=80<br>SPACE_USED=`<span class="hljs-built_in">df</span> | grep <span class="hljs-string">&#x27;^/dev/sd&#x27;</span>|grep -oE <span class="hljs-string">&#x27;[0-9]+%&#x27;</span>|<span class="hljs-built_in">tr</span> -d %| <span class="hljs-built_in">sort</span> -nr|<span class="hljs-built_in">head</span> -1`<br>INODE_USED=`<span class="hljs-built_in">df</span> -i | grep <span class="hljs-string">&#x27;^/dev/sd&#x27;</span>|grep -oE <span class="hljs-string">&#x27;[0-9]+%&#x27;</span>|<span class="hljs-built_in">tr</span> -d %| <span class="hljs-built_in">sort</span> -nr|<span class="hljs-built_in">head</span><br>-1`<br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$SPACE_USED</span>&quot;</span> -gt <span class="hljs-variable">$WARNING</span> -o <span class="hljs-string">&quot;<span class="hljs-variable">$INODE_USED</span>&quot;</span> -gt <span class="hljs-variable">$WARNING</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;DISK</span><br><span class="hljs-string">USED:<span class="hljs-variable">$SPACE_USED</span>%, INODE_USED:<span class="hljs-variable">$INODE_USED</span>,will be full&quot;</span> | mail -s <span class="hljs-string">&quot;DISK Warning&quot;</span><br>root@wangxiaochun.com<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-6-shell编程条件测试"><a href="#3-6-shell编程条件测试" class="headerlink" title="3.6. shell编程条件测试"></a>3.6. shell编程条件测试</h2><ul><li><p>测试：判断某需求是否满足，需要由测试机制来实现，专用的测试表达式需要由测试命令辅助完成测试过程，实现评估布尔声明，以便用在条件性环境下进行执行</p><ul><li>若真，则状态码变量 $? 返回0</li><li>若假，则状态码变量 $? 返回1</li></ul></li><li><p>条件测试命令</p><ul><li>test EXPRESSION</li><li>[ EXPRESSION ] #和test 等价，建议使用 [ ]</li><li>[[ EXPRESSION ]] 相关于增强版的 [ ], 支持[]的用法,且支持扩展正则表达式和通配符</li></ul></li><li><p>注意：EXPRESSION前后必须有空白字符</p></li><li><p>帮助</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#type [</span><br>[ is a shell <span class="hljs-built_in">builtin</span><br>[root@centos8 ~]<span class="hljs-comment">#help [</span><br>[: [ arg... ]<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-6-1-变量测试"><a href="#3-6-1-变量测试" class="headerlink" title="3.6.1. 变量测试"></a>3.6.1. 变量测试</h3><ul><li><p>格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#判断 NAME 变量是否定义</span><br>[ -v NAME ]<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#unset x</span><br>[root@centos8 ~]<span class="hljs-comment">#test -v x</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#x=10</span><br>[root@centos8 ~]<span class="hljs-comment">#test -v x</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#y=</span><br>[root@centos8 ~]<span class="hljs-comment">#test -v y</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#注意 [ ] 中需要空格，否则会报下面错误</span><br>[root@centos8 ~]<span class="hljs-comment">#[-v name]</span><br>-bash: [-v: <span class="hljs-built_in">command</span> not found<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-6-2-数值测试"><a href="#3-6-2-数值测试" class="headerlink" title="3.6.2. 数值测试"></a>3.6.2. 数值测试</h3><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">-eq 是否等于<br>-ne 是否不等于<br>-gt 是否大于<br>-ge 是否大于等于<br>-lt 是否小于<br>-le 是否小于等于<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#i=10</span><br>[root@centos8 ~]<span class="hljs-comment">#j=8</span><br>[root@centos8 ~]<span class="hljs-comment">#[ $i -lt $j ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ $i -gt $j ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ i -gt j ]</span><br>-bash: [: i: <span class="hljs-built_in">integer</span> expression expected<br></code></pre></td></tr></table></figure></li><li><p>算术表达式比较</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">== 相等<br>!= 不相等<br>&lt;=<br>&gt;=<br>&lt;<br>&gt;<br></code></pre></td></tr></table></figure></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#x=10;y=10;(( x == y ));echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#x=10;y=20;(( x == y ));echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#x=10;y=20;(( x != y ));echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#x=10;y=10;(( x != y ));echo $?</span><br>1<br></code></pre></td></tr></table></figure></li><li><p>案例2</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#x=10;y=20;(( x &gt; y ));echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#x=10;y=20;(( x &lt; y ));echo $?</span><br>0<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-6-3-字符串测试"><a href="#3-6-3-字符串测试" class="headerlink" title="3.6.3. 字符串测试"></a>3.6.3. 字符串测试</h3><ul><li><p>test和 [ ] 字符串测试用法</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs http">-z STRING 字符串是否为空，没定义或空为真，不空为假，<br>-n STRING 字符串是否不空，不空为真，空为假<br>STRING 同上<br>STRING1 = STRING2 是否等于，注意 = 前后有空格<br>STRING1 != STRING2 是否不等于<br>&gt; ascii码是否大于ascii码<br>&lt; 是否小于<br></code></pre></td></tr></table></figure></li><li><p>[[]] 字符串测试用法</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">[[ expression ]] 用法<br>== 左侧字符串是否和右侧的PATTERN相同<br>注意:此表达式用于[[ ]]中，PATTERN为通配符<br>=~ 左侧字符串是否能够被右侧的正则表达式的PATTERN所匹配<br>注意: 此表达式用于[[ ]]中为扩展的正则表达式<br></code></pre></td></tr></table></figure></li><li><p>建议：当使用正则表达式或通配符使用[[ ]]，其它情况一般使用 [ ]</p></li><li><p>案例:使用 [ ]</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#unset str</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -z &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#str=&quot;&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -z &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#str=&quot; &quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -z &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ -n &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#unset str</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -n &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#str=magedu</span><br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#str=magedu</span><br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;$str&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#str1=magedu</span><br>[root@centos8 ~]<span class="hljs-comment">#str2=mage</span><br>[root@centos8 ~]<span class="hljs-comment">#[ $str1 = $str2 ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#str2=magedu</span><br>[root@centos8 ~]<span class="hljs-comment">#[ $str1 = $str2 ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br></code></pre></td></tr></table></figure></li><li><p>案例2：在比较字符串时，建议变量放在“ ”中</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#[ &quot;$NAME&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#NAME=&quot;I love linux&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[ $NAME ]</span><br>-bash: [: love: binary operator expected<br>[root@centos8 ~]<span class="hljs-comment">#[ &quot;$NAME&quot; ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ I love linux ]</span><br>-bash: [: love: binary operator expected<br></code></pre></td></tr></table></figure></li><li><p>案例3：[[ ]] 和通配符</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;a*&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $FILE</span><br>a*<br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;ab&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;a*&quot;</span><br><span class="hljs-comment">#[[]]中如果不想使用通配符*,只想表达*本身,可以用&quot; &quot;引起来</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a&quot;*&quot; ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;ab&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a&quot;*&quot; ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br><span class="hljs-comment">#[[]]中如果不想使用通配符*,只想表达*本身,也可以使用转义符</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a\* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;a\b&quot;</span><br>[root@centos8 ~t]<span class="hljs-comment">#[[ $FILE == a\* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#FILE=&quot;a*&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ $FILE == a\* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#通配符?</span><br>[root@centos8 script]<span class="hljs-comment">#FILE=abc</span><br>[root@centos8 script]<span class="hljs-comment">#[[ $FILE == ??? ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 script]<span class="hljs-comment">#FILE=abcd</span><br>[root@centos8 script]<span class="hljs-comment">#[[ $FILE == ??? ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>1<br><span class="hljs-comment">#通配符</span><br>[root@centos8 ~]<span class="hljs-comment">#NAME=&quot;linux1&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$NAME&quot; == linux* ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$NAME&quot; == &quot;linux*&quot; ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#NAME=&quot;linux*&quot;</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$NAME&quot; == &quot;linux*&quot; ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#结论：[[ == ]] == 右侧的 * 做为通配符，不要加“”，只想做为*符号使用时, 需要加 “” 或转义</span><br></code></pre></td></tr></table></figure></li><li><p>案例4：判断合理的考试成绩</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 script]<span class="hljs-comment">#SCORE=101</span><br>[root@centos8 script]<span class="hljs-comment">#[[ $SCORE =~ 100|[0-9]&#123;1,2&#125; ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 script]<span class="hljs-comment">#[[ $SCORE =~ ^(100|[0-9]&#123;1,2&#125;)$ ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 script]<span class="hljs-comment">#SCORE=10</span><br>[root@centos8 script]<span class="hljs-comment">#[[ $SCORE =~ ^(100|[0-9]&#123;1,2&#125;)$ ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 script]<span class="hljs-comment">#SCORE=abc</span><br>[root@centos8 script]<span class="hljs-comment">#[[ $SCORE =~ ^(100|[0-9]&#123;1,2&#125;)$ ]]</span><br>[root@centos8 script]<span class="hljs-comment">#echo $?</span><br>1<br></code></pre></td></tr></table></figure></li><li><p>案例5：使用 [[ ]] 判断文件后缀</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#通配符</span><br>[root@centos8 ~]<span class="hljs-comment">#FILE=test.log</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$FILE&quot; == *.log ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#FILE=test.txt</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$FILE&quot; == *.log ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$FILE&quot; != *.log ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#正则表达式</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$FILE&quot; =~ \.log$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#FILE=test.log</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$FILE&quot; =~ \.log$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br></code></pre></td></tr></table></figure></li><li><p>案例6：判断合法的非负整数</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#N=100</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$N&quot; =~ ^[0-9]+$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#N=Magedu10</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$N&quot; =~ ^[0-9]+$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br></code></pre></td></tr></table></figure></li><li><p>案例7：判断合法IP</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#IP=1.2.3.4</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$IP&quot; =~ ^([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#IP=1.2.3.4567</span><br>[root@centos8 ~]<span class="hljs-comment">#[[ &quot;$IP&quot; =~ ^([0-9]&#123;1,3&#125;.)&#123;3&#125;[0-9]&#123;1,3&#125;$ ]]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[[ $IP =~ ^(([1-9]?[0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;</span><br>([1-9]?[0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])$ ]]<br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br></code></pre></td></tr></table></figure></li><li><p>案例8</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos7 ~]<span class="hljs-comment">#cat check_ip.sh</span><br>IP=<span class="hljs-variable">$1</span><br>[[ <span class="hljs-variable">$IP</span> =~ ^(([1-9]?[0-9]|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;([1-9]?[0-9]|1[0-9]<br>&#123;2&#125;|2[0-4][0-9]|25[0-5])$ ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$IP</span> is valid || <span class="hljs-built_in">echo</span> <span class="hljs-variable">$IP</span> is invalid<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-6-4-文件测试"><a href="#3-6-4-文件测试" class="headerlink" title="3.6.4. 文件测试"></a>3.6.4. 文件测试</h3><ul><li><p>存在性测试</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http">-a FILE：同 -e<br>-e FILE: 文件存在性测试，存在为真，否则为假<br>-b FILE：是否存在且为块设备文件<br>-c FILE：是否存在且为字符设备文件<br>-d FILE：是否存在且为目录文件<br>-f FILE：是否存在且为普通文件<br>-h FILE 或 -L FILE：存在且为符号链接文件<br>-p FILE：是否存在且为命名管道文件<br>-S FILE：是否存在且为套接字文件<br></code></pre></td></tr></table></figure></li><li><p>案例：-e和-a 表示判断文件的存在性，建议使用-e</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#文件是否不存在</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -a /etc/nologin ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#! [ -a /etc/nologin ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#文件是否存在</span><br>[root@centos8 ~]<span class="hljs-comment"># [ -a /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br><span class="hljs-comment">#取反后结果却没有变化</span><br>[root@centos8 ~]<span class="hljs-comment"># [ ! -a /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#! [ -a /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br><span class="hljs-comment">#文件是否存在</span><br>[root@centos8 ~]<span class="hljs-comment">#! [ -e /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br><span class="hljs-comment">#此为推荐写法</span><br>[root@centos8 ~]<span class="hljs-comment">#[ ! -e /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ -d /etc ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ -d /etc/issue ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ -L /bin ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ -L /bin/ ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br></code></pre></td></tr></table></figure></li><li><p>文件权限测试</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs http">-r FILE：是否存在且可读<br>-w FILE: 是否存在且可写<br>-x FILE: 是否存在且可执行<br>-u FILE：是否存在且拥有suid权限<br>-g FILE：是否存在且拥有sgid权限<br>-k FILE：是否存在且拥有sticky权限<br></code></pre></td></tr></table></figure></li><li><p>注意：最终结果由用户对文件的实际权限决定，而非文件属性决定</p></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#[ -w /etc/shadow ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#[ -x /etc/shadow ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#[ -w test.txt ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br>[root@centos8 ~]<span class="hljs-comment">#chattr +i test.txt</span><br>[root@centos8 ~]<span class="hljs-comment">#lsattr test.txt</span><br>----i-------------- nianling.txt<br>[root@centos8 ~]<span class="hljs-comment">#[ -w test.txt ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>1<br>[root@centos8 ~]<span class="hljs-comment">#chattr -i test.txt</span><br>[root@centos8 ~]<span class="hljs-comment">#[ -w test.txt ]</span><br>[root@centos8 ~]<span class="hljs-comment">#echo $?</span><br>0<br></code></pre></td></tr></table></figure></li><li><p>文件属性测试</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http">-s FILE #是否存在且非空<br>-t fd #fd 文件描述符是否在某终端已经打开<br>-N FILE #文件自从上一次被读取之后是否被修改过<br>-O FILE #当前有效用户是否为文件属主<br>-G FILE #当前有效用户是否为文件属组<br>FILE1 -ef FILE2 #FILE1是否是FILE2的硬链接<br>FILE1 -nt FILE2 #FILE1是否新于FILE2（mtime）<br>FILE1 -ot FILE2 #FILE1是否旧于FILE2<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-7-shell编程for循环"><a href="#3-7-shell编程for循环" class="headerlink" title="3.7. shell编程for循环"></a>3.7. shell编程for循环</h2><ul><li>说明：将某代码段重复运行多次，通常有进入循环的条件和退出循环的条件<br>重复运行次数<ul><li>次数事先已知</li><li>循环次数事先未知</li></ul></li><li>常见的循环的命令：for, while, until</li></ul><p><img src="image-20220808214705263.png" alt="image-20220808214705263"></p><h3 id="3-7-1-循环-for"><a href="#3-7-1-循环-for" class="headerlink" title="3.7.1. 循环 for"></a>3.7.1. 循环 for</h3><ul><li><p>帮助</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#CentOS7的for帮助比CentOS8全面</span><br>[root@centos7 ~]<span class="hljs-comment">#help for</span><br><span class="hljs-keyword">for</span>: <span class="hljs-keyword">for</span> NAME [<span class="hljs-keyword">in</span> WORDS ... ] ; <span class="hljs-keyword">do</span> COMMANDS; <span class="hljs-keyword">done</span><br>Execute commands <span class="hljs-keyword">for</span> each member <span class="hljs-keyword">in</span> a list.<br>The `<span class="hljs-keyword">for</span><span class="hljs-string">&#x27; loop executes a sequence of commands for each member in a</span><br><span class="hljs-string">list of items. If `in WORDS ...;&#x27;</span> is not present, <span class="hljs-keyword">then</span> `<span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><span class="hljs-string">&#x27; is</span><br><span class="hljs-string">assumed. For each element in WORDS, NAME is set to that element, and</span><br><span class="hljs-string">the COMMANDS are executed.</span><br><span class="hljs-string">Exit Status:</span><br><span class="hljs-string">Returns the status of the last command executed.</span><br><span class="hljs-string">for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done</span><br><span class="hljs-string">Arithmetic for loop.</span><br><span class="hljs-string">Equivalent to</span><br><span class="hljs-string">(( EXP1 ))</span><br><span class="hljs-string">while (( EXP2 )); do</span><br><span class="hljs-string">COMMANDS</span><br><span class="hljs-string">(( EXP3 ))</span><br><span class="hljs-string">done</span><br><span class="hljs-string">EXP1, EXP2, and EXP3 are arithmetic expressions. If any expression is</span><br><span class="hljs-string">omitted, it behaves as if it evaluates to 1.</span><br><span class="hljs-string">Exit Status:</span><br><span class="hljs-string">Returns the status of the last command executed.</span><br><span class="hljs-string">[root@centos7 ~]#</span><br></code></pre></td></tr></table></figure></li><li><p>格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">for</span> NAME [<span class="hljs-keyword">in</span> WORDS ... ] ; <span class="hljs-keyword">do</span> COMMANDS; <span class="hljs-keyword">done</span><br><span class="hljs-comment">#方式1</span><br><span class="hljs-keyword">for</span> 变量名 <span class="hljs-keyword">in</span> 列表;<span class="hljs-keyword">do</span><br>循环体<br><span class="hljs-keyword">done</span><br><span class="hljs-comment">#方式2</span><br><span class="hljs-keyword">for</span> 变量名 <span class="hljs-keyword">in</span> 列表<br><span class="hljs-keyword">do</span><br>循环体<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>执行机制：</p><ul><li>依次将列表中的元素赋值给“变量名”; 每次赋值后即执行一次循环体; 直到列表中的元素耗尽，循环结束</li><li>如果省略 [in WORDS … ] ，此时使用位置参数变量 in “$@”</li></ul></li><li><p>for 循环列表生成方式：</p><ul><li>直接给出列表</li><li>整数列表</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">&#123;start..end&#125;<br>$(seq [start [step]] end)<br></code></pre></td></tr></table></figure></li><li><p>返回列表的命令</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">$(COMMAND)<br></code></pre></td></tr></table></figure></li><li><p>使用glob，如：*.sh*</p></li><li><p>变量引用，如：$@，$*，$#</p></li><li><p>案例1：计算1+2+3+…+100 的结果</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#sum=0;for i in &#123;1..100&#125;;do let sum+=i;done ;echo sum=$sum</span><br><span class="hljs-built_in">sum</span>=5050<br>[root@centos8 ~]<span class="hljs-comment">#seq -s+ 100|bc5050</span><br>5050<br>[root@centos8 ~]<span class="hljs-comment">#echo &#123;1..100&#125;|tr &#x27; &#x27; +|bc</span><br>5050<br>[root@centos8 ~]<span class="hljs-comment">#seq 100|paste -sd +|bc</span><br>5050<br></code></pre></td></tr></table></figure></li><li><p>案例2：100以内的奇数之和</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#sum=0;for i in &#123;1..100..2&#125;;do let sum+=i;done;echo sum=$sum</span><br><span class="hljs-built_in">sum</span>=2500<br>[root@centos8 ~]<span class="hljs-comment">#seq -s+ 1 2 100| bc</span><br>2500<br>[root@centos8 ~]<span class="hljs-comment">#echo &#123;1..100..2&#125;|tr &#x27; &#x27; + | bc</span><br>2500<br></code></pre></td></tr></table></figure></li><li><p>案例3</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /data/scripts/for_sum.sh</span><br><br><span class="hljs-built_in">sum</span>=0<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $* ; <span class="hljs-keyword">do</span><br><span class="hljs-built_in">let</span> <span class="hljs-built_in">sum</span>+=i<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-built_in">sum</span>=<span class="hljs-variable">$sum</span><br>[root@centos8 ~]<span class="hljs-comment">#bash /data/scripts/for_sum.sh 1 2 3 4 5 6</span><br><span class="hljs-built_in">sum</span>=21<br></code></pre></td></tr></table></figure></li><li><p>案例4：批量创建用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat createuser.sh</span><br><br>[ <span class="hljs-variable">$#</span> -eq 0 ] &amp;&amp; &#123; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: createuser.sh USERNAME ...&quot;</span> ;<span class="hljs-built_in">exit</span> 1 ; &#125;<br><span class="hljs-keyword">for</span> user ;<span class="hljs-keyword">do</span><br><span class="hljs-built_in">id</span> <span class="hljs-variable">$user</span> &amp;&gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$user</span> is exist || &#123; useradd <span class="hljs-variable">$user</span> ; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$user</span><br>is created; &#125;<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例5：批量创建用户和并设置随机密码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 script]<span class="hljs-comment">#cat user_for.sh</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..10&#125;;<span class="hljs-keyword">do</span><br>useradd user<span class="hljs-variable">$i</span><br>PASS=`<span class="hljs-built_in">cat</span> /dev/urandom | <span class="hljs-built_in">tr</span> -dc <span class="hljs-string">&#x27;[:alnum:]&#x27;</span> |<span class="hljs-built_in">head</span> -c12`<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PASS</span> | passwd --stdin user<span class="hljs-variable">$i</span> &amp;&gt; /dev/null<br><span class="hljs-built_in">echo</span> user<span class="hljs-variable">$i</span>:<span class="hljs-variable">$PASS</span> &gt;&gt; /data/user.log<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;user<span class="hljs-variable">$i</span> is created&quot;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例6：九九乘法表</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 script]<span class="hljs-comment">#cat 9x9_for.sh</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..9&#125;;<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> `<span class="hljs-built_in">seq</span> <span class="hljs-variable">$i</span>`;<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;j&#125;</span>x<span class="hljs-variable">$&#123;i&#125;</span>=$[j*i]\t\c&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例7：实现九九乘法表</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#vim 9x9.sh</span><br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> &#123;1..9&#125;;<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> `<span class="hljs-built_in">seq</span> <span class="hljs-variable">$j</span>`;<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\E[1;$[RANDOM%7+31]m<span class="hljs-variable">$&#123;i&#125;</span>x<span class="hljs-variable">$&#123;j&#125;</span>=$[i*j]\E[0m\t\c&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">for</span>((i=1;i&lt;=9;i++));<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span>((j=1;j&lt;=i;j++));<span class="hljs-keyword">do</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\E[1;$[RANDOM%7+31]m<span class="hljs-variable">$&#123;i&#125;</span>x<span class="hljs-variable">$&#123;j&#125;</span>=$[i*j]\E[0m\t&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\n&quot;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例8：倒状的九九乘法表</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@ubuntu1804 ~]<span class="hljs-comment">#cat 9x9_v2.sh</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..9&#125;;<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">seq</span> `<span class="hljs-built_in">echo</span> $[10-<span class="hljs-variable">$i</span>]`);<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -ne <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;j&#125;</span>x`echo $[10-i]`=<span class="hljs-subst">$(((10-i)</span>*j))\t&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#bash 9x9_v2.sh</span><br>1x9=9 2x9=18 3x9=27 4x9=36 5x9=45 6x9=54 7x9=63 8x9=72 9x9=81<br>1x8=8 2x8=16 3x8=24 4x8=32 5x8=40 6x8=48 7x8=56 8x8=64<br>1x7=7 2x7=14 3x7=21 4x7=28 5x7=35 6x7=42 7x7=49<br>1x6=6 2x6=12 3x6=18 4x6=24 5x6=30 6x6=36<br>1x5=5 2x5=10 3x5=15 4x5=20 5x5=25<br>1x4=4 2x4=8 3x4=12 4x4=16<br>1x3=3 2x3=6 3x3=9<br>1x2=2 2x2=4<br>1x1=1<br></code></pre></td></tr></table></figure></li><li><p>案例9：：将指定目录下的文件所有文件的后缀改名为 bak 后缀</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /data/scripts/for_rename.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><br>DIR=/data/test<br><span class="hljs-built_in">cd</span> <span class="hljs-variable">$DIR</span> || &#123; <span class="hljs-built_in">echo</span> 无法进入 <span class="hljs-variable">$DIR</span>;<span class="hljs-built_in">exit</span> 1; &#125;<br><span class="hljs-keyword">for</span> FILE <span class="hljs-keyword">in</span> * ;<span class="hljs-keyword">do</span><br>PRE=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">$FILE</span>|grep -Eo <span class="hljs-string">&quot;.*\.&quot;</span>`<br><span class="hljs-built_in">mv</span> <span class="hljs-variable">$FILE</span> <span class="hljs-variable">$&#123;PRE&#125;</span>bak<br><span class="hljs-comment"># PRE=`echo $FILE|rev|cut -d. -f 2-|rev`</span><br><span class="hljs-comment"># PRE=`echo $FILE | sed -nr &#x27;s/(.*)\.([^.]+)$/\1/p&#x27;</span><br><span class="hljs-comment"># SUFFIX=`echo $FILE | sed -nr &#x27;s/(.*)\.([^.]+)$/\2/p&#x27;`</span><br><span class="hljs-comment"># mv $FILE $PRE.bak</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例9：要求将目录YYYY-MM-DD/中所有文件，移动到YYYY-MM/DD/下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat for_dir.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>PDIR=/data/test<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..365&#125;;<span class="hljs-keyword">do</span><br>DIR=`<span class="hljs-built_in">date</span> -d <span class="hljs-string">&quot;-<span class="hljs-variable">$i</span> day&quot;</span> +%F`<br><span class="hljs-built_in">mkdir</span> -pv <span class="hljs-variable">$PDIR</span>/<span class="hljs-variable">$DIR</span><br><span class="hljs-built_in">cd</span> <span class="hljs-variable">$PDIR</span>/<span class="hljs-variable">$DIR</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> &#123;1..10&#125;;<span class="hljs-keyword">do</span><br><span class="hljs-built_in">touch</span> <span class="hljs-variable">$RANDOM</span>.<span class="hljs-built_in">log</span><br><span class="hljs-keyword">done</span><br><span class="hljs-keyword">done</span><br><span class="hljs-comment">#2.将上面的目录移动到YYYY-MM/DD/下</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#</span><br>DIR=/data/test<br><span class="hljs-built_in">cd</span> <span class="hljs-variable">$DIR</span> || &#123; <span class="hljs-built_in">echo</span> 无法进入 <span class="hljs-variable">$DIR</span>;<span class="hljs-built_in">exit</span> 1; &#125;<br><span class="hljs-keyword">for</span> subdir <span class="hljs-keyword">in</span> * ;<span class="hljs-keyword">do</span><br>YYYY_MM=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">$subdir</span> |<span class="hljs-built_in">cut</span> -d<span class="hljs-string">&quot;-&quot;</span> -f1,2`<br>DD=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">$subdir</span> |<span class="hljs-built_in">cut</span> -d<span class="hljs-string">&quot;-&quot;</span> -f3`<br>[ -d <span class="hljs-variable">$YYYY_MM</span>/<span class="hljs-variable">$DD</span> ] || <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$YYYY_MM</span>/<span class="hljs-variable">$DD</span> &amp;&gt; /dev/null<br><span class="hljs-built_in">mv</span> <span class="hljs-variable">$subdir</span>/* <span class="hljs-variable">$YYYY_MM</span>/<span class="hljs-variable">$DD</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$DIR</span>/*-*-*<br></code></pre></td></tr></table></figure></li><li><p>案例10：扫描一个网段：10.0.0.0/24，判断此网段中主机在线状态，将在线的主机的IP打印出来</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@centos8 ~]<span class="hljs-comment">#cat /data/scripts/for_scan_host.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>NET=10.0.0<br><span class="hljs-keyword">for</span> ID <span class="hljs-keyword">in</span> &#123;1..254&#125;;<span class="hljs-keyword">do</span><br>&#123;<br>ping -c1 -W1 <span class="hljs-variable">$NET</span>.<span class="hljs-variable">$ID</span> &amp;&gt; /dev/null &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$NET</span>.<span class="hljs-variable">$ID</span> is up| <span class="hljs-built_in">tee</span> -a<br>host_list.log || <span class="hljs-built_in">echo</span> <span class="hljs-variable">$NET</span>.<span class="hljs-variable">$ID</span> is down<br>&#125;&amp;<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">wait</span><br></code></pre></td></tr></table></figure></li><li><p>格式2</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">双小括号方法，即((…))格式，也可以用于算术运算，双小括号方法也可以使bash Shell实现C语言风格<br>的变量操作<br>I=10;((I++))<br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done<br>for ((控制变量初始化;条件判断表达式;控制变量的修正表达式))<br>do<br>循环体<br>done<br></code></pre></td></tr></table></figure><p><img src="image-20220808220000419.png" alt="image-20220808220000419"></p></li><li><p>控制变量初始化：仅在运行到循环代码段时执行一次</p></li><li><p>控制变量的修正表达式：每轮循环结束会先进行控制变量修正运算，而后再做条件判断</p></li><li><p>案例1</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@ubuntu1804 ~]<span class="hljs-comment">#cat sum.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><br><span class="hljs-keyword">for</span>((<span class="hljs-built_in">sum</span>=0,i=1;i&lt;=100;i++));<span class="hljs-keyword">do</span><br><span class="hljs-built_in">let</span> <span class="hljs-built_in">sum</span>+=i<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-built_in">sum</span>=<span class="hljs-variable">$sum</span><br><span class="hljs-keyword">for</span>((<span class="hljs-built_in">sum</span>=0,i=1;i&lt;=100;<span class="hljs-built_in">sum</span>+=i,i++));<span class="hljs-keyword">do</span><br><span class="hljs-literal">true</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-built_in">sum</span>=<span class="hljs-variable">$sum</span><br>[root@ubuntu1804 ~]<span class="hljs-comment">#bash sum.sh</span><br><span class="hljs-built_in">sum</span>=5050<br><span class="hljs-built_in">sum</span>=5050<br></code></pre></td></tr></table></figure></li><li><p>案例2九九乘法表</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment">#语法1实现</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..9&#125;;<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> `<span class="hljs-built_in">seq</span> <span class="hljs-variable">$i</span>`;<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;j&#125;</span>x<span class="hljs-variable">$i</span>=<span class="hljs-subst">$((j*i)</span>)\t\c&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br><span class="hljs-comment">#语法2实现</span><br><span class="hljs-keyword">for</span>((i=1;i&lt;10;i++));<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span>((j=1;j&lt;=i;j++));<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;j&#125;</span>x<span class="hljs-variable">$i</span>=<span class="hljs-subst">$((j*i)</span>)\t\c&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p>案例3：等腰三角形</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 scripts]<span class="hljs-comment">#cat for_triangle.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入三角形的行数: &quot;</span> line<br><span class="hljs-keyword">for</span>((i=1;i&lt;=line;i++));<span class="hljs-keyword">do</span><br><span class="hljs-keyword">for</span>((k=0;k&lt;=line-i;k++));<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&#x27; \c&#x27;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-keyword">for</span>((j=1;j&lt;=2*i-1;j++));<span class="hljs-keyword">do</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&#x27;*\c&#x27;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span><br><span class="hljs-keyword">done</span><br>[root@centos8 scripts]<span class="hljs-comment">#bash for_triangle.sh</span><br>请输入三角形的行数: 10<br>*<br>***<br>*****<br>*******<br>*********<br>***********<br>*************<br>***************<br>*****************<br>*******************<br>[root@centos8 scripts]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure></li><li><p>案例4：生成进度</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#for ((i = 0; i &lt;= 100; ++i)); do printf &quot;\e[4D%3d%%&quot; $i;sleep</span><br>0.1s; <span class="hljs-keyword">done</span><br>100%[root@centos8 ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure></li><li><p>案例5：</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs leaf">[root@centos8 ~]<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">for</span><span class="hljs-params">((;;)</span></span>);do echo for;sleep 1;done<br>for<br>for<br>for<br>for<br>for<br>for<br>for<br></code></pre></td></tr></table></figure></li></ul><h1 id="4-磁盘和存储管理"><a href="#4-磁盘和存储管理" class="headerlink" title="4. 磁盘和存储管理"></a>4. 磁盘和存储管理</h1><h2 id="4-1-磁盘类型和结构"><a href="#4-1-磁盘类型和结构" class="headerlink" title="4.1. 磁盘类型和结构"></a>4.1. 磁盘类型和结构</h2><h3 id="4-1-1-硬盘类型"><a href="#4-1-1-硬盘类型" class="headerlink" title="4.1.1. 硬盘类型"></a>4.1.1. 硬盘类型</h3><ul><li><p>硬盘接口类型</p><ul><li><p>IDE：133MB/s，并行接口，早期家用电脑</p></li><li><p>SCSI：640MB/s，并行接口，早期服务器</p></li><li><p>SATA：6Gbps，SATA数据端口与电源端口是分开的，即需要两条线，一条数</p><p>据线，一条电源线</p></li><li><p>SAS：6Gbps，SAS是一整条线，数据端口与电源端口是一体化的，SAS中是包含供电线的，而SATA中不包含供电线。SATA标准其实是SAS标准的一个子集，二者可兼容，SATA硬盘可以插入SAS主板上，反之不行</p></li><li><p>USB：480MB/s</p></li><li><p>M.2：</p></li></ul></li><li><p>注意：速度不是由单纯的接口类型决定，支持Nvme协议硬盘速度是最快的</p></li><li><p>服务器硬盘大小</p><ul><li>LFF：3.5寸，一般见到的那种台式机硬盘的大小</li><li>SFF：Small Form Factor 小形状因数，2.5寸，注意不同于2.5寸的笔记本硬盘</li></ul></li><li><p>L、S分别是大、小的意思，目前服务器或者盘柜采用sff规格的硬盘主要是考内虑增大单位密度内的磁盘容量、增强散热、减小功耗</p></li></ul><h3 id="4-1-2-磁盘结构"><a href="#4-1-2-磁盘结构" class="headerlink" title="4.1.2. 磁盘结构"></a>4.1.2. 磁盘结构</h3><ul><li><p>盘片</p><p><img src="image-20220808194202831.png" alt="image-20220808194202831"></p></li><li><p>磁道、扇区：每个盘片被划分为一个个磁道，每个磁道又划分为一个个扇区</p><p><img src="image-20220808194327241.png" alt="image-20220808194327241"></p></li><li><p>柱面</p><p><img src="image-20220808194419858.png" alt="image-20220808194419858"></p></li></ul><h4 id="4-1-2-1-机械硬盘（HDD）"><a href="#4-1-2-1-机械硬盘（HDD）" class="headerlink" title="4.1.2.1. 机械硬盘（HDD）"></a>4.1.2.1. 机械硬盘（HDD）</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">即是传统普通硬盘，主要由：盘片，磁头，盘片转轴及控制电机，磁头控制器，数据转换器，接口，缓存等几个部分组成。机械硬盘中所有的盘片都装在一个旋转轴上，每张盘片之间是平行的，在每个盘片的存储面上有一个磁头，磁头与盘片之间的距离比头发丝的直径还小，所有的磁头联在一个磁头控制器上，由磁头控制器负责各个磁头的运动。磁头可沿盘片的半径<br>方向运动，加上盘片每分钟几千转的高速旋转，磁头就可以定位在盘片的指定位置上进行数据的读写操作。数据通过磁头由电磁流来改变极性方式被电磁流写到磁盘上，也可以通过相反方式读取。硬盘为精密设备，进入硬盘的空气必须过滤<br></code></pre></td></tr></table></figure><h4 id="4-1-2-2-固态硬盘（SSD）"><a href="#4-1-2-2-固态硬盘（SSD）" class="headerlink" title="4.1.2.2. 固态硬盘（SSD）"></a>4.1.2.2. 固态硬盘（SSD）</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs">用固态电子存储芯片阵列而制成的硬盘，由控制单元和存储单<br>元（FLASH芯片、DRAM芯片）组成。固态硬盘在接口的规范和定义、功能及使用方法上与普通硬盘的完全相同，在产品外形和尺寸上也与普通硬盘一致<br>相较于HDD，SSD在防震抗摔、传输速率、功耗、重量、噪音上有明显优势，SSD传输速率性能是HDD的2倍,相较于SSD，HDD在价格、容量占有绝对优势<br>硬盘有价，数据无价，目前SSD不能完全取代HHD<br></code></pre></td></tr></table></figure><h4 id="4-1-2-3-硬盘存储术语-CHS"><a href="#4-1-2-3-硬盘存储术语-CHS" class="headerlink" title="4.1.2.3. 硬盘存储术语 CHS"></a>4.1.2.3. 硬盘存储术语 CHS</h4><ul><li>head：磁头 磁头数=盘面数</li><li>track：磁道 磁道=柱面数</li><li>sector：扇区，512bytes</li><li>cylinder：柱面 1柱面=512 * sector数/track<em>head数=512</em>63*255=7.84M<br>CentOS 5 之前版本 Linux 以柱面的整数倍划分分区，CentOS 6之后可以支持以扇区划分分区</li></ul><h2 id="4-2-分区类型MBR和GPT"><a href="#4-2-分区类型MBR和GPT" class="headerlink" title="4.2. 分区类型MBR和GPT"></a>4.2. 分区类型MBR和GPT</h2><h3 id="4-2-1-MBR分区"><a href="#4-2-1-MBR分区" class="headerlink" title="4.2.1. MBR分区"></a>4.2.1. MBR分区</h3><ul><li><p>说明MBR：Master Boot Record，1982年，使用32位表示扇区数，分区不超过2</p></li><li><p>T划分分区的单位：</p><ul><li><p>CentOS 5 之前按整柱面划分</p></li><li><p>CentOS 6 版本后可以按Sector划分</p></li></ul></li><li><p>0磁道0扇区：512bytes</p><ul><li>446bytes: boot loader 启动相关</li><li>64bytes：分区表，其中每16bytes标识一个分区</li><li>2bytes: 55AA，标识位</li></ul></li><li><p>MBR分区中一块硬盘最多有4个主分区，也可以3主分区+1扩展(N个逻辑分区)</p></li><li><p>MBR分区：主和扩展分区对应的1–4，/dev/sda3，逻辑分区从5开始，/dev/sda5</p></li><li><p>MBR分区结构</p><p><img src="image-20220808194838522.png" alt="image-20220808194838522"></p></li></ul><h3 id="4-2-2-GPT分区"><a href="#4-2-2-GPT分区" class="headerlink" title="4.2.2. GPT分区"></a>4.2.2. GPT分区</h3><ul><li><p>说明</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">GPT：GUID（Globals <span class="hljs-keyword">Unique</span> Identifiers） <span class="hljs-keyword">partition</span> <span class="hljs-keyword">table</span> 支持<span class="hljs-number">128</span>个分区，使用<span class="hljs-number">64</span>位，支持<span class="hljs-number">8</span>Z（<span class="hljs-number">512</span>Byte/block ）<span class="hljs-number">64</span>Z （ <span class="hljs-number">4096</span>Byte/block）<br>使用<span class="hljs-number">128</span>位<span class="hljs-type">UUID</span>(Universally <span class="hljs-keyword">Unique</span> Identifier) 表示磁盘和分区 GPT分区表自动备份在头和尾两份，并有CRC校验位<br>UEFI (Unified Extensible Firmware Interface 统一可扩展固件接口)硬件支持GPT，使得操作系统可以<br>启动<br></code></pre></td></tr></table></figure></li><li><p>GPT分区结构</p><p><img src="image-20220808195159631.png" alt="image-20220808195159631"></p></li><li><p>GPT分区结构分为4个区域：</p><ul><li>GPT头</li><li>分区表</li><li>GPT分区</li><li>备份区域</li></ul></li></ul><h2 id="4-3-分区管理和文件系统类型"><a href="#4-3-分区管理和文件系统类型" class="headerlink" title="4.3. 分区管理和文件系统类型"></a>4.3. 分区管理和文件系统类型</h2><h3 id="4-3-1-分区管理"><a href="#4-3-1-分区管理" class="headerlink" title="4.3.1. 分区管理"></a>4.3.1. 分区管理</h3><ul><li><p>列出块设备</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">lsblk<br></code></pre></td></tr></table></figure></li><li><p>创建分区命令</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">fdisk 管理MBR分区<br>gdisk 管理GPT分区<br>parted 高级分区操作，可以是交互或非交互方式<br></code></pre></td></tr></table></figure></li><li><p>注意：重新设置内存中的内核分区表版本，适合于除了CentOS 6 以外的其它版本 5，7，8</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">partprobe<br></code></pre></td></tr></table></figure></li></ul><h4 id="4-3-1-1-parted-命令"><a href="#4-3-1-1-parted-命令" class="headerlink" title="4.3.1.1. parted 命令"></a>4.3.1.1. parted 命令</h4><ul><li><p>说明</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">parted的操作都是实时生效的，小心使用<br></code></pre></td></tr></table></figure></li><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">parted [选项]... [设备 [命令 [参数]...]...]<br></code></pre></td></tr></table></figure></li><li><p>案例1：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs http">parted /dev/sdb mklabel gpt|msdos<br>parted /dev/sdb print<br>parted /dev/sdb mkpart primary 1 200 （默认M）<br>parted /dev/sdb rm 1<br>parted -l 列出所有硬盘分区信息<br></code></pre></td></tr></table></figure></li><li><p>案例2：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Error: /dev/sdb: unrecognised disk label<br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: unknown<br>Disk Flags:<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb mklabel gpt</span><br>Information: You may need to update /etc/fstab.<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: gpt<br>Disk Flags:<br>Number Start End Size File system Name Flags<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb mkpart primary 1 1001</span><br>Information: You may need to update /etc/fstab.<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: gpt<br>Disk Flags:<br>Number Start End Size File system Name Flags<br>1 1049kB 1001MB 1000MB primary<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb mkpart primary 1002 1102</span><br>Information: You may need to update /etc/fstab.<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: gpt<br>Disk Flags:<br>Number Start End Size File system Name Flags<br>1 1049kB 1001MB 1000MB primary<br>2 1002MB 1102MB 99.6MB primary<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb rm 2</span><br>Information: You may need to update /etc/fstab.<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: gpt<br>Disk Flags:<br>Number Start End Size File system Name Flags<br>1 1049kB 1001MB 1000MB primary<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb mklabel msdos</span><br>Warning: The existing disk label on /dev/sdb will be destroyed and all data on<br>this disk will be lost. Do you want to <span class="hljs-built_in">continue</span>?<br>Yes/No? Y<br>Information: You may need to update /etc/fstab.<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb print</span><br>Model: VMware, VMware Virtual S (scsi)<br>Disk /dev/sdb: 21.5GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: msdos<br>Disk Flags:<br>Number Start End Size Type File system Flags<br>[root@centos8 ~]<span class="hljs-comment">#parted /dev/sdb</span><br>GNU Parted 3.2<br>Using /dev/sdb<br>Welcome to GNU Parted! Type <span class="hljs-string">&#x27;help&#x27;</span> to view a list of commands.<br>(parted) <span class="hljs-built_in">help</span><br>align-check TYPE N check partition N <span class="hljs-keyword">for</span> TYPE(min|opt)<br>alignment<br><span class="hljs-built_in">help</span> [COMMAND] <span class="hljs-built_in">print</span> general <span class="hljs-built_in">help</span>, or <span class="hljs-built_in">help</span> on<br>COMMAND<br>mklabel,mktable LABEL-TYPE create a new disklabel (partition<br>table)<br>mkpart PART-TYPE [FS-TYPE] START END make a partition<br>name NUMBER NAME name partition NUMBER as NAME<br><span class="hljs-built_in">print</span> [devices|free|list,all|NUMBER] display the partition table,<br>available devices, free space, all found partitions, or a particular partition<br>quit <span class="hljs-built_in">exit</span> program<br>rescue START END rescue a lost partition near START<br>and END<br>resizepart NUMBER END resize partition NUMBER<br><span class="hljs-built_in">rm</span> NUMBER delete partition NUMBER<br>select DEVICE choose the device to edit<br>disk_set FLAG STATE change the FLAG on selected device<br>disk_toggle [FLAG] toggle the state of FLAG on selected<br>device<br><span class="hljs-built_in">set</span> NUMBER FLAG STATE change the FLAG on partition NUMBER<br>toggle [NUMBER [FLAG]] toggle the state of FLAG on partition<br>NUMBER<br>unit UNIT <span class="hljs-built_in">set</span> the default unit to UNIT<br>version display the version number and<br>copyright information of GNU Parted<br>(parted)<br></code></pre></td></tr></table></figure></li></ul><h4 id="4-3-1-2-分区工具fdisk和gdisk"><a href="#4-3-1-2-分区工具fdisk和gdisk" class="headerlink" title="4.3.1.2. 分区工具fdisk和gdisk"></a>4.3.1.2. 分区工具fdisk和gdisk</h4><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">fdisk -l [-u] [device...] 查看分区<br>fdisk [device...] 管理MBR分区<br>gdisk [device...] 类fdisk 的GPT分区工具<br></code></pre></td></tr></table></figure></li><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs http">p 分区列表<br>t 更改分区类型<br>n 创建新分区<br>d 删除分区<br>v 校验分区<br>u 转换单位<br>w 保存并退出<br>q 不保存并退出<br></code></pre></td></tr></table></figure></li><li><p>查看内核是否已经识别新的分区</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">cat /proc/partitions<br></code></pre></td></tr></table></figure></li><li><p>CentOS 7,8 同步分区表:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">partprobe<br></code></pre></td></tr></table></figure></li><li><p>CentOS6 通知内核重新读取硬盘分区表</p><p>新增分区用</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">partx -a /dev/DEVICE<br>kpartx -a /dev/DEVICE -f: force<br><br><span class="hljs-comment">#示例[root@centos6 ~]#partx -a /dev/sda</span><br></code></pre></td></tr></table></figure></li><li><p>删除分区用</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">partx -d --nr M-N /dev/DEVICE<br>#示例：<br>[root@centos6 ~]#partx -d --nr 6-8 /dev/sda<br></code></pre></td></tr></table></figure></li><li><p>案例:非交互式创建分区</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">echo -e &#x27;n\np\n\n\n+2G\nw\n&#x27; | fdisk /dev/sdc<br></code></pre></td></tr></table></figure></li><li><p>范例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#增加了6,7分区</span><br>[root@centos6 ~]<span class="hljs-comment">#fdisk /dev/sda</span><br>Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): w<br>The partition table has been altered!<br>Calling ioctl() to re-read partition table.<br>WARNING: Re-reading the partition table failed with error 16: Device or resource<br>busy.<br>The kernel still uses the old table. The new table will be used at<br>the next reboot or after you run partprobe(8) or kpartx(8)<br>Syncing disks.<br><span class="hljs-comment">#分区表不同步</span><br>[root@centos6 ~]<span class="hljs-comment">#lsblk</span><br>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sr0 11:0 1 3.7G 0 rom<br>sda 8:0 0 200G 0 disk<br>├─sda1 8:1 0 1G 0 part /boot<br>├─sda2 8:2 0 97.7G 0 part /<br>├─sda3 8:3 0 48.8G 0 part /data<br>├─sda4 8:4 0 1K 0 part<br>└─sda5 8:5 0 2G 0 part [SWAP]<br><span class="hljs-comment">#同步分区表</span><br>[root@centos6 ~]<span class="hljs-comment">#partx -a /dev/sda</span><br>BLKPG: Device or resource busy<br>error adding partition 1<br>BLKPG: Device or resource busy<br>error adding partition 2<br>BLKPG: Device or resource busy<br>error adding partition 3<br>BLKPG: Device or resource busy<br>error adding partition 4<br>BLKPG: Device or resource busy<br>error adding partition 5<br>[root@centos6 ~]<span class="hljs-comment">#lsblk</span><br>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sr0 11:0 1 3.7G 0 rom<br>sda 8:0 0 200G 0 disk<br>├─sda1 8:1 0 1G 0 part /boot<br>├─sda2 8:2 0 97.7G 0 part /<br>├─sda3 8:3 0 48.8G 0 part /data<br>├─sda4 8:4 0 1K 0 part<br>├─sda5 8:5 0 2G 0 part [SWAP]<br>├─sda6 8:6 0 2G 0 part<br>└─sda7 8:7 0 3G 0 part<br><span class="hljs-comment">#删除了6,7分区</span><br>[root@centos6 ~]<span class="hljs-comment">#fdisk /dev/sda</span><br>Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): w<br>The partition table has been altered!<br>Calling ioctl() to re-read partition table.<br>WARNING: Re-reading the partition table failed with error 16: Device or resource<br>busy.<br>The kernel still uses the old table. The new table will be used at<br>the next reboot or after you run partprobe(8) or kpartx(8)<br>Syncing disks.<br>[root@centos6 ~]<span class="hljs-comment">#</span><br>[root@centos6 ~]<span class="hljs-comment">#lsblk</span><br>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sr0 11:0 1 3.7G 0 rom<br>sda 8:0 0 200G 0 disk<br>├─sda1 8:1 0 1G 0 part /boot<br>├─sda2 8:2 0 97.7G 0 part /<br>├─sda3 8:3 0 48.8G 0 part /data<br>├─sda4 8:4 0 1K 0 part<br>├─sda5 8:5 0 2G 0 part [SWAP]<br>├─sda6 8:6 0 2G 0 part<br>└─sda7 8:7 0 3G 0 part<br><span class="hljs-comment">#同步分区表</span><br>[root@centos6 ~]<span class="hljs-comment">#partx -d --nr 6-7 /dev/sda</span><br>[root@centos6 ~]<span class="hljs-comment">#lsblk</span><br>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sr0 11:0 1 3.7G 0 rom<br>sda 8:0 0 200G 0 disk<br>├─sda1 8:1 0 1G 0 part /boot<br>├─sda2 8:2 0 97.7G 0 part /<br>├─sda3 8:3 0 48.8G 0 part /data<br>├─sda4 8:4 0 1K 0 part<br>└─sda5 8:5 0 2G 0 part [SWAP]<br></code></pre></td></tr></table></figure></li><li><p>范例: 批量创建分区</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#echo -e &#x27;n\np\n\n\n+1G\nw&#x27; | fdisk /dev/sdb</span><br>[root@centos8 ~]<span class="hljs-comment">#fdisk /dev/sdb &lt;&lt;EOF</span><br>n<br>p<br>+1G<br>w<br>EOF<br>[root@centos8 ~]<span class="hljs-comment">#lsblk /dev/sdb</span><br>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br>sdb 8:16 0 20G 0 disk<br>├─sdb1 8:17 0 1G 0 part<br>└─sdb2 8:18 0 1G 0 part<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-3-2-文件系统类型"><a href="#4-3-2-文件系统类型" class="headerlink" title="4.3.2. 文件系统类型"></a>4.3.2. 文件系统类型</h3><ul><li><p>说明</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">文件系统是操作系统用于明确存储设备或分区上的文件的方法和数据结构；即在存储设备上组织文件的方法。操作系统中负责管理和存储文件信息的软件结构称为文件管理系统，简称文件系统。<br>从系统角度来看，文件系统是对文件存储设备的空间进行组织和分配，负责文件存储并对存入的文件进行保护和检索的系统。具体地说，它负责为用户建立文件，存入、读出、修改、转储文件，控制文件的存取，安全控制，日志，压缩，加密等<br></code></pre></td></tr></table></figure></li><li><p>支持的文件系统：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">/lib/modules/`uname -r`/kernel/fs<br></code></pre></td></tr></table></figure></li></ul><h4 id="4-3-2-1-Linux-常用文件系统"><a href="#4-3-2-1-Linux-常用文件系统" class="headerlink" title="4.3.2.1. Linux 常用文件系统"></a>4.3.2.1. Linux 常用文件系统</h4><ul><li>ext2：Extended file system 适用于那些分区容量不是太大，更新也不频繁的情况，例如 /boot 分区</li><li>ext3：是 ext2 的改进版本，其支持日志功能，能够帮助系统从非正常关机导致的异常中恢复<br>ext4：是 ext 文件系统的最新版。提供了很多新的特性，包括纳秒级时间戳、创建和使用巨型文件(16TB)、最大1EB的文件系统，以及速度的提升</li><li>xfs：SGI，支持最大8EB的文件系统<br>swap</li><li>iso9660 光盘</li><li>btrfs（Oracle）</li><li>reiserfs</li></ul><h4 id="4-3-2-2-Windows-常用文件系统"><a href="#4-3-2-2-Windows-常用文件系统" class="headerlink" title="4.3.2.2. Windows 常用文件系统"></a>4.3.2.2. Windows 常用文件系统</h4><ul><li>FAT32</li><li>NTFS</li><li>exFAT</li></ul><h4 id="4-3-2-3-Unix："><a href="#4-3-2-3-Unix：" class="headerlink" title="4.3.2.3. Unix："></a>4.3.2.3. Unix：</h4><ul><li>FFS（fast）</li><li>UFS（unix）</li><li>JFS2</li></ul><h4 id="4-3-2-4-网络文件系统："><a href="#4-3-2-4-网络文件系统：" class="headerlink" title="4.3.2.4. 网络文件系统："></a>4.3.2.4. 网络文件系统：</h4><ul><li>NFS</li><li>CIFS</li></ul><h4 id="4-3-2-5-集群文件系统："><a href="#4-3-2-5-集群文件系统：" class="headerlink" title="4.3.2.5. 集群文件系统："></a>4.3.2.5. 集群文件系统：</h4><ul><li>GFS2</li><li>OCFS2（oracle）</li></ul><h4 id="4-3-2-6-分布式文件系统："><a href="#4-3-2-6-分布式文件系统：" class="headerlink" title="4.3.2.6. 分布式文件系统："></a>4.3.2.6. 分布式文件系统：</h4><ul><li>fastdfs</li><li>ceph<br>moosefs</li><li>mogilefs</li><li>glusterfs<br>Lustre</li></ul><h4 id="4-3-2-7-RAW："><a href="#4-3-2-7-RAW：" class="headerlink" title="4.3.2.7. RAW："></a>4.3.2.7. RAW：</h4><h4 id="4-3-2-8-裸文件系统-未经处理或者未经格式化产生的文件系统"><a href="#4-3-2-8-裸文件系统-未经处理或者未经格式化产生的文件系统" class="headerlink" title="4.3.2.8. 裸文件系统,未经处理或者未经格式化产生的文件系统"></a>4.3.2.8. 裸文件系统,未经处理或者未经格式化产生的文件系统</h4><h4 id="4-3-2-9-常用的文件系统特性："><a href="#4-3-2-9-常用的文件系统特性：" class="headerlink" title="4.3.2.9. 常用的文件系统特性："></a>4.3.2.9. 常用的文件系统特性：</h4><ul><li><p>FAT32</p><ul><li>最多只能支持16TB的文件系统和4GB的文件</li></ul></li><li><p>NTFS</p><ul><li>最多只能支持16EB的文件系统和16EB的文件</li></ul></li><li><p>EXT3</p><ul><li>最多只能支持32TB的文件系统和2TB的文件，实际只能容纳2TB的文件系统和16GB的文件</li><li>Ext3目前只支持32000个子目录</li><li>Ext3文件系统使用32位空间记录块数量和 inode数量</li><li>当数据写入到Ext3文件系统中时，Ext3的数据块分配器每次只能分配一个4KB的块</li></ul></li><li><p>EXT4：</p><ul><li>EXT4是Linux系统下的日志文件系统，是EXT3文件系统的后继版本</li><li>Ext4的文件系统容量达到1EB，而支持单个文件则达到16TB</li><li>理论上支持无限数量的子目录</li><li>Ext4文件系统使用64位空间记录块数量</li><li>和 inode数量<br>Ext4的多块分配器支持一次调用分配多个数据块</li><li>修复速度更快</li></ul></li><li><p>XFS</p><ul><li>根据所记录的日志在很短的时间内迅速恢复磁盘文件内容</li><li>用优化算法，日志记录对整体文件操作影响非常小</li><li>是一个全64-bit的文件系统，最大可以支持8EB的文件系统，而支持单个文件则达到8EB</li><li>能以接近裸设备I/O的性能存储数据</li></ul></li><li><p>查前支持的文件系统：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">cat /proc/filesystems<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-4-创建文件系统和挂载"><a href="#4-4-创建文件系统和挂载" class="headerlink" title="4.4. 创建文件系统和挂载"></a>4.4. 创建文件系统和挂载</h2><h3 id="4-4-1-创建文件系统"><a href="#4-4-1-创建文件系统" class="headerlink" title="4.4.1. 创建文件系统"></a>4.4.1. 创建文件系统</h3><ul><li><p>mkfs命令：</p><ul><li>(1) mkfs.FS_TYPE /dev/DEVICE</li><li>ext4</li><li>xfs</li><li>btrfs</li><li>vfat</li><li>(2) mkfs -t FS_TYPE /dev/DEVICE</li><li>-L ‘LABEL’ 设定卷标</li><li>mke2fs：ext系列文件系统专用管理工具</li></ul></li><li><p>常用选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs http">-t &#123;ext2|ext3|ext4|xfs&#125; 指定文件系统类型<br>-b &#123;1024|2048|4096&#125; 指定块 block 大小<br>-L ‘LABEL’ 设置卷标<br>-j 相当于 -t ext3， mkfs.ext3 = mkfs -t ext3 = mke2fs -j = mke2fs -t ext3<br>-i # 为数据空间中每多少个字节创建一个inode；不应该小于block大<br>小<br>-N # 指定分区中创建多少个inode<br>-I 一个inode记录占用的磁盘空间大小，128---4096<br>-m # 默认5%,为管理人员预留空间占总空间的百分比<br>-O FEATURE[,...] 启用指定特性<br>-O ^FEATURE<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-4-2-挂载文件系统-mount"><a href="#4-4-2-挂载文件系统-mount" class="headerlink" title="4.4.2. 挂载文件系统 mount"></a>4.4.2. 挂载文件系统 mount</h3><ul><li><p>格式</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">mount [-fnrsvw] [-t vfstype] [-o options] device mountpoint<br></code></pre></td></tr></table></figure></li><li><p>device：指明要挂载的设备</p><ul><li>设备文件：例如:/dev/sda5</li><li>卷标：-L ‘LABEL’, 例如 -L ‘MYDATA’</li><li>UUID： -U ‘UUID’：例如 -U ‘0c50523c-43f1-45e7-85c0-a126711d406e’</li><li>伪文件系统名称：proc, sysfs, devtmpfs, configfs</li></ul></li><li><p>mountpoint：挂载点目录必须事先存在，建议使用空目录</p></li><li><p>mount 常用命令选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs http">-t fstype 指定要挂载的设备上的文件系统类型,如:ext4,xfs<br>-r readonly，只读挂载<br>-w read and write, 读写挂载,此为默认设置,可省略<br>-n 不更新/etc/mtab，mount不可见<br>-a 自动挂载所有支持自动挂载的设备(定义在了/etc/fstab文件中，且挂载选项中有<br>auto功能)<br>-L &#x27;LABEL&#x27; 以卷标指定挂载设备<br>-U &#x27;UUID&#x27; 以UUID指定要挂载的设备<br>-B, --bind 绑定目录到另一个目录上<br>-o options：(挂载文件系统的选项)，多个选项使用逗号分隔<br>async 异步模式,内存更改时,写入缓存区buffer,过一段时间再写到磁盘中，效率高，但不安全<br>sync 同步模式,内存更改时，同时写磁盘，安全，但效率低下<br>atime/noatime 包含目录和文件<br>diratime/nodiratime 目录的访问时间戳<br>auto/noauto 是否支持开机自动挂载，是否支持-a选项<br>exec/noexec 是否支持将文件系统上运行应用程序<br>dev/nodev 是否支持在此文件系统上使用设备文件<br>suid/nosuid 是否支持suid和sgid权限<br>remount 重新挂载<br>ro/rw 只读、读写<br>user/nouser 是否允许普通用户挂载此设备，/etc/fstab使用<br>acl/noacl 启用此文件系统上的acl功能<br>loop 使用loop设备<br>_netdev 当网络可用时才对网络资源进行挂载，如：NFS文件系统<br>defaults 相当于rw, suid, dev, exec, auto, nouser, async<br></code></pre></td></tr></table></figure></li><li><p>挂载规则:</p><ul><li>一个挂载点同一时间只能挂载一个设备</li><li>一个挂载点同一时间挂载了多个设备，只能看到最后一个设备的数据，其它设</li><li>备上的数据将被隐藏</li><li>一个设备可以同时挂载到多个挂载点</li><li>通常挂载点一般是已存在空的目录</li></ul></li></ul><h2 id="4-5-永久挂载和swap管理"><a href="#4-5-永久挂载和swap管理" class="headerlink" title="4.5. 永久挂载和swap管理"></a>4.5. 永久挂载和swap管理</h2><h3 id="4-5-1-持久挂载"><a href="#4-5-1-持久挂载" class="headerlink" title="4.5.1. 持久挂载"></a>4.5.1. 持久挂载</h3><ul><li><p>说明：将挂载保存到 /etc/fstab 中可以下次开机时，自动启用挂载：</p></li><li><p>格式：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs http">man 5 fstab<br>/etc/fstab<br></code></pre></td></tr></table></figure></li><li><p>每行定义一个要挂载的文件系统,，其中包括共 6 项</p><ul><li>要挂载的设备或伪文件系统<ul><li>设备文件</li><li>LABEL：LABEL=””</li><li>UUID：UUID=””</li><li>伪文件系统名称：proc, sysfs</li></ul></li><li>挂载点：必须是事先存在的目录</li><li>文件系统类型：ext4，xfs，iso9660，nfs，none</li><li>挂载选项：defaults ，acl，bind</li><li>转储频率：0：不做备份 1：每天转储 2：每隔一天转储</li><li>fsck检查的文件系统的顺序：允许的数字是0 1 2</li><li>0：不自检 ，1：首先自检；一般只有rootfs才用 2：非rootfs使用</li></ul></li><li><p>添加新的挂载项，需要执行下面命令生效</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">mount -a<br></code></pre></td></tr></table></figure></li><li><p>案例：：centos7, 8 /etc/fstab 的分区UUID错误，无法启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">自动进入emergency mode,输入root 密码<br><span class="hljs-comment">#cat /proc/mounts 可以查看到/ 以rw方式挂载</span><br><span class="hljs-comment">#vim /etc/fstab</span><br><span class="hljs-comment">#reboot</span><br></code></pre></td></tr></table></figure></li><li><p>案例2：centos 6 /etc/fstab 的分区UUID错误，无法启动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">如果/etc/fstab 的挂载设备出错，比如文件系统故障，并且文件系统检测项（即第6项为非0），将导致无<br>法启动<br>自动进入emergency mode,输入root 密码<br><span class="hljs-comment">#cat /proc/mounts 可以查看到/ 以ro方式挂载，无法直接修改配置文件</span><br><span class="hljs-comment">#mount -o remount,rw /</span><br><span class="hljs-comment">#vim /etc/fstab</span><br>将故障行的最后1项，即第6项修改为0，开机不检测此项挂载设备的健康性，从而忽略错误，能实现启动<br></code></pre></td></tr></table></figure></li><li><p>案例3：/etc/fstab格式</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /etc/fstab</span><br>UUID=cb7cae1e-d227-4f64-872b-cd6cce20c911 /data/mysql ext4 noatime<br>0 0<br>/disk.img /data/disk xfs loop<br>0 0<br>/etc /mnt/etc none <span class="hljs-built_in">bind</span><br>0 0<br>[root@centos6 ~]<span class="hljs-comment">#cat /etc/fstab</span><br>/disk.img /mnt/disk ext4 loop 0 0<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-5-2-swap管理"><a href="#4-5-2-swap管理" class="headerlink" title="4.5.2. swap管理"></a>4.5.2. swap管理</h3><ul><li><p>swap 介绍</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">swap交换分区是系统RAM的补充，swap 分区支持虚拟内存。当没有足够的 RAM 保存系统处理的数据<br>时会将数据写入 swap 分区，当系统缺乏 swap 空间时，内核会因 RAM 内存耗尽而终止进程。配置过多 swap 空间会造成存储设备处于分配状态但闲置，造成浪费，过多 swap 空间还会掩盖内存泄露<br>注意：为优化性能，可以将swap 分布存放，或高性能磁盘存放<br></code></pre></td></tr></table></figure></li><li><p>Redhat 官方推荐推荐系统 swap 空间</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">https://access.redhat.com/documentation/zhcn/<br>red_hat_enterprise_linux/7/html/installation_guide/sect-disk-partitioningsetup-<br>ppc#sect-recommended-partitioning-scheme-ppc<br></code></pre></td></tr></table></figure><p><img src="image-20220808202630521.png" alt="image-20220808202630521"></p></li></ul><h4 id="4-5-2-1-交换分区实现过程"><a href="#4-5-2-1-交换分区实现过程" class="headerlink" title="4.5.2.1. 交换分区实现过程"></a>4.5.2.1. 交换分区实现过程</h4><ol><li>创建交换分区或者文件</li><li>使用mkswap写入特殊签名</li><li>在/etc/fstab文件中添加适当的条目</li><li>使用swapon -a 激活交换空间</li></ol><ul><li><p>启用swap分区</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">swapon [OPTION]... [DEVICE]<br></code></pre></td></tr></table></figure></li><li><p>选项</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs http">-a #激活所有的交换分区<br>-p PRIORITY #指定优先级(-1到32767之间)，值越大,优先级越高.也可在/etc/fstab文件中的第4列指<br>定：pri=value<br></code></pre></td></tr></table></figure></li><li><p>案例1：创建swap分区</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#echo -e &#x27;n\np\n\n\n+2G\nt\n82\nw\n&#x27; | fdisk /dev/sdc</span><br>[root@centos8 ~]<span class="hljs-comment">#mkswap /dev/sdc1</span><br>Setting up swapspace version 1, size = 2 GiB (2147479552 bytes)<br>no label, UUID=d3140a7a-65b7-4cb7-8a2b-12d38aa98c6f<br>[root@centos8 ~]<span class="hljs-comment">#blkid /dev/sdc1</span><br>/dev/sdc1: UUID=<span class="hljs-string">&quot;d3140a7a-65b7-4cb7-8a2b-12d38aa98c6f&quot;</span> TYPE=<span class="hljs-string">&quot;swap&quot;</span><br>PARTUUID=<span class="hljs-string">&quot;b094d43d-01</span><br><span class="hljs-string">[root@centos8 ~]#vim /etc/fstab</span><br><span class="hljs-string">UUID=d3140a7a-65b7-4cb7-8a2b-12d38aa98c6f swap swap defaults 0 0</span><br><span class="hljs-string">[root@centos8 ~]#swapon -a</span><br><span class="hljs-string">[root@centos8 ~]#free -h</span><br><span class="hljs-string">total used free shared buff/cache available</span><br><span class="hljs-string">Mem: 3.7Gi 264Mi 3.2Gi 9.0Mi 261Mi 3.2Gi</span><br><span class="hljs-string">Swap: 4.0Gi 0B 4.0Gi</span><br><span class="hljs-string">[root@centos8 ~]#cat /proc/swaps</span><br><span class="hljs-string">Filename Type Size Used Priority</span><br><span class="hljs-string">/dev/sda5 partition 2097148 0 -2</span><br><span class="hljs-string">/dev/sdc1 partition 2097148 0 -3</span><br></code></pre></td></tr></table></figure></li><li><p>禁用swap分区</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">swapoff [OPTION]... [DEVICE]<br></code></pre></td></tr></table></figure></li><li><p>案例2：禁用swap分区</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#sed -i.bak &#x27;/swap/d&#x27; /etc/fstab</span><br>[root@centos8 ~]<span class="hljs-comment">#swapoff -a</span><br></code></pre></td></tr></table></figure></li><li><p>SWAP的优先级</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">可以指定<span class="hljs-keyword">swap</span>分区<span class="hljs-number">0</span>到<span class="hljs-number">32767</span>的优先级，值越大优先级越高<br>如果用户没有指定，那么核心会自动给<span class="hljs-keyword">swap</span>指定一个优先级，这个优先级从<span class="hljs-number">-1</span>开始，每加入一个新的<br>没有用户指定优先级的<span class="hljs-keyword">swap</span>，会给这个优先级减一<br>先添加的<span class="hljs-keyword">swap</span>的缺省优先级比较高，除非用户自己指定一个优先级，而用户指定的优先级(是正数)永远<br>高于核心缺省指定的优先级(是负数)<br></code></pre></td></tr></table></figure></li><li><p>案例3：修改swap分区的优先级</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#cat /etc/fstab</span><br><span class="hljs-comment">#</span><br>UUID=acf9bd1f-caae-4e28-87be-e53afec61347 / xfs defaults<br>0 0<br>UUID=1770b87e-db5a-445e-bff1-1653ac64b3d6 /boot ext4 defaults<br>1 2<br>UUID=ffffd919-d674-44d9-a4e7-402874f0a1f0 /data xfs defaults<br>0 0<br>UUID=409e36d2-ac5e-423f-ad78-9b12db4576bd swap swap defaults<br>0 0<br>UUID=509ee336-6aec-48b0-b390-12c1f9889520 swap swap pri=100<br>0 0<br></code></pre></td></tr></table></figure></li><li><p>案例4：以文件实现swap功能</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@centos8 ~]<span class="hljs-comment">#dd if=/dev/zero of=/swapfile bs=1M count=1024</span><br>[root@centos8 ~]<span class="hljs-comment">#mkswap /swapfile</span><br>[root@centos8 ~]<span class="hljs-comment">#blkid /swapfile &gt;&gt; /etc/fstab</span><br>[root@centos8 ~]<span class="hljs-comment">#/etc/fstab</span><br>/swapfile swap swap defaults 0 0 <span class="hljs-comment">#不要用</span><br>UUID,使用文件的路径<br>[root@centos8 ~]<span class="hljs-comment">#chmod 600 /swapfile</span><br>[root@centos8 ~]<span class="hljs-comment">#swapon -a</span><br>[root@centos8 ~]<span class="hljs-comment">#swapon -s</span><br>Filename Type Size Used Priority<br>/dev/sda5 partition 2097148 0 -2<br>/swapfile file 1048572 0 -3<br></code></pre></td></tr></table></figure></li></ul><h4 id="4-5-2-2-swap的使用策略"><a href="#4-5-2-2-swap的使用策略" class="headerlink" title="4.5.2.2. swap的使用策略"></a>4.5.2.2. swap的使用策略</h4><ul><li><p>说明：/proc/sys/vm/swappiness 的值决定了当内存占用达到一定的百分比时，会启用swap分区的空间</p></li><li><p>使用规则</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">当内存使用率达到<span class="hljs-number">100</span>-swappiness时,会启用交换分区<br>简单地说这个参数定义了系统对<span class="hljs-keyword">swap</span>的使用倾向，此值越大表示越倾向于使用<span class="hljs-keyword">swap</span>。<br>可以设为<span class="hljs-number">0</span>，这样做并不会禁止对<span class="hljs-keyword">swap</span>的使用，只是最大限度地降低了使用<span class="hljs-keyword">swap</span>的可能性<br></code></pre></td></tr></table></figure></li><li><p>案例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#说明：CentOS7和8默认值为30，内存在使用到100-30=70%的时候，就开始出现有交换分区的使用。</span><br>[root@centos8 ~]<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>30<br>[root@centos7 ~]<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>30<br>[root@centos6 ~]<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>60<br>[root@rhel5 ~]<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>60<br>root@ubuntu2004:~<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>60<br>[root@ubuntu1804 ~]<span class="hljs-comment"># cat /proc/sys/vm/swappiness</span><br>60<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-6-RAID磁盘冗余技术各种级别和实现"><a href="#4-6-RAID磁盘冗余技术各种级别和实现" class="headerlink" title="4.6. RAID磁盘冗余技术各种级别和实现"></a>4.6. RAID磁盘冗余技术各种级别和实现</h2><h3 id="4-6-1-什么是RAID"><a href="#4-6-1-什么是RAID" class="headerlink" title="4.6.1. 什么是RAID"></a>4.6.1. 什么是RAID</h3><ul><li><p>“RAID”一词是由David Patterson, Garth A. Gibson, Randy Katz 于1987年在加州大学伯克利分校发明的.当时性能最好的大型机不断增长的个人电脑市场开发的一系列廉价驱动器的性能所击败。尽管故障与驱动器数量的比例会上升，但通过配置冗余，阵列的可靠性可能远远超过任何大型单个驱动器的可靠性。</p></li><li><p>独立硬盘冗余阵列（RAID, Redundant Array of Independent Disks），旧称廉价磁盘冗余阵列（Redundant Array of Inexpensive Disks），简称磁盘阵列。利用虚拟化存储技术把多个硬盘组合起来，成为一个或多个硬盘阵列组，目的为提升性能或数据冗余，或是两者同时提升.</p></li><li><p>RAID 层级不同，数据会以多种模式分散于各个硬盘，RAID 层级的命名会以 RAID 开头并带数字，例如：RAID 0、RAID 1、RAID 5、RAID 6、RAID 7、RAID 01、RAID 10、RAID 50、RAID 60。每种等级都有其理论上的优缺点，不同的等级在两个目标间获取平衡，分别是增加数据可靠性以及增加存储器（群）读写性能。</p></li><li><p>RAID功能实现</p><ul><li>提高IO能力,磁盘并行读写</li><li>提高耐用性,磁盘冗余算法来实现</li></ul></li><li><p>RAID实现的方式</p><ul><li>外接式磁盘阵列：通过扩展卡提供适配能力</li><li>内接式RAID：主板集成RAID控制器，安装OS前在BIOS里配置</li><li>软件RAID：通过OS实现，比如：群晖的NAS</li></ul></li></ul><h3 id="4-6-2-RAID级别"><a href="#4-6-2-RAID级别" class="headerlink" title="4.6.2. RAID级别"></a>4.6.2. RAID级别</h3><ul><li><p>说明</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs subunit">RAID<span class="hljs-string">-0</span>：条带卷，strip<br>RAID<span class="hljs-string">-1</span>：镜像卷，mirror<br>RAID<span class="hljs-string">-2</span><br>......<br>RAID<span class="hljs-string">-5</span><br>RAID<span class="hljs-string">-6</span><br>RAID<span class="hljs-string">-7</span><br>RAID<span class="hljs-string">-10</span><br>RAID<span class="hljs-string">-01</span><br>RAID<span class="hljs-string">-50</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="4-6-2-1-RAID-0"><a href="#4-6-2-1-RAID-0" class="headerlink" title="4.6.2.1. RAID-0"></a>4.6.2.1. RAID-0</h4><ul><li><p>说明</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">以 chunk 单位,读写数据,因为读写时都可以并行处理，所以在所有的级别中，RAID <span class="hljs-number">0</span>的速度是最快的。但是RAID <span class="hljs-number">0</span>既没有冗余功能，也不具备容错能力，如果一个磁盘（物理）损坏，所有数据都会丢失读、写性能提升可用空间：N*min(<span class="hljs-built_in">S1</span>,<span class="hljs-built_in">S2</span>,...)无容错能力最少磁盘数：<span class="hljs-number">1</span>+<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204528987.png" alt="image-20220808204528987"></p></li></ul><h4 id="RAID-1"><a href="#RAID-1" class="headerlink" title="RAID-1"></a>RAID-1</h4><ul><li><p>说明</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">也称为镜像, 两组以上的N个磁盘相互作镜像，在一些多线程操作系统中能有很好的读取速度，理论上读取速度等于硬盘数量的倍数，与RAID <span class="hljs-number">0</span>相同。另外写入速度有微小的降低。读性能提升、写性能略有下降可用空间：<span class="hljs-number">1</span>*min(<span class="hljs-built_in">S1</span>,<span class="hljs-built_in">S2</span>,...)、磁盘利用率、<span class="hljs-number">50</span>%有冗余能力、最少磁盘数：<span class="hljs-number">2</span>+<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204519244.png" alt="image-20220808204519244"></p></li></ul><h4 id="4-6-2-2-RAID-4"><a href="#4-6-2-2-RAID-4" class="headerlink" title="4.6.2.2. RAID-4"></a>4.6.2.2. RAID-4</h4><ul><li><p>说明</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">多块数据盘异或运算值存于专用校验盘<br>磁盘利用率 (<span class="hljs-built_in">N</span>-<span class="hljs-number">1</span>)/<span class="hljs-built_in">N</span><br>有冗余能力<br>至少<span class="hljs-number">3</span>块硬盘才可以实现<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204506716.png" alt="image-20220808204506716"></p></li></ul><h4 id="4-6-2-3-RAID-5"><a href="#4-6-2-3-RAID-5" class="headerlink" title="4.6.2.3. RAID-5"></a>4.6.2.3. RAID-5</h4><ul><li><p>说明</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs scss">读、写性能提升<br>可用空间：(N-<span class="hljs-number">1</span>)*<span class="hljs-built_in">min</span>(S1,S2,...)<br>有容错能力：允许最多<span class="hljs-number">1</span>块磁盘损坏<br>最少磁盘数：<span class="hljs-number">3</span>, <span class="hljs-number">3</span>+<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204455966.png" alt="image-20220808204455966"></p></li></ul><h4 id="4-6-2-4-RAID-6"><a href="#4-6-2-4-RAID-6" class="headerlink" title="4.6.2.4. RAID-6"></a>4.6.2.4. RAID-6</h4><ul><li><p>说明</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">双份校验位,算法更复杂<br>读、写性能提升<br>可用空间：(N-<span class="hljs-number">2</span>)*<span class="hljs-built_in">min</span>(S1,S2,...)<br>有容错能力：允许最多<span class="hljs-number">2</span>块磁盘损坏<br>最少磁盘数：<span class="hljs-number">4</span>, <span class="hljs-number">4</span>+<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204332052.png" alt="image-20220808204332052"></p></li></ul><h4 id="4-6-2-5-RAID-10"><a href="#4-6-2-5-RAID-10" class="headerlink" title="4.6.2.5. RAID-10"></a>4.6.2.5. RAID-10</h4><ul><li><p>说明</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs armasm">读、写性能提升<br>可用空间：N*min(<span class="hljs-built_in">S1</span>,<span class="hljs-built_in">S2</span>,...)/<span class="hljs-number">2</span><br>有容错能力：每组镜像最多只能坏一块<br>最少磁盘数：<span class="hljs-number">4</span>, <span class="hljs-number">4</span>+<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204444295.png" alt="image-20220808204444295"></p></li></ul><h4 id="4-6-2-6-RAID-01"><a href="#4-6-2-6-RAID-01" class="headerlink" title="4.6.2.6. RAID-01"></a>4.6.2.6. RAID-01</h4><ul><li><p>说明</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">多块磁盘先实现RAID0,再组合成RAID1<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204627603.png" alt="image-20220808204627603"></p></li></ul><h4 id="4-6-2-7-RAID-50"><a href="#4-6-2-7-RAID-50" class="headerlink" title="4.6.2.7. RAID-50"></a>4.6.2.7. RAID-50</h4><ul><li><p>说明</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">多块磁盘先实现RAID5,再组合成RAID0<br></code></pre></td></tr></table></figure></li><li><p>结构</p><p><img src="image-20220808204707557.png" alt="image-20220808204707557"></p></li></ul><h4 id="4-6-2-8-RAID-60"><a href="#4-6-2-8-RAID-60" class="headerlink" title="4.6.2.8. RAID-60"></a>4.6.2.8. RAID-60</h4><ul><li><p>结构</p><p><img src="image-20220808204750255.png" alt="image-20220808204750255"></p></li></ul><h3 id="4-6-3-RAID-总结"><a href="#4-6-3-RAID-总结" class="headerlink" title="4.6.3. RAID 总结"></a>4.6.3. RAID 总结</h3><ul><li><p>常用级别：RAID-0, RAID-1, RAID-5, RAID-10, RAID-50,RAID-60</p><p><img src="image-20220808204844236.png" alt="image-20220808204844236"></p></li><li><p>磁盘阵列比较表</p></li></ul><p><img src="image-20220808205033306.png" alt="image-20220808205033306"></p><h2 id="4-7-逻辑卷快照管理"><a href="#4-7-逻辑卷快照管理" class="headerlink" title="4.7. 逻辑卷快照管理"></a>4.7. 逻辑卷快照管理</h2><h3 id="4-7-1-逻辑卷快照原理"><a href="#4-7-1-逻辑卷快照原理" class="headerlink" title="4.7.1. 逻辑卷快照原理"></a>4.7.1. 逻辑卷快照原理</h3><ul><li><p>说明</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">快照是特殊的逻辑卷，它是在生成快照时存在的逻辑卷的准确拷贝,对于需要备份或者复制的现有数据临时拷贝以及其它操作来说，快照是最合适的选择,快照只有在它们和原来的逻辑卷不同时才会消耗空间，建立快照的卷大小小于等于原始逻辑卷,也可以使用lvextend扩展快照<br>逻辑卷管理器快照<br>快照就是将当时的系统信息记录下来，就好像照相一般，若将来有任何数据改动了，则原始数据会被移动到快照区，没有改动的区域则由快照区和文件系统共享<br></code></pre></td></tr></table></figure></li><li><p>逻辑卷快照工作原理</p><ul><li>在生成快照时会分配给它一定的空间，但只有在原来的逻辑卷或者快照有所改变才会使用这些空间</li><li>当原来的逻辑卷中有所改变时，会将旧的数据复制到快照中</li><li>快照中只含有原来的逻辑卷中更改的数据或者自生成快照后的快照中更改的数据</li></ul></li><li><p>快照特点</p><ul><li>备份速度快，瞬间完</li><li>应用场景是测试环境，不能完成代替备份</li><li>快照后，逻辑卷的修改速度会一定有影响</li></ul></li></ul><h3 id="4-7-2-实现逻辑卷快照"><a href="#4-7-2-实现逻辑卷快照" class="headerlink" title="4.7.2. 实现逻辑卷快照"></a>4.7.2. 实现逻辑卷快照</h3><ul><li><p>范例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh">mkfs.xfs /dev/vg0/data<br>mount /dev/vg0/data/ /mnt/data<br><span class="hljs-comment">#为现有逻辑卷创建快照,注意ext4建议使用-p r 实现只读</span><br>lvcreate -l 64 -s -n data-snapshot /dev/vg0/data<br><span class="hljs-comment">#挂载快照,xfs注意要使用-o ro实现只读,防止快照被修改</span><br><span class="hljs-built_in">mkdir</span> -p /mnt/snap<br>mount -o ro,nouuid /dev/vg0/data-snapshot /mnt/snap<br><span class="hljs-comment">#恢复快照</span><br>umount /dev/vg0/data-snapshot<br>umount /dev/vg0/data<br>lvconvert --merge /dev/vg0/data-snapshot<br><span class="hljs-comment">#删除快照</span><br>umount /mnt/snap<br>lvremove /dev/vg0/data-snapshot<br></code></pre></td></tr></table></figure></li><li></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Jira安装教程</title>
    <link href="/2022/08/02/Jira%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
    <url>/2022/08/02/Jira%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h1><ul><li><p>数据库：mysql5.7.37</p><figure class="highlight http"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs http">https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.37-1.el7.x86_64.rpm-bundle.tar<br></code></pre></td></tr></table></figure></li><li><p>下载MYSQL数据库连接JDBC驱动</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://mirrors.aliyun.com/mysql/Connector-ODBC/8.0/mysql-connector-odbc-8.0.22-1.el8.x86_64.rpm<br></code></pre></td></tr></table></figure></li><li><p>下载mysql连接jar包</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar<br></code></pre></td></tr></table></figure></li><li><p>下载破解包</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://zhile.io/2018/12/20/atlassian-license-crack.html<br></code></pre></td></tr></table></figure></li><li><p>下载jira包</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://www.atlassian.com/software/jira/update<br></code></pre></td></tr></table></figure><p><img src="image-20220803155623863.png" alt="image-20220803155623863"></p></li></ul><h1 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h1><h2 id="安装mysql5-7-37"><a href="#安装mysql5-7-37" class="headerlink" title="安装mysql5.7.37"></a>安装mysql5.7.37</h2><ol><li><p>解压安装包到mysql目录下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar xf mysql-5.7.36-1.el7.x86_64.rpm-bundle.tar  -C ./mysql/<br></code></pre></td></tr></table></figure></li><li><p>yum安装mysql数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install ./mysql/*<br></code></pre></td></tr></table></figure></li><li><p>获取mysql数据库密码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">grep <span class="hljs-string">&#x27;temporary password&#x27;</span> /var/log/mysqld.log 获取数据库密码<br></code></pre></td></tr></table></figure></li><li><p>配置数据库mysqld</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#在/etc/my.cnf</span><br>default-storage-engine=INNODB<br>character_set_server=utf8mb4<br>innodb_default_row_format=DYNAMIC<br>innodb_large_prefix=ON<br>innodb_file_format=Barracuda<br>innodb_log_file_size=2G<br><span class="hljs-comment">#删除下列参数：</span><br>sql_mode = NO_AUTO_VALUE_ON_ZERO<br></code></pre></td></tr></table></figure></li><li><p>启动mysql数据库服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">systemctl start mysqld<br></code></pre></td></tr></table></figure></li><li><p>访问数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql -uroot -p <br></code></pre></td></tr></table></figure></li><li><p>修改密码安全策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set global validate_password_policy=0;<br>set global validate_password_length=1;<br></code></pre></td></tr></table></figure></li><li><p>修改数据库密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">set password for root@localhost=password(&#x27;123456&#x27;);<br></code></pre></td></tr></table></figure></li><li><p>创建jira数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE DATABASE jira CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;<br></code></pre></td></tr></table></figure></li><li><p>授权jira数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql"># MySQL 5.7.0 - 5.7.5:⽤下⾯语句<br>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,INDEX on jira.* TO &#x27;jira&#x27;@&#x27;%&#x27;<br>IDENTIFIED BY &#x27;jirapasswd&#x27;;<br># MySQL 5.7.6 and later (must also include the REFERENCES permission): ⽤下⾯语句<br>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,REFERENCES,ALTER,INDEX on jira.* TO<br>&#x27;jira&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;jirapasswd&#x27;;<br>flush privileges;<br></code></pre></td></tr></table></figure></li><li><p>安装MYSQL数据库连接JDBC驱动</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install ./mysql-connector-odbc-8.0.30-1.el8.x86_64.rpm  -y<br></code></pre></td></tr></table></figure></li></ol><h2 id="安装jira"><a href="#安装jira" class="headerlink" title="安装jira"></a>安装jira</h2><ol><li><p>jira二进制包赋予执行权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> +x atlassian-jira-software-9.1.0-x64.bin<br></code></pre></td></tr></table></figure></li><li><p>执行安装包</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">./atlassian-jira-software-9.1.0-x64.bin <br></code></pre></td></tr></table></figure><p>注意：执行过程中提示enter回车或按y即可</p></li><li><p>复制mysql连接jar包以及授权</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cp</span> mysql-connector-java-8.0.28.jar /opt/atlassian/jira/atlassian-jira/WEB-INF/lib/<br><br><span class="hljs-built_in">chmod</span> 644 /opt/atlassian/jira/atlassian-jira/WEB-INF/lib/mysql-connector-java-8.0.28.jar<br></code></pre></td></tr></table></figure></li><li><p>破解包agent /home/jira⽬录下</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cp</span> atlassian-agent.jar /home/jira/<br></code></pre></td></tr></table></figure></li><li><p>配置setenv</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim /opt/atlassian/jira/bin/setenv.sh<br><span class="hljs-comment">#追加命令行</span><br><span class="hljs-built_in">export</span> JAVA_OPTS=<span class="hljs-string">&quot;-javaagent:/home/jira/atlassian-agent.jar <span class="hljs-variable">$&#123;JAVA_OPTS&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>启动jira</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/opt/</span>atlassian<span class="hljs-regexp">/jira/</span>bin/start-jira.sh<br></code></pre></td></tr></table></figure></li></ol><h2 id="初始化配置jira"><a href="#初始化配置jira" class="headerlink" title="初始化配置jira"></a>初始化配置jira</h2><ol><li><p>停用防火墙</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">systemctl stop firewalld.service<br>systemctl <span class="hljs-built_in">disable</span> firewalld.service<br></code></pre></td></tr></table></figure></li><li><p>访问网站，默认端口为8080</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">http://192.168.100.30:8080<br></code></pre></td></tr></table></figure></li><li><p>页面配置页面截图</p><ul><li>选择我将设置它自己——》下一步</li></ul><p><img src="image-20220804004509850.png" alt="image-20220804004509850"></p><ul><li><p>输入数据库连接相关配置，点击测试连接成功后，——》下一步</p><p><img src="image-20220804005813922.png" alt="image-20220804005813922"></p></li><li><p>下一步</p><p><img src="image-20220804010657269.png" alt="image-20220804010657269"></p></li><li><p>激活jira</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">这⾥主要是试⽤激活程序 agent<br>参数说明：<br>-m ：指定邮箱<br>-n ：授权给的⽤户，默认同邮箱地址<br>-o ：组织<br>-p ：需要获取key的产品, jira为Jira Software;jc为jira Core的缩写<br>-s ：服务器 ID<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#获取jira的激活码</span><br>java -jar atlassian-agent.jar -p jira -m 1024320609@qq.com -n 1024320609@qq.com -o myjira -s BV4N-CTSC-C846-TZFK<br><span class="hljs-comment">#获取jc的激活码</span><br>java -jar atlassian-agent.jar -p jc -m 1024320609@qq.com -n 1024320609@qq.com -o magedu -s<br>BV4N-CTSC-C846-TZFK<br></code></pre></td></tr></table></figure></li><li><p>把激活码粘贴只文本框——》下一步</p><p><img src="image-20220804014145859.png" alt="image-20220804014145859"></p></li><li><p>输入管理员账号相关信息及账号密码</p><p><img src="image-20220804014849532.png" alt="image-20220804014849532"></p></li><li><p>点击完成</p><p><img src="image-20220804015022817.png" alt="image-20220804015022817"></p></li><li><p>默认中文，点击continue</p><p><img src="image-20220804015735807.png" alt="image-20220804015735807"></p></li><li><p>选择头像——》下一步</p><p><img src="image-20220804015825596.png" alt="image-20220804015825596"></p></li><li><p>jira安装完成</p><p><img src="image-20220804015920331.png" alt="image-20220804015920331"></p></li></ul></li></ol><h1 id="卸载jira"><a href="#卸载jira" class="headerlink" title="卸载jira"></a>卸载jira</h1><p>停⽌jira服务 /opt/atlassian/jira/bin/shutdown.sh<br>运⾏卸载程序 bash /opt/atlassian/jira/uninstall<br>删除⽬录，删除⽤户</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/opt/</span>atlassian/jira<br>rm -rf <span class="hljs-regexp">/var/</span>atlassian<span class="hljs-regexp">/application-data/</span>jira<br>userdel -r jira<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Centos8系统文件丢失，无法正常启动修改办法</title>
    <link href="/2022/08/02/Centos8%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%90%AF%E5%8A%A8%E4%BF%AE%E6%94%B9%E5%8A%9E%E6%B3%95/"/>
    <url>/2022/08/02/Centos8%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E4%B8%A2%E5%A4%B1%EF%BC%8C%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%90%AF%E5%8A%A8%E4%BF%AE%E6%94%B9%E5%8A%9E%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h1 id="故障说明"><a href="#故障说明" class="headerlink" title="故障说明"></a>故障说明</h1><ul><li>电脑或服务器突然断电导致系统文件丢失或损坏需进行修复。</li></ul><p><img src="image-20220802100626203.png" alt="image-20220802100626203"></p><h1 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h1><ul><li>VMware® Workstation 16 Pro</li><li>镜像CentOS-8.5.2111-x86_64-dvd1.iso</li></ul><h1 id="修复步骤"><a href="#修复步骤" class="headerlink" title="修复步骤"></a>修复步骤</h1><ul><li><p>添加光盘进行</p><img src="Centos8系统文件丢失，无法正常启动修改办法/image-20220802101355666.png" alt="image-20220802101355666" style="zoom:50%;" /></li><li><p>系统开机按Esc键，出现启动菜单，选择第3项</p><p><img src="image-20220802101516712.png" alt="image-20220802101516712"></p></li><li><p>选择：Troubleshooting</p><p><img src="image-20220802101625660.png" alt="image-20220802101625660"></p></li><li><p>选择：Rescue a Centos Linux system</p><p><img src="image-20220802101723571.png" alt="image-20220802101723571"></p></li><li><p>选择：1) Continue</p><img src="Centos8系统文件丢失，无法正常启动修改办法/image-20220802102109402.png" alt="image-20220802102109402" style="zoom: 80%;" /></li><li><p>enter回车</p><p><img src="image-20220802103759052.png" alt="image-20220802103759052"></p></li><li><p>centos8系统根目录在 /mnt/sysroot目录下，cd /mnt/sysroot</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>第一周作业</title>
    <link href="/2022/07/31/%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BD%9C%E4%B8%9A/"/>
    <url>/2022/07/31/%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1 id="图文并茂解释开源许可证-GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？"><a href="#图文并茂解释开源许可证-GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？" class="headerlink" title="图文并茂解释开源许可证 GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？"></a>图文并茂解释开源许可证 GPL、BSD、MIT、Mozilla、Apache和LGPL的区别？</h1><p><img src="https://pic1.zhimg.com/80/v2-199ddf45ef6b7ee2d7b01ed3c3032b50_720w.jpg" alt="img"></p><h2 id="GPL协议"><a href="#GPL协议" class="headerlink" title="GPL协议"></a>GPL协议</h2><ul><li>GPL协议和BSD, Apache Licence等鼓励代码重用的许可很不一样。GPL的出发点是代码的开源/免费使用和引用/修改/衍生代码的开源/免费使用，但不允许修改后和衍生的代码做为闭源的商业软件发布和销售。包括商业公司的linux和linux上各种各样的由个人，组织，以及商业软件公司开发的免费软件了。</li><li>GPL协议的主要内容是只要在一个软件中使用(”使用”指类库引用，修改后的代码或者衍生代码)GPL 协议的产品，则该软件产品必须也采用GPL协议，既必须也是开源和免费。这就是所谓的”传染性”。GPL协议的产品作为一个单独的产品使用没有任何问题，还可以享受免费的优势。</li><li>由于GPL严格要求使用了GPL类库的软件产品必须使用GPL协议，对于使用GPL协议的开源代码，商业软件或者对代码有保密要求的部门就不适合集成/采用作为类库和二次开发的基础。</li><li></li></ul><h2 id="BSD协议"><a href="#BSD协议" class="headerlink" title="BSD协议"></a><strong>BSD协议</strong></h2><ul><li>BSD开源协议是一个给于使用者很大自由的协议。基本上使用者可以”为所欲为”,可以自由的使用，修改源代码，也可以将修改后的代码作为开源或者专有软件再发布。但”为所欲为”的前提当你发布使用了BSD协议的代码，或则以BSD协议代码为基础做二次开发自己的产品时，需要满足三个条件：<ul><li>如果再发布的产品中包含源代码，则在源代码中必须带有原来代码中的BSD协议。</li><li>如果再发布的只是二进制类库/软件，则需要在类库/软件的文档和版权声明中包含原来代码中的BSD协议。</li><li>不可以用开源代码的作者/机构名字和原来产品的名字做市场推广。</li></ul></li><li>BSD 代码鼓励代码共享，但需要尊重代码作者的著作权。BSD由于允许使用者修改和重新发布代码，也允许使用或在BSD代码上开发商业软件发布和销售，因此是对商业集成很友好的协议。而很多的公司企业在选用开源产品的时候都首选BSD协议，因为可以完全控制这些第三方的代码，在必要的时候可以修改或者二次开发。</li></ul><h2 id="MIT协议"><a href="#MIT协议" class="headerlink" title="MIT协议"></a>MIT协议</h2><ul><li>MIT是和BSD一样宽范的许可协议,作者只想保留版权,而无任何其他了限制.也就是说,你必须在你的发行版里包含原许可协议的声明,无论你是以二进制发布的还是以源代码发布的.</li></ul><h2 id="Mozilla协议"><a href="#Mozilla协议" class="headerlink" title="Mozilla协议"></a>Mozilla协议</h2><ul><li>简称MPL协议。1998年初Netscape的 Mozilla小组为其开源软件项目设计的软件许可证。MPL许可证出现的最重要原因就是，Netscape公司认为GPL许可证没有很好地平衡开发者对源代码的需求和他们利用源代码获得的利益。同著名的GPL许可证和BSD许可证相比，MPL在许多权利与义务的约定方面与它们相同（因为都是符合OSIA 认定的开源软件许可证）。但是，相比而言MPL还有以下几个显著的不同之处:<ul><li>MPL虽然要求对于经MPL许可证发布的源代码的修改也要以MPL许可证的方式再许可出来，以保证其他人可以在MPL的条款下共享源代码。但是，在MPL 许可证中对“发布”的定义是“以源代码方式发布的文件”，这就意味着MPL允许一个企业在自己已有的源代码库上加一个接口，除了接口程序的源代码以MPL 许可证的形式对外许可外，源代码库中的源代码就可以不用MPL许可证的方式强制对外许可。这些，就为借鉴别人的源代码用做自己商业软件开发的行为留了一个豁口。</li><li>MPL许可证第三条第7款中允许被许可人将经过MPL许可证获得的源代码同自己其他类型的代码混合得到自己的软件程序。</li><li>对软件专利的态度，MPL许可证不像GPL许可证那样明确表示反对软件专利，但是却明确要求源代码的提供者不能提供已经受专利保护的源代码（除非他本人是专利权人，并书面向公众免费许可这些源代码），也不能在将这些源代码以开放源代码许可证形式许可后再去申请与这些源代码有关的专利。</li><li>对源代码的定义：而在MPL（1.1版本）许可证中，对源代码的定义是:“源代码指的是对作品进行修改最优先择取的形式，它包括:所有模块的所有源程序，加上有关的接口的定义，加上控制可执行作品的安装和编译的‘原本’（原文为‘Script’），或者不是与初始源代码显著不同的源代码就是被源代码贡献者选择的从公共领域可以得到的程序代码。”</li><li>MPL许可证第3条有专门的一款是关于对源代码修改进行描述的规定，就是要求所有再发布者都得有一个专门的文件就对源代码程序修改的时间和修改的方式有描述。</li></ul></li></ul><h2 id="Apache协议"><a href="#Apache协议" class="headerlink" title="Apache协议"></a>Apache协议</h2><ul><li>Apache Licence是著名的非盈利开源组织Apache采用的协议。该协议和BSD类似，同样鼓励代码共享和尊重原作者的著作权，同样允许代码修改，再发布（作为开源或商业软件）。需要满足的条件也和BSD类似：<ul><li>需要给代码的用户一份Apache Licence</li><li>如果你修改了代码，需要再被修改的文件中说明。</li><li>在延伸的代码中（修改和有源代码衍生的代码中）需要带有原来代码中的协议，商标，专利声明和其他原来作者规定需要包含的说明。</li><li>如果再发布的产品中包含一个Notice文件，则在Notice文件中需要带有Apache Licence。你可以在Notice中增加自己的许可，但不可以表现为对Apache Licence构成更改。</li></ul></li><li>Apache Licence也是对商业应用友好的许可。使用者也可以在需要的时候修改代码来满足需要并作为开源或商业产品发布/销售。</li></ul><h2 id="LGPL协议"><a href="#LGPL协议" class="headerlink" title="LGPL协议"></a>LGPL协议</h2><ul><li>LGPL是GPL的一个为主要为类库使用设计的开源协议。和GPL要求任何使用/修改/衍生之GPL类库的的软件必须采用GPL协议不同。LGPL 允许商业软件通过类库引用(link)方式使用LGPL类库而不需要开源商业软件的代码。这使得采用LGPL协议的开源代码可以被商业软件作为类库引用并发布和销售。</li><li>但是如果修改LGPL协议的代码或者衍生，则所有修改的代码，涉及修改部分的额外代码和衍生的代码都必须采用LGPL协议。因此LGPL协议的开源代码很适合作为第三方类库被商业软件引用，但不适合希望以LGPL协议代码为基础，通过修改和衍生的方式做二次开发的商业软件采用。</li><li>GPL/LGPL都保障原作者的知识产权，避免有人利用开源代码复制并开发类似的产品</li></ul><h1 id="安装各发行版系统的安装-centos-rockylinux-ubuntu-等"><a href="#安装各发行版系统的安装-centos-rockylinux-ubuntu-等" class="headerlink" title="安装各发行版系统的安装(centos, rockylinux, ubuntu, 等)"></a>安装各发行版系统的安装(centos, rockylinux, ubuntu, 等)</h1><h2 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h2><h3 id="系统镜像下载路径"><a href="#系统镜像下载路径" class="headerlink" title="系统镜像下载路径"></a>系统镜像下载路径</h3><ul><li><p>Centos发行版本</p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos/</span> <span class="hljs-comment">#阿里云源</span><br>http:<span class="hljs-regexp">//mi</span>rrors.sohu.com<span class="hljs-regexp">/centos/</span><span class="hljs-comment">#豆瓣源</span><br>http:<span class="hljs-regexp">//mi</span>rrors.<span class="hljs-number">163</span>.com<span class="hljs-regexp">/centos/</span><span class="hljs-comment">#163源</span><br></code></pre></td></tr></table></figure><p>示例</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos/</span><span class="hljs-number">8</span><span class="hljs-regexp">/isos/</span>x86_64/?spm=a2c6h.<span class="hljs-number">25603864.0</span>.<span class="hljs-number">0.53</span>d31ce4yWjPMM<br></code></pre></td></tr></table></figure><p><img src="image-20220731131101226.png" alt="image-20220731131101226"></p></li><li><p>rockylinux发行版本</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/rockylinux/</span> <span class="hljs-comment">#阿里云源</span><br>http:<span class="hljs-regexp">//mi</span>rrors.<span class="hljs-number">163</span>.com<span class="hljs-regexp">/rocky/</span><span class="hljs-comment">#163源</span><br></code></pre></td></tr></table></figure><p>示例</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/rockylinux/</span><span class="hljs-number">8</span><span class="hljs-regexp">/isos/</span>x86_64/?spm=a2c6h.<span class="hljs-number">25603864.0</span>.<span class="hljs-number">0.2</span>f0d2e074UDwNs<br></code></pre></td></tr></table></figure><p><img src="image-20220731131802044.png" alt="image-20220731131802044"></p></li><li><p>ubuntu发行版</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/oldubuntu-releases/</span><br>http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu-releases/</span><br>http:<span class="hljs-regexp">//</span>cdimage.ubuntu.com<span class="hljs-regexp">/releases/</span><br></code></pre></td></tr></table></figure><p>示例</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://mirrors.aliyun.com/ubuntu-releases/<span class="hljs-number">16</span>.<span class="hljs-number">04</span>/?spm=a2c6h.<span class="hljs-number">25603864</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">75</span>fb4ddaalA5Ck<br></code></pre></td></tr></table></figure><p><img src="image-20220731132749414.png" alt="image-20220731132749414"></p></li></ul><h2 id="VMware®-Workstation-16-Pro"><a href="#VMware®-Workstation-16-Pro" class="headerlink" title="VMware® Workstation 16 Pro"></a>VMware® Workstation 16 Pro</h2><ul><li><p>下载路径</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>www.vmware.com<span class="hljs-regexp">/products/</span>workstation-pro/workstation-pro-evaluation.html<br></code></pre></td></tr></table></figure></li><li><p>vmware16pro许可证密钥最新（出至网络搜索来源）</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ZF3R0</span>-FHED2-M80TY-<span class="hljs-number">8</span>QYGC-NPKYF<br><span class="hljs-attribute">YF390</span>-<span class="hljs-number">0</span>HF8P-M81RQ-<span class="hljs-number">2</span>DXQE-M2UT6<br><span class="hljs-attribute">ZF71R</span>-DMX85-<span class="hljs-number">08</span>DQY-<span class="hljs-number">8</span>YMNC-PPHV8<br></code></pre></td></tr></table></figure></li></ul><p><img src="image-20220731133259714.png" alt="image-20220731133259714"></p><h2 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h2><h3 id="centos8最小化安装"><a href="#centos8最小化安装" class="headerlink" title="centos8最小化安装"></a>centos8最小化安装</h3><ul><li><p>新建虚拟机：ctrl + n </p><p><img src="image-20220731134517181.png" alt="image-20220731134517181"></p></li></ul><p><img src="image-20220731134834172.png" alt="image-20220731134834172"></p><p><img src="image-20220731134547864.png" alt="image-20220731134547864"></p><p><img src="image-20220731134909855.png" alt="image-20220731134909855"></p><p><img src="image-20220731135103192.png" alt="image-20220731135103192"></p><p><img src="image-20220731135123653.png" alt="image-20220731135123653"></p><p><img src="image-20220731135134212.png" alt="image-20220731135134212"></p><p><img src="image-20220731135157024.png" alt="image-20220731135157024"></p><p><img src="image-20220731135207426.png" alt="image-20220731135207426"></p><p><img src="image-20220731135217115.png" alt="image-20220731135217115"></p><p><img src="image-20220731135229489.png" alt="image-20220731135229489"></p><p><img src="image-20220731135301945.png" alt="image-20220731135301945"></p><p><img src="image-20220731135536905.png" alt="image-20220731135536905"></p><p><img src="image-20220731135414737.png" alt="image-20220731135414737"></p><p><img src="image-20220731135449453.png" alt="image-20220731135449453"></p><p><img src="image-20220731135639739.png" alt="image-20220731135639739"></p><p><img src="image-20220731135714723.png" alt="image-20220731135714723"></p><p><img src="image-20220731135734392.png" alt="image-20220731135734392"></p><p><img src="image-20220731135758844.png" alt="image-20220731135758844"></p><p><img src="image-20220731140006016.png" alt="image-20220731140006016"></p><p><img src="image-20220731140109746.png" alt="image-20220731140109746"></p><p><img src="image-20220731140431273.png" alt="image-20220731140431273"></p><p><img src="image-20220731140459471.png" alt="image-20220731140459471"></p><p><img src="image-20220731140538813.png" alt="image-20220731140538813"></p><p><img src="image-20220731140608302.png" alt="image-20220731140608302"></p><p><img src="image-20220731141007583.png" alt="image-20220731141007583"></p><p><img src="image-20220731141028359.png" alt="image-20220731141028359"></p><p><img src="image-20220731141052047.png" alt="image-20220731141052047"></p><p><img src="image-20220731141117000.png" alt="image-20220731141117000"></p><p><img src="image-20220731141146683.png" alt="image-20220731141146683"></p><p><img src="image-20220731141215343.png" alt="image-20220731141215343"></p><p>![(第一周作业/image-20220731141705580.png)</p><p><img src="image-20220731141451427.png" alt="image-20220731141451427"></p><p><img src="%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BD%9C%E4%B8%9A/image-20220731141326647.png"></p><p><img src="image-20220731141732203.png" alt="image-20220731141732203"></p><p><img src="image-20220731141559450.png" alt="image-20220731141559450"></p><p><img src="image-20220731141757967.png" alt="image-20220731141757967"></p><p><img src="image-20220731141846086.png" alt="image-20220731141846086"></p><p><img src="image-20220731141913911.png" alt="image-20220731141913911"></p><p><img src="image-20220731144158825.png" alt="image-20220731144158825"></p><img src="第一周作业/image-20220731194913290.png" alt="image-20220731194913290" style="zoom:50%;" /><h3 id="Ubuntu系统最小安装"><a href="#Ubuntu系统最小安装" class="headerlink" title="Ubuntu系统最小安装"></a>Ubuntu系统最小安装</h3><p><img src="image-20220731185141475.png" alt="image-20220731185141475"></p><p><img src="image-20220731185233269.png" alt="image-20220731185233269"></p><p><img src="image-20220731185248443.png" alt="image-20220731185248443"></p><p><img src="image-20220731185324717.png" alt="image-20220731185324717"></p><p><img src="image-20220731185434716.png" alt="image-20220731185434716"></p><p><img src="image-20220731185453755.png" alt="image-20220731185453755"></p><p><img src="image-20220731185507868.png" alt="image-20220731185507868"></p><p><img src="image-20220731185516318.png" alt="image-20220731185516318"></p><p><img src="image-20220731185533190.png" alt="image-20220731185533190"></p><p><img src="image-20220731185553172.png" alt="image-20220731185553172"></p><p><img src="image-20220731185603014.png" alt="image-20220731185603014"></p><p><img src="image-20220731185618420.png" alt="image-20220731185618420"></p><p><img src="image-20220731185630340.png" alt="image-20220731185630340"></p><p><img src="image-20220731185643324.png" alt="image-20220731185643324"></p><p><img src="image-20220731191834671.png" alt="image-20220731191834671"></p><p><img src="image-20220731191912052.png" alt="image-20220731191912052"></p><p><img src="image-20220731192223651.png" alt="image-20220731192223651"></p><p><img src="image-20220731192443201.png" alt="image-20220731192443201"></p><p><img src="image-20220731192717208.png" alt="image-20220731192717208"></p><p><img src="image-20220731192743976.png" alt="image-20220731192743976"></p><p><img src="image-20220731192803814.png" alt="image-20220731192803814"></p><p><img src="image-20220731192843655.png" alt="image-20220731192843655"></p><p><img src="image-20220731193001412.png" alt="image-20220731193001412"></p><p><img src="image-20220731193404231.png" alt="image-20220731193404231"></p><p><img src="image-20220731193448119.png" alt="image-20220731193448119"></p><p><img src="image-20220731193511863.png" alt="image-20220731193511863"></p><p><img src="image-20220731193531280.png" alt="image-20220731193531280"></p><p><img src="image-20220731193606691.png" alt="image-20220731193606691"></p><p><img src="image-20220731193623970.png" alt="image-20220731193623970"></p><p><img src="image-20220731193658009.png" alt="image-20220731193658009"></p><p><img src="%E7%AC%AC%E4%B8%80%E5%91%A8%E4%BD%9C%E4%B8%9A/image-20220731193807297.png"></p><p><img src="image-20220731193937650.png" alt="image-20220731193937650"></p><p><img src="image-20220731194157751.png" alt="image-20220731194157751"></p><p><img src="image-20220731194224043.png" alt="image-20220731194224043"></p><p><img src="image-20220731194437244.png" alt="image-20220731194437244"></p><p><img src="image-20220731194525385.png" alt="image-20220731194525385"></p><p><img src="image-20220731194541495.png" alt="image-20220731194541495"></p><p><img src="image-20220731194957050.png" alt="image-20220731194957050"></p><p><img src="image-20220731195046509.png" alt="image-20220731195046509"></p><p><img src="image-20220731205701811.png" alt="image-20220731205701811"></p><p><img src="image-20220731205840372.png" alt="image-20220731205840372"></p><h3 id="linuxrocky系统最小化安装"><a href="#linuxrocky系统最小化安装" class="headerlink" title="linuxrocky系统最小化安装"></a>linuxrocky系统最小化安装</h3><p>请参考centos安装步骤</p><h1 id="Linux中总结"><a href="#Linux中总结" class="headerlink" title="Linux中总结"></a>Linux中总结</h1><h2 id="如何通过一个简短的关键字，例如process-获取相关的命令。"><a href="#如何通过一个简短的关键字，例如process-获取相关的命令。" class="headerlink" title="如何通过一个简短的关键字，例如process 获取相关的命令。"></a>如何通过一个简短的关键字，例如process 获取相关的命令。</h2><h3 id="通过type判断关键字是否为内部命令还是外部命令"><a href="#通过type判断关键字是否为内部命令还是外部命令" class="headerlink" title="通过type判断关键字是否为内部命令还是外部命令"></a>通过type判断关键字是否为内部命令还是外部命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:26:55 root@10 ~]<span class="hljs-comment">#type mkdir</span><br><span class="hljs-built_in">mkdir</span> 是 /usr/bin/mkdir<br>[14:27:20 root@10 ~]<span class="hljs-comment">#type ls</span><br><span class="hljs-built_in">ls</span> 是 `<span class="hljs-built_in">ls</span> --color=auto<span class="hljs-string">&#x27; 的别名</span><br><span class="hljs-string">[14:27:59 root@10 ~]#type  type</span><br><span class="hljs-string">type 是 shell 内建</span><br><span class="hljs-string">[14:29:09 root@10 ~]#type  if</span><br><span class="hljs-string">if 是 shell 关键字</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h3 id="内置命令：help-命令"><a href="#内置命令：help-命令" class="headerlink" title="内置命令：help + 命令"></a>内置命令：help + 命令</h3><p><strong>用法</strong>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:29:37 root@10 ~]<span class="hljs-comment">#help type</span><br><span class="hljs-built_in">type</span>: <span class="hljs-built_in">type</span> [-afptP] 名称 [名称 ...]<br>    显示命令类型的信息。<br>    <br>    对于每一个 NAME 名称，指示如果作为命令它将如何被解释。<br>    <br>    选项：<br>      -a显示所有包含名称为 NAME 的可执行文件的位置；<br>    包括别名、内建和函数。仅当 `-p<span class="hljs-string">&#x27; 选项没有使用时</span><br><span class="hljs-string">      -f抑制 shell 函数查询</span><br><span class="hljs-string">      -P为每个 NAME 名称惊醒 PATH 路径搜索，即使它是别名、</span><br><span class="hljs-string">    内建或函数，并且返回将被执行的磁盘上文件的名称。</span><br><span class="hljs-string">      -p返回将被执行的磁盘上文件的名称，或者当 `type -t NAME&#x27;</span><br>    不返回 `file<span class="hljs-string">&#x27; 时，不返回任何值。</span><br><span class="hljs-string">      -t返回下列词中的任何一个 `alias&#x27;</span>、`keyword<span class="hljs-string">&#x27;、</span><br><span class="hljs-string">    `function&#x27;</span>、`<span class="hljs-built_in">builtin</span><span class="hljs-string">&#x27;、`file&#x27;</span> 或者 `<span class="hljs-string">&#x27;，相应地如果 NAME 是</span><br><span class="hljs-string">    一个别名、shell 保留字、shell 函数、shell 内建、</span><br><span class="hljs-string">    磁盘文件或没有找到。</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    参数：</span><br><span class="hljs-string">      NAME将要解析的命令。</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    退出状态：</span><br><span class="hljs-string">    如果所有的 NAME 命令都找到则返回成功；任何一个找不到则失败。</span><br></code></pre></td></tr></table></figure><h3 id="外部命令：命令-h-–help-或-man-命令"><a href="#外部命令：命令-h-–help-或-man-命令" class="headerlink" title="外部命令：命令 + -h/–help 或 man + 命令"></a>外部命令：命令 + -h/–help 或 man + 命令</h3><p><strong>用法</strong>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:33:02 root@10 ~]<span class="hljs-comment">#ls --help</span><br>用法：<span class="hljs-built_in">ls</span> [选项]... [文件]...<br>List information about the FILEs (the current directory by default).<br>Sort entries alphabetically <span class="hljs-keyword">if</span> none of -cftuvSUX nor --<span class="hljs-built_in">sort</span> is specified.<br><br>必选参数对长短选项同时适用。<br>  -a, --all不隐藏任何以. 开始的项目<br>  -A, --almost-all列出除. 及.. 以外的任何项目<br>      --author与-l 同时使用时列出每个文件的作者<br>  -b, --escape以八进制溢出序列表示不可打印的字符<br>      --block-size=SIZE      with -l, scale sizes by SIZE when printing them;<br>                               e.g., <span class="hljs-string">&#x27;--block-size=M&#x27;</span>; see SIZE format below<br>  -B, --ignore-backups       <span class="hljs-keyword">do</span> not list implied entries ending with ~<br>  -c                         with -lt: <span class="hljs-built_in">sort</span> by, and show, ctime (time of last<br>                               modification of file status information);<br>                               with -l: show ctime and <span class="hljs-built_in">sort</span> by name;<br>                               otherwise: <span class="hljs-built_in">sort</span> by ctime, newest first<br>  -C                         list entries by columns<br>      --color[=WHEN]         colorize the output; WHEN can be <span class="hljs-string">&#x27;always&#x27;</span> (default<br>                               <span class="hljs-keyword">if</span> omitted), <span class="hljs-string">&#x27;auto&#x27;</span>, or <span class="hljs-string">&#x27;never&#x27;</span>; more info below<br>  -d, --directory            list directories themselves, not their contents<br>  -D, --dired                generate output designed <span class="hljs-keyword">for</span> Emacs<span class="hljs-string">&#x27; dired mode</span><br><span class="hljs-string">  -f                         do not sort, enable -aU, disable -ls --color</span><br><span class="hljs-string">  -F, --classify             append indicator (one of */=&gt;@|) to entries</span><br><span class="hljs-string">      --file-type            likewise, except do not append &#x27;</span>*<span class="hljs-string">&#x27;</span><br><span class="hljs-string">      </span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h2 id="通过命令的描述，选择一个命令，获取命令的man文档。"><a href="#通过命令的描述，选择一个命令，获取命令的man文档。" class="headerlink" title="通过命令的描述，选择一个命令，获取命令的man文档。"></a>通过命令的描述，选择一个命令，获取命令的man文档。</h2><h3 id="man-命令"><a href="#man-命令" class="headerlink" title="man + 命令"></a>man + 命令</h3><ul><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:33:57 root@10 ~]<span class="hljs-comment">#man ls</span><br><br>LS(1)                                                   User Commands                                                  LS(1)<br><br>NAME<br>       <span class="hljs-built_in">ls</span> - list directory contents<br><br>SYNOPSIS<br>       <span class="hljs-built_in">ls</span> [OPTION]... [FILE]...<br><br>DESCRIPTION<br>       List  information  about the FILEs (the current directory by default).  Sort entries alphabetically <span class="hljs-keyword">if</span> none of -cftu‐<br>       vSUX nor --<span class="hljs-built_in">sort</span> is specified.<br><br>       Mandatory arguments to long options are mandatory <span class="hljs-keyword">for</span> short options too.<br><br>       -a, --all<br>              <span class="hljs-keyword">do</span> not ignore entries starting with .<br><br>       -A, --almost-all<br>              <span class="hljs-keyword">do</span> not list implied . and ..<br><br>       --author<br>              with -l, <span class="hljs-built_in">print</span> the author of each file<br><br>       -b, --escape<br>              <span class="hljs-built_in">print</span> C-style escapes <span class="hljs-keyword">for</span> nongraphic characters<br><br>       --block-size=SIZE<br>      .................<br></code></pre></td></tr></table></figure></li></ul><h2 id="解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。-lt-gt-…等各代表什么含义。"><a href="#解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。-lt-gt-…等各代表什么含义。" class="headerlink" title="解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。&lt;&gt;, [] …等各代表什么含义。"></a>解读man文档，man分几个部分？man每个部分的解释，特别是语法部分。&lt;&gt;, [] …等各代表什么含义。</h2><h3 id="man文档划分9部分"><a href="#man文档划分9部分" class="headerlink" title="man文档划分9部分"></a>man文档划分9部分</h3><ul><li><p>man文档各部分划分含义</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span>可执行程序或 <span class="hljs-keyword">shell</span> 命令<br><span class="hljs-symbol">2 </span>系统调用(内核提供的函数)<br><span class="hljs-symbol">3 </span>库调用(程序库中的函数)<br><span class="hljs-symbol">4 </span>特殊文件(通常位于 /dev)<br><span class="hljs-symbol">5 </span>文件格式和规范，如 /etc/passwd<br><span class="hljs-symbol">6 </span>游戏<br><span class="hljs-symbol">7 </span>杂项(包括宏包和规范，如 man(<span class="hljs-number">7</span>)，groff(<span class="hljs-number">7</span>))<br><span class="hljs-symbol">8 </span>系统管理命令(通常只针对 root 用户)<br><span class="hljs-symbol">9 </span>内核例程 [非标准]<br></code></pre></td></tr></table></figure></li><li><p>命令帮助时，会出现[],&lt;&gt;,|等符号，它们的含义</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[] 表示是可选的;<br><span class="hljs-variable">&lt;&gt;</span> 表示是可变化的;<br>x|<span class="hljs-string">y</span>|<span class="hljs-string">z 表示只能选择一个;</span><br><span class="hljs-string">-abc 表示三个参数(或任何二个)的混合使用</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="根据语法部分-简要的写几个操作。"><a href="#根据语法部分-简要的写几个操作。" class="headerlink" title="根据语法部分 简要的写几个操作。"></a>根据语法部分 简要的写几个操作。</h2><ul><li><p>man常用的按键按鍵</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">空格鍵 向下翻一页<br><span class="hljs-string"></span><br><span class="hljs-string">[Enter]</span> 向下翻一行<br><span class="hljs-string"></span><br><span class="hljs-string">[Page Down]</span> 向下翻一页，↓为向下一行<br><span class="hljs-string"></span><br><span class="hljs-string">[Page Up]</span> 向上翻一页，↑为向上一行<br><span class="hljs-string"></span><br><span class="hljs-string">[Home]</span> 到第一页<br><span class="hljs-string"></span><br><span class="hljs-string">[End]</span> 到最后一页<br><br>/<span class="hljs-built_in">string</span> 向『下』搜寻关键字<span class="hljs-built_in">string</span><br><br>?<span class="hljs-built_in">string</span> 向『上』搜寻关键字<span class="hljs-built_in">string</span><br><br>n, N 利用/或?进行搜索时，可以用n来查看下一个结果，用N来进行『反向』查看。<br><br>q 结束这次的man输出<br></code></pre></td></tr></table></figure></li><li><p>man用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:12:51 root@10 data]<span class="hljs-comment">#whatis passwd </span><br>openssl-passwd (1ssl) - compute password hashes<br>passwd (1)           - update user<span class="hljs-string">&#x27;s authentication tokens</span><br><span class="hljs-string">passwd (5)           - password file</span><br><span class="hljs-string">[01:12:57 root@10 data]#man passwd</span><br><span class="hljs-string">PASSWD(1)                                              User utilities                                              PASSWD(1)</span><br><span class="hljs-string"></span><br><span class="hljs-string">NAME</span><br><span class="hljs-string">       passwd - update user&#x27;</span>s authentication tokens<br><br>SYNOPSIS<br>       passwd  [-k]  [-l]  [-u [-f]] [-d] [-e] [-n mindays] [-x maxdays] [-w warndays] [-i inactivedays] [-S] [--stdin] [-?]<br>       [--usage] [username]<br><br>[01:14:16 root@10 data]<span class="hljs-comment">#man 5 passwd</span><br><br>PASSWD(5)                                         Linux Programmer<span class="hljs-string">&#x27;s Manual                                        PASSWD(5)</span><br><span class="hljs-string"></span><br><span class="hljs-string">NAME</span><br><span class="hljs-string">       passwd - password file</span><br><span class="hljs-string"></span><br><span class="hljs-string">DESCRIPTION</span><br><span class="hljs-string">       The  /etc/passwd  file is a text file that describes user login accounts for the system.  It should have read permis‐</span><br><span class="hljs-string">       sion allowed for all users (many utilities, like ls(1) use it to map user IDs to usernames), but  write  access  only</span><br><span class="hljs-string">       for the superuser.</span><br><span class="hljs-string"></span><br><span class="hljs-string">       In  the  good  old  days  there  was  no  great  problem with this general read permission.  Everybody could read the</span><br><span class="hljs-string">       encrypted passwords, but the hardware was too slow to crack a well-chosen password, and moreover the basic assumption</span><br><span class="hljs-string">       used  to be that of a friendly user-community.  These days many people run some version of the shadow password suite,</span><br><span class="hljs-string">       where /etc/passwd has an &#x27;</span>x<span class="hljs-string">&#x27; character in the password field, and the encrypted passwords are in  /etc/shadow,  which</span><br><span class="hljs-string">       is readable by the superuser only.</span><br><span class="hljs-string"></span><br><span class="hljs-string">       If  the  encrypted  password,  whether in /etc/passwd or in /etc/shadow, is an empty string, login is allowed without</span><br><span class="hljs-string">       even asking for a password.  Note that this functionality may be intentionally disabled in applications,  or  config‐</span><br><span class="hljs-string">       urable (for example using the &quot;nullok&quot; or &quot;nonull&quot; arguments to pam_unix.so).</span><br><span class="hljs-string"></span><br><span class="hljs-string">       If the encrypted password in /etc/passwd is &quot;*NP*&quot; (without the quotes), the shadow record should be obtained from an</span><br><span class="hljs-string">       NIS+ server.</span><br></code></pre></td></tr></table></figure></li></ul><h1 id="切换到-etc-目录，列出fstab文件的详细信息，详细解释fstab一行，每个或每几个字符的详细含义。"><a href="#切换到-etc-目录，列出fstab文件的详细信息，详细解释fstab一行，每个或每几个字符的详细含义。" class="headerlink" title="切换到/etc/目录，列出fstab文件的详细信息，详细解释fstab一行，每个或每几个字符的详细含义。"></a>切换到/etc/目录，列出fstab文件的详细信息，详细解释fstab一行，每个或每几个字符的详细含义。</h1><h2 id="切换到-etc-目录"><a href="#切换到-etc-目录" class="headerlink" title="切换到/etc/目录"></a>切换到/etc/目录</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:43:45 root@10 ~]<span class="hljs-comment">#cd /etc/</span><br>[14:43:48 root@10 etc]<span class="hljs-comment">#ll fstab </span><br>-rw-r--r--. 1 root root 709 7月  10 09:45 fstab<br></code></pre></td></tr></table></figure><h2 id="列出fstab文件的详细信息"><a href="#列出fstab文件的详细信息" class="headerlink" title="列出fstab文件的详细信息"></a>列出fstab文件的详细信息</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sh">[14:53:53 root@10 etc]<span class="hljs-comment">#cat fstab </span><br><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># /etc/fstab</span><br><span class="hljs-comment"># Created by anaconda on Sun Jul 10 01:45:09 2022</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk/&#x27;.</span><br><span class="hljs-comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># After editing this file, run &#x27;systemctl daemon-reload&#x27; to update systemd</span><br><span class="hljs-comment"># units generated from this file.</span><br><span class="hljs-comment">#</span><br>UUID=23a498b0-3783-46e4-b55f-fdb1e1c699bb /                       xfs     defaults        0 0<br>UUID=39c438a4-ad8d-4c9c-a001-7794dc13131a /boot                   xfs     defaults        0 0<br>UUID=6c74e5a8-ebc9-4329-8454-b838f5833073 /data                   xfs     defaults        0 0<br>UUID=b65aa78c-be4d-4c68-a276-c31aee04579a none                    swap    defaults        0 0<br><br></code></pre></td></tr></table></figure><h2 id="详细解释fstab一行，每个或每几个字符的详细含义"><a href="#详细解释fstab一行，每个或每几个字符的详细含义" class="headerlink" title="详细解释fstab一行，每个或每几个字符的详细含义"></a>详细解释fstab一行，每个或每几个字符的详细含义</h2><ul><li><p>第一列表示设备的名称</p><ul><li>设备uuid</li><li>设备文件全路径名</li></ul></li><li><p>第二列表示该设备的挂载点</p></li><li><p>第三列是文件系统</p><p>常用文件系统：</p><ul><li>xfs</li><li>ext(1-4)</li><li>swap</li></ul></li><li><p>第四列是挂载选项</p><p>default：包含rw, suid, dev, exec, auto, nouser,和 async</p></li><li><p>第五列是dump选项（用一个数字表示）</p></li><li><p>第六列（接下来的数字）表示文件系统检查选项</p></li></ul><h1 id="简要说明FHS结构。"><a href="#简要说明FHS结构。" class="headerlink" title="简要说明FHS结构。"></a>简要说明FHS结构。</h1><ul><li><p>文件系统层次结构标准<strong>（英语：</strong>F<strong>ilesystem <strong>H</strong>ierarchy <strong>S</strong>tandard，</strong>FHS**）定义了Linux操作系统中的主要目录及目录内容。FHS由Linux基金会维护。 当前版本为3.0版，于2015年发布。</p><table><thead><tr><th>/</th><th>第一层次结构的根，整个文件系统层次结构的根目录</th></tr></thead><tbody><tr><td>/bin</td><td>需要在单用户模式可用的必要命令（可执行文件）；面向所有用户，例如：cat、ls、cp</td></tr><tr><td>/sbin</td><td>必要的系统二进制文件，面向管理员用户。例如：init、ip、mount</td></tr><tr><td>/boot</td><td>引导程序文件，系统引导文件，如内核vmlinuz、ramfs文件，initrd，以及grub（bootloader）；通常划分单独的分区</td></tr><tr><td>/dev</td><td>必要设备, 例如：/dev/null，/dev/sda</td></tr><tr><td>/etc</td><td>系统范围内的配置文件</td></tr><tr><td>/home</td><td>用户的家目录，包含保存的文件、个人设置等每一个用户的家目录通常默认为/home/$USER</td></tr><tr><td>/lib</td><td>/bin/ 和 /sbin/中二进制文件必要的库文件。</td></tr><tr><td>/lib64</td><td>/bin/ 和 /sbin/中二进制文件必要的库文件（64位）。</td></tr><tr><td>/lost+found</td><td>系统断电时候临时保存的，默认为空</td></tr><tr><td>/media</td><td>可移除媒体(如CD-ROM)的挂载点</td></tr><tr><td>/mnt</td><td>临时挂载的文件系统</td></tr><tr><td>/opt</td><td>备用目录，第三方程序的安装目录，默认为空</td></tr><tr><td>/proc</td><td>虚拟文件系统，将内核与进程状态归档为文本文件。例如：uptime、 network。在Linux中，对应Procfs格式挂载。/proc/meminfo：查看内存信息/proc/cpuinfo：cpu信息/proc/mounts：挂载信息/proc/loadavg：负载信息/proc/partitions：磁盘信息</td></tr><tr><td>/root</td><td>超级用户的家目录</td></tr><tr><td>/selinux</td><td>selinux相关的安全策略等信息存储的位置，默认为空</td></tr><tr><td>/srv</td><td>为服务提供数据存放位置，默认为空</td></tr><tr><td>/sys</td><td>虚拟文件系统，用于输出当前系统上硬件设备相关信息的虚拟文件系统</td></tr><tr><td>/tmp</td><td>临时文件(参见 /var/tmp)，在系统重启时目录中文件不会被保留。</td></tr><tr><td>/usr</td><td>用于存储只读用户数据的第二层次； 包含绝大多数的(多)用户工具和应用程序。</td></tr><tr><td>/var</td><td>频繁发生变化的文件——在正常运行的系统中其内容不断变化的文件，如日志，脱机文件和临时电子邮件文件。/var/cache：应用程序缓存数据目录/var/lib：应用程序状态信息数据/var/local：专用于/usr/local下的应用程序存储可变数据/var/log：日志目录文件  /var/log/messages系统日志  /var/log/secure 安全日志 SSH连接日志/var/lock：锁文件/var/run：与运行中进程相关的数据；通常存放进程的PID文件/var/spool：应用程序数据池/var/tmp：保存系统两次重启之间产生的临时数据</td></tr></tbody></table></li></ul><h1 id="用自己的理解总结-文件管理，用户管理，组用户，权限管理相关的命令。"><a href="#用自己的理解总结-文件管理，用户管理，组用户，权限管理相关的命令。" class="headerlink" title="用自己的理解总结 文件管理，用户管理，组用户，权限管理相关的命令。"></a>用自己的理解总结 文件管理，用户管理，组用户，权限管理相关的命令。</h1><h2 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h2><p>相关常用命令：cd 、tree、cp、mv、mkdir、rm、cat、head、tail，touch</p><h3 id="cd：目录切换"><a href="#cd：目录切换" class="headerlink" title="cd：目录切换"></a>cd：目录切换</h3><ul><li><p>选项：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span>  ~：用户家目录<br><span class="hljs-built_in">cd</span> -：切换会上一目录 <br><span class="hljs-built_in">cd</span>  /data：访问某一个目录<br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:35:31 root@10 data]<span class="hljs-comment">#pwd</span><br>/data<br>[01:54:18 root@10 data]<span class="hljs-comment">#cd ~</span><br>[01:54:21 root@10 ~]<span class="hljs-comment">#pwd</span><br>/root<br>[01:54:23 root@10 ~]<span class="hljs-comment">#cd -</span><br>/data<br>[01:54:29 root@10 data]<span class="hljs-comment">#pwd</span><br>/data<br></code></pre></td></tr></table></figure></li></ul><h3 id="tree：以树状格式列出目录的内容"><a href="#tree：以树状格式列出目录的内容" class="headerlink" title="tree：以树状格式列出目录的内容"></a>tree：以树状格式列出目录的内容</h3><ul><li><p>选项</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh">-a 显示所有文件和目录。<br>-A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。<br>-C 在文件和目录清单加上色彩，便于区分各种类型。<br>-d 显示目录名称而非内容。<br>-D 列出文件或目录的更改时间。<br>-f 在每个文件或目录之前，显示完整的相对路径名称。<br>-F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上<span class="hljs-string">&quot;*&quot;</span>,<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;=&quot;</span>,<span class="hljs-string">&quot;@&quot;</span>,<span class="hljs-string">&quot;|&quot;</span>号。<br>-g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。<br>-i 不以阶梯状列出文件或目录名称。<br>-L level 限制目录显示层级。<br>-l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。<br>-n 不在文件和目录清单加上色彩。<br>-N 直接列出文件和目录名称，包括控制字符。<br>-p 列出权限标示。<br>-P&lt;范本样式&gt; 只显示符合范本样式的文件或目录名称。<br>-q 用<span class="hljs-string">&quot;?&quot;</span>号取代控制字符，列出文件和目录名称。<br>-s 列出文件或目录大小。<br>-t 用文件和目录的更改时间排序。<br>-u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。<br>-x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sh">[15:24:51 root@10 data]<span class="hljs-comment">#tree /root/study/</span><br>/root/study/<br>├── answer.sh<br>├── bashdir<br>│   ├── 1amyoo-v3.sh<br>│   ├── backup.sh<br>│   ├── bmi.sh<br>│   ├── chook_rabbit.sh<br>│   ├── color2.sh<br>│   ├── color.sh<br>│   ├── disk_check.sh<br>│   ├── hello.sh<br>│   ├── menu.sh<br>│   ├── os_release.sh<br>│   ├── rm2.sh<br>│   ├── rm.sh<br>│   ├── score.sh<br>│   ├── system_info.sh<br>│   ├── test.sh<br>│   ├── work_menu.sh<br>│   ├── yesorno.sh<br>│   └── zhang.sh<br>├── hello.sh<br>└── hello.sh.1<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="cp：复制文件或目录"><a href="#cp：复制文件或目录" class="headerlink" title="cp：复制文件或目录"></a>cp：复制文件或目录</h3><ul><li><p>选项：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-bullet">- </span>-a 复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容<br><span class="hljs-bullet">- </span>-d：复制时保留链接。这里所说的链接相当于 Windows 系统中的快捷方式。<br><span class="hljs-bullet">- </span>-f：覆盖已经存在的目标文件而不给出提示。<br><span class="hljs-bullet">- </span>-i：与 <span class="hljs-strong">**-f**</span> 选项相反，在覆盖目标文件之前给出提示，要求用户确认是否覆盖，回答 <span class="hljs-strong">**y**</span> 时目标文件将被覆盖。<br><span class="hljs-bullet">- </span>-p：除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。<br><span class="hljs-bullet">- </span>-r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。<br></code></pre></td></tr></table></figure></li><li><p>用法：</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sh">[19:05:24 root@10 data]<span class="hljs-comment">#ls</span><br>[19:05:25 root@10 data]<span class="hljs-comment">#ls /root/data</span><br>a.txt  c.txt  etc2.tar.gz  etc.tar.gz  F.txt  H.txt  J.txt  L.txt        n.txt  p.txt  r.txt  t.txt  v.txt  x.txt  z.txt<br>A.txt  C.txt  etc3.tar.gz  e.txt       g.txt  i.txt  k.txt  messages.gz  N.txt  P.txt  R.txt  T.txt  V.txt  X.txt  Z.txt<br>b.txt  d.txt  etc4.tar.gz  E.txt       G.txt  I.txt  K.txt  m.txt        o.txt  q.txt  s.txt  u.txt  w.txt  y.txt<br>B.txt  D.txt  etc.tar      f.txt       h.txt  j.txt  l.txt  M.txt        O.txt  Q.txt  S.txt  U.txt  W.txt  Y.txt<br>[19:05:47 root@10 data]<span class="hljs-comment">#cp /root/data/* ./</span><br>[19:06:25 root@10 data]<span class="hljs-comment">#ls</span><br>a.txt  c.txt  etc2.tar.gz  etc.tar.gz  F.txt  H.txt  J.txt  L.txt        n.txt  p.txt  r.txt  t.txt  v.txt  x.txt  z.txt<br>A.txt  C.txt  etc3.tar.gz  e.txt       g.txt  i.txt  k.txt  messages.gz  N.txt  P.txt  R.txt  T.txt  V.txt  X.txt  Z.txt<br>b.txt  d.txt  etc4.tar.gz  E.txt       G.txt  I.txt  K.txt  m.txt        o.txt  q.txt  s.txt  u.txt  w.txt  y.txt<br>B.txt  D.txt  etc.tar      f.txt       h.txt  j.txt  l.txt  M.txt        O.txt  Q.txt  S.txt  U.txt  W.txt  Y.txt<br>[19:06:27 root@10 data]<span class="hljs-comment">#rm -fr ./*</span><br>[19:06:54 root@10 data]<span class="hljs-comment">#ls -l /root/data</span><br>总用量 121028<br>-rw-r--r--. 1 root root        0 7月  18 23:30 a.txt<br>-rw-r--r--. 1 root root        0 7月  18 23:30 A.txt<br>-rw-r--r--. 1 root root 29347840 7月  19 00:09 etc2.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc3.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc4.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:08 etc.tar<br>-rw-r--r--. 1 root root  6529123 7月  19 00:09 etc.tar.gz<br>[19:07:22 root@10 data]<span class="hljs-comment">#cp -a /root/data/* ./</span><br>[19:08:00 root@10 data]<span class="hljs-comment">#ll ./</span><br>总用量 121028<br>-rw-r--r--. 1 root root        0 7月  18 23:30 a.txt<br>-rw-r--r--. 1 root root        0 7月  18 23:30 A.txt<br>-rw-r--r--. 1 root root 29347840 7月  19 00:09 etc2.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc3.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc4.tar.gz<br>-rw-r--r--. 1 root root 29347840 7月  19 00:08 etc.tar<br>-rw-r--r--. 1 root root  6529123 7月  19 00:09 etc.tar.gz<br><br></code></pre></td></tr></table></figure><h3 id="mv：移动文件"><a href="#mv：移动文件" class="headerlink" title="mv：移动文件"></a>mv：移动文件</h3><ul><li><p>选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-b: 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份。</span><br><span class="hljs-deletion">-i: 如果指定移动的源目录或文件与目标的目录或文件同名，则会先询问是否覆盖旧文件，输入 y 表示直接覆盖，输入 n 表示取消该操作。</span><br><span class="hljs-deletion">-f: 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件。</span><br><span class="hljs-deletion">-n: 不要覆盖任何已存在的文件或目录。</span><br><span class="hljs-deletion">-u：当源文件比目标文件新或者目标文件不存在时，才执行移动操作</span><br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[01:24:14 root@10 data]</span><span class="hljs-selector-id">#ls</span> /root/data<br><span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span>  c<span class="hljs-selector-class">.txt</span>  etc2<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span>  etc<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span>  F<span class="hljs-selector-class">.txt</span>  H<span class="hljs-selector-class">.txt</span>  J<span class="hljs-selector-class">.txt</span>  L<span class="hljs-selector-class">.txt</span>        n<span class="hljs-selector-class">.txt</span>  <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.txt</span>  r<span class="hljs-selector-class">.txt</span>  t<span class="hljs-selector-class">.txt</span>  v<span class="hljs-selector-class">.txt</span>  x<span class="hljs-selector-class">.txt</span>  z<span class="hljs-selector-class">.txt</span><br>A<span class="hljs-selector-class">.txt</span>  C<span class="hljs-selector-class">.txt</span>  etc3<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span>  e<span class="hljs-selector-class">.txt</span>       g<span class="hljs-selector-class">.txt</span>  <span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.txt</span>  k<span class="hljs-selector-class">.txt</span>  messages<span class="hljs-selector-class">.gz</span>  N<span class="hljs-selector-class">.txt</span>  P<span class="hljs-selector-class">.txt</span>  R<span class="hljs-selector-class">.txt</span>  T<span class="hljs-selector-class">.txt</span>  V<span class="hljs-selector-class">.txt</span>  X<span class="hljs-selector-class">.txt</span>  Z<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.txt</span>  d<span class="hljs-selector-class">.txt</span>  etc4<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span>  E<span class="hljs-selector-class">.txt</span>       G<span class="hljs-selector-class">.txt</span>  I<span class="hljs-selector-class">.txt</span>  K<span class="hljs-selector-class">.txt</span>  m<span class="hljs-selector-class">.txt</span>        o<span class="hljs-selector-class">.txt</span>  <span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.txt</span>  s<span class="hljs-selector-class">.txt</span>  u<span class="hljs-selector-class">.txt</span>  w<span class="hljs-selector-class">.txt</span>  y<span class="hljs-selector-class">.txt</span><br>B<span class="hljs-selector-class">.txt</span>  D<span class="hljs-selector-class">.txt</span>  etc<span class="hljs-selector-class">.tar</span>      f<span class="hljs-selector-class">.txt</span>       h<span class="hljs-selector-class">.txt</span>  j<span class="hljs-selector-class">.txt</span>  l<span class="hljs-selector-class">.txt</span>  M<span class="hljs-selector-class">.txt</span>        O<span class="hljs-selector-class">.txt</span>  Q<span class="hljs-selector-class">.txt</span>  S<span class="hljs-selector-class">.txt</span>  U<span class="hljs-selector-class">.txt</span>  W<span class="hljs-selector-class">.txt</span>  Y<span class="hljs-selector-class">.txt</span><br><span class="hljs-selector-attr">[01:24:34 root@10 data]</span><span class="hljs-selector-id">#pwd</span><br>/data<br><span class="hljs-selector-attr">[01:24:44 root@10 data]</span><span class="hljs-selector-id">#mv</span> /root/data<span class="hljs-comment">/*.gz /data/</span><br><span class="hljs-comment">[01:25:24 root@10 data]#ls</span><br><span class="hljs-comment">etc2.tar.gz  etc3.tar.gz  etc4.tar.gz  etc.tar.gz  messages.gz</span><br><span class="hljs-comment">[01:25:26 root@10 data]#touch a.txt</span><br><span class="hljs-comment">[01:25:53 root@10 data]#mv -f /root/data/a.txt /data/</span><br><span class="hljs-comment">[01:26:19 root@10 data]#ls</span><br><span class="hljs-comment">a.txt  etc2.tar.gz  etc3.tar.gz  etc4.tar.gz  etc.tar.gz  messages.gz</span><br><span class="hljs-comment">[01:26:22 root@10 data]#ll</span><br><span class="hljs-comment">总用量 92368</span><br><span class="hljs-comment">-rw-r--r--. 1 root root        0 7月  18 23:30 a.txt</span><br><span class="hljs-comment">-rw-r--r--. 1 root root 29347840 7月  19 00:09 etc2.tar.gz</span><br><span class="hljs-comment">-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc3.tar.gz</span><br><span class="hljs-comment">-rw-r--r--. 1 root root 29347840 7月  19 00:10 etc4.tar.gz</span><br><span class="hljs-comment">-rw-r--r--. 1 root root  6529123 7月  19 00:09 etc.tar.gz</span><br><span class="hljs-comment">-rw-r--r--. 1 root root     6013 7月  18 23:52 messages.gz</span><br><span class="hljs-comment">[01:26:25 root@10 data]#mv -v /root/data/*.txt /data/</span><br><span class="hljs-comment">copied &#x27;/root/data/A.txt&#x27; -&gt; &#x27;/data/A.txt&#x27;</span><br><span class="hljs-comment">已删除&#x27;/root/data/A.txt&#x27;</span><br><span class="hljs-comment">copied &#x27;/root/data/b.txt&#x27; -&gt; &#x27;/data/b.txt&#x27;</span><br><span class="hljs-comment">已删除&#x27;/root/data/b.txt&#x27;</span><br><span class="hljs-comment">copied &#x27;/root/data/B.txt&#x27; -&gt; &#x27;/data/B.txt&#x27;</span><br><span class="hljs-comment">已删除&#x27;/root/data/B.txt&#x27;</span><br><span class="hljs-comment">copied &#x27;/root/data/c.txt&#x27; -&gt; &#x27;/data/c.txt&#x27;</span><br><span class="hljs-comment">已删除&#x27;/root/data/c.txt&#x27;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="mkdir：创建文件夹"><a href="#mkdir：创建文件夹" class="headerlink" title="mkdir：创建文件夹"></a>mkdir：创建文件夹</h3><ul><li><p>选项：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">-<span class="hljs-selector-tag">p</span> 确保目录名称存在，不存在的就建一个。<br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:31:28 root@10 data]<span class="hljs-comment">#mkdir dir</span><br>[01:31:35 root@10 data]<span class="hljs-comment">#mkdir dir02/dir02</span><br><span class="hljs-built_in">mkdir</span>: 无法创建目录 “dir02/dir02”: 没有那个文件或目录<br>[01:31:46 root@10 data]<span class="hljs-comment">#mkdir -p  dir02/dir02</span><br>[01:31:52 root@10 data]<span class="hljs-comment">#ls dir02/</span><br>dir02<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="rm：删除目录文件"><a href="#rm：删除目录文件" class="headerlink" title="rm：删除目录文件"></a>rm：删除目录文件</h3><ul><li><p>选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-i 删除前逐一询问确认。</span><br><span class="hljs-deletion">-f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。</span><br><span class="hljs-deletion">-r 将目录及以下之档案亦逐一删除。</span><br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:34:03 root@10 data]<span class="hljs-comment">#type rm</span><br><span class="hljs-built_in">rm</span> 是 `<span class="hljs-built_in">rm</span> -i<span class="hljs-string">&#x27; 的别名</span><br><span class="hljs-string">[01:34:24 root@10 data]#rm dir</span><br><span class="hljs-string">rm: 无法删除&#x27;</span><span class="hljs-built_in">dir</span><span class="hljs-string">&#x27;: 是一个目录</span><br><span class="hljs-string">[01:34:37 root@10 data]#rm -r dir</span><br><span class="hljs-string">rm：是否删除目录 &#x27;</span><span class="hljs-built_in">dir</span><span class="hljs-string">&#x27;？y</span><br><span class="hljs-string">[01:35:02 root@10 data]#ls</span><br><span class="hljs-string">dir02</span><br><span class="hljs-string">[01:35:04 root@10 data]#rm -rf dir02</span><br><span class="hljs-string">[01:35:28 root@10 data]#ls</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure></li></ul><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>相关常用命令：useradd 、userdel、usermod、passwd、su </p><h3 id="useradd-：添加用户"><a href="#useradd-：添加用户" class="headerlink" title="useradd ：添加用户"></a>useradd ：添加用户</h3><ul><li>c comment 指定一段注释性描述。</li><li>-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。</li><li>-g 用户组 指定用户所属的用户组。</li><li>-G 用户组，用户组 指定用户所属的附加组。</li><li>-s Shell文件 指定用户的登录Shell。</li><li>-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">[19:51:07 root@10 ~]<span class="hljs-comment">#useradd mage </span><br>[19:58:29 root@10 ~]<span class="hljs-comment">#id mage</span><br>uid=1006(mage) gid=1006(mage) 组=1006(mage)<br>[19:58:33 root@10 ~]<span class="hljs-comment">#tail -n 1  /etc/passwd</span><br>mage:x:1006:1006::/home/mage:/bin/bash<br><br>[19:59:20 root@10 ~]<span class="hljs-comment">#useradd mage02 -c &quot;测试账号&quot; -d /data/mage -u 1020 -s /bin/bash </span><br>[20:02:35 root@10 ~]<span class="hljs-comment">#id mage02</span><br>uid=1020(mage02) gid=1020(mage02) 组=1020(mage02)<br>[20:02:41 root@10 ~]<span class="hljs-comment">#tail -n 1  /etc/passwd</span><br>mage02:x:1020:1020:测试账号:/data/mage:/bin/bash<br><br></code></pre></td></tr></table></figure><h3 id="userdel：删除用户"><a href="#userdel：删除用户" class="headerlink" title="userdel：删除用户"></a>userdel：删除用户</h3><ul><li><p>选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-r 它的作用是把用户的主目录一起删除</span><br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">[20:05:20 root@10 ~]<span class="hljs-comment">#id mage</span><br><span class="hljs-built_in">id</span>: “mage”：无此用户<br>[20:05:45 root@10 ~]<span class="hljs-comment">#ls /home/</span><br>jira  mage  test01  test02  zhangsan  zhangxuelong  zxl<br><br>[20:11:02 root@10 ~]<span class="hljs-comment">#useradd mage02</span><br>正在创建信箱文件: 文件已存在<br>[20:11:22 root@10 ~]<span class="hljs-comment">#id  mage02</span><br>uid=1006(mage02) gid=1006(mage02) 组=1006(mage02)<br>[20:11:33 root@10 ~]<span class="hljs-comment">#tail /etc/passwd -n 1</span><br>mage02:x:1006:1006::/home/mage02:/bin/bash<br>[20:12:03 root@10 ~]<span class="hljs-comment">#userdel -r mage02</span><br>userdel：/var/spool/mail/mage02 并不属于 mage02，所以不会删除<br>[20:12:19 root@10 ~]<span class="hljs-comment">#ls /home/</span><br>jira  test01  test02  zhangsan  zhangxuelong  zxl<br></code></pre></td></tr></table></figure></li></ul><h3 id="usermod：修改账号"><a href="#usermod：修改账号" class="headerlink" title="usermod：修改账号"></a>usermod：修改账号</h3><ul><li><p>选项：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">-c&lt;备注&gt; 　修改用户帐号的备注文字。<br>-d登入目录&gt; 　修改用户登入时的目录。<br>-e&lt;有效期限&gt; 　修改帐号的有效期限。<br>-f&lt;缓冲天数&gt; 　修改在密码过期后多少天即关闭该帐号。<br>-g&lt;群组&gt; 　修改用户所属的群组。<br>-G&lt;群组&gt; 　修改用户所属的附加群组。<br>-l&lt;帐号名称&gt; 　修改用户帐号名称。<br>-L 　锁定用户密码，使密码无效。<br>-s&lt;shell&gt; 　修改用户登入后所使用的shell。<br>-u&lt;uid&gt; 　修改用户ID。<br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">[20:15:48 root@10 ~]<span class="hljs-comment">#useradd mage</span><br>[20:16:08 root@10 ~]<span class="hljs-comment">#tail /etc/passwd -n 1</span><br>mage:x:1006:1006::/home/mage:/bin/bash<br>[20:16:22 root@10 ~]<span class="hljs-comment">#usermod mage -c &quot;测试账号&quot; -d /data/mage -u 1008 -g zxl </span><br>[20:17:58 root@10 ~]<span class="hljs-comment">#tail /etc/passwd -n 1</span><br>mage:x:1008:1000:测试账号:/data/mage:/bin/bash<br>[20:18:01 root@10 ~]<span class="hljs-comment">#ls /home/</span><br>jira  mage  test01  test02  zhangsan  zhangxuelong  zxl<br></code></pre></td></tr></table></figure></li></ul><h3 id="passwd：修改密码"><a href="#passwd：修改密码" class="headerlink" title="passwd：修改密码"></a>passwd：修改密码</h3><ul><li><p>选项：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-f 强迫用户下次登录时修改口令。</span><br><span class="hljs-deletion">-l 锁定口令，即禁用账号</span><br><span class="hljs-deletion">-d 使账号无口令</span><br><span class="hljs-deletion">-u 口令解锁。</span><br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh">[20:20:30 root@10 ~]<span class="hljs-comment">#su zxl</span><br>[zxl@10 root]$ <span class="hljs-built_in">cd</span> ~<br>[zxl@10 ~]$ passwd 123456<br>passwd：只有 root 用户才能指定用户名。<br>[zxl@10 ~]$ <span class="hljs-built_in">exit</span><br><span class="hljs-built_in">exit</span><br>[20:22:16 root@10 ~]<span class="hljs-comment">#</span><br>[20:22:16 root@10 ~]<span class="hljs-comment">#passwd zxl</span><br>更改用户 zxl 的密码 。<br>新的 密码：<br>无效的密码： 密码少于 8 个字符<br>重新输入新的 密码：<br>passwd：所有的身份验证令牌已经成功更新。<br></code></pre></td></tr></table></figure></li></ul><h3 id="su-：切换用户"><a href="#su-：切换用户" class="headerlink" title="su ：切换用户"></a>su ：切换用户</h3><ul><li><p>选项：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">切换当前用户家目录<br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">[20:23:53 root@10 ~]<span class="hljs-comment">#su zxl</span><br>[zxl@10 root]$ <span class="hljs-built_in">exit</span><br><span class="hljs-built_in">exit</span><br>[20:27:37 root@10 ~]<span class="hljs-comment">#su - zxl</span><br>[zxl@10 ~]$ <br></code></pre></td></tr></table></figure></li></ul><h2 id="组用户"><a href="#组用户" class="headerlink" title="组用户"></a>组用户</h2><p>相关常用命令：groupadd 、groupdel,groupmod</p><h3 id="groupadd-添加组"><a href="#groupadd-添加组" class="headerlink" title="groupadd:添加组"></a>groupadd:添加组</h3><ul><li><p>选项：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">-f, <span class="hljs-attr">--force</span>   如果组已经存在则成功退出并且如果 GID 已经存在则取消 -g<br>-g, <span class="hljs-attr">--gid</span> GID  为新组使用 GID<br>-h, <span class="hljs-attr">--help</span>      显示帮助信息并推出<br>-K, <span class="hljs-attr">--key</span> KEY=VALUE   不使用 /etc/login<span class="hljs-selector-class">.defs</span> 中的默认值<br>-o, <span class="hljs-attr">--non-unique</span>    允许创建有重复 GID 的组<br>-<span class="hljs-selector-tag">p</span>, <span class="hljs-attr">--password</span> PASSWORD  为新组使用加密过的密码<br></code></pre></td></tr></table></figure></li><li><p>用法：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">[<span class="hljs-number">20</span>:<span class="hljs-number">34</span>:<span class="hljs-number">40</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#groupadd mage</span><br>[<span class="hljs-number">20</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#tail /etc/group -n 1</span><br><span class="hljs-symbol">mage:</span><span class="hljs-built_in">x</span>:<span class="hljs-number">1006</span>:<br>[<span class="hljs-number">20</span>:<span class="hljs-number">35</span>:<span class="hljs-number">06</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#groupadd mage02 -g 1011</span><br>[<span class="hljs-number">20</span>:<span class="hljs-number">36</span>:<span class="hljs-number">24</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#tail /etc/group -n 1</span><br><span class="hljs-symbol">mage02:</span><span class="hljs-built_in">x</span>:<span class="hljs-number">1011</span>:<br></code></pre></td></tr></table></figure></li></ul><h3 id="groupdel：删除组"><a href="#groupdel：删除组" class="headerlink" title="groupdel：删除组"></a>groupdel：删除组</h3><ul><li><p>用法：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">[<span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">15</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#groupdel mage</span><br>[<span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">23</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#groupdel mage02</span><br>[<span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">25</span> root<span class="hljs-subst">@10</span> ~]<span class="hljs-meta">#tail /etc/group -n 2</span><br><span class="hljs-symbol">apache:</span><span class="hljs-built_in">x</span>:<span class="hljs-number">48</span>:<br><span class="hljs-symbol">jira:</span><span class="hljs-built_in">x</span>:<span class="hljs-number">1005</span>:<br></code></pre></td></tr></table></figure></li></ul><h3 id="groupmod：修改组"><a href="#groupmod：修改组" class="headerlink" title="groupmod：修改组"></a>groupmod：修改组</h3><ul><li><p>选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-g &lt;群组识别码&gt; 　设置欲使用的群组识别码。</span><br><span class="hljs-deletion">-o 　重复使用群组识别码。</span><br><span class="hljs-deletion">-n &lt;新群组名称&gt; 　设置欲使用的群组名称。</span><br></code></pre></td></tr></table></figure></li><li><p>用法：</p></li><li><p>```<br>[20:39:28 root@10 ~]#groupadd mage<br>[20:40:03 root@10 ~]#tail /etc/group -n 1<br>mage:x:1006:<br>[20:43:15 root@10 ~]#groupmod  -n mage02 mage<br>[20:43:43 root@10 ~]#tail /etc/group -n 1<br>mage02:x:1006:<br>[20:43:49 root@10 ~]#groupmod -g 1020 mage02<br>[20:45:03 root@10 ~]#tail /etc/group -n 1<br>mage02:x:1020:<br>[20:45:04 root@10 ~]#</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>  <br><br>## 权限管理<br><br>### 访问权限<br><br>- 选项<br><br></code></pre></td></tr></table></figure><p>读取（r）： 允许查看文件内容，显示目录列表<br>写入（w）： 允许修改文件内容，允许在目录中新建、删除、移动文件或者子目录<br>可执行（x）： 允许运行程序，切换目录<br>无权限（-）： 没有权限</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>### 权限介绍<br><br>![image<span class="hljs-number">-20220801001505259</span>](第一周作业/image<span class="hljs-number">-20220801001505259.</span>png)<br><br></code></pre></td></tr></table></figure></li><li><p>rw-r–r– . 1 root root 1258 Jun 3 2019 initial-setup-ks.cfg<br>d rwxr-xr-x . 2 root root 6 Jun 3 2019 Music</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><br>|<span class="hljs-string"> -    </span>|<span class="hljs-string"> 代表普通文件                                                 </span>|<br>|<span class="hljs-string"> ---- </span>|<span class="hljs-string"> ------------------------------------------------------------ </span>|<br>|<span class="hljs-string"> d    </span>|<span class="hljs-string"> 代表目录                                                     </span>|<br>|<span class="hljs-string"> c    </span>|<span class="hljs-string"> 代表字符型文件                                               </span>|<br>|<span class="hljs-string"> l    </span>|<span class="hljs-string"> 代表链接文件                                                 </span>|<br>|<span class="hljs-string"> b    </span>|<span class="hljs-string"> 块文件。这是一种特殊设备文件，存储设备都是这种文件，如分区文件/dev/sda1就是这种文件 </span>|<br>|<span class="hljs-string"> p    </span>|<span class="hljs-string"> 管道符文件。这是一种非常少见的特殊设备文件                   </span>|<br>|<span class="hljs-string"> s    </span>|<span class="hljs-string"> 套接字文件。这也是一种特殊设备文件，一些服务支持socket访问就会产生这样的文件 </span>|<br>|<span class="hljs-string">      </span>|<span class="hljs-string">                                                              </span>|<br><br><br><br>|<span class="hljs-string"> rwx </span>|<span class="hljs-string"> r-x </span>|<span class="hljs-string"> r-x </span>|<span class="hljs-string"> root </span>|<span class="hljs-string"> root</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span>|<span class="hljs-string"> 属主权限 </span>|<span class="hljs-string"> 属组权限 </span>|<span class="hljs-string"> 其他人权限 </span>|<span class="hljs-string"> 属主 </span>|<span class="hljs-string"> 属组</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span>|<span class="hljs-string"> 权限项   </span>|<span class="hljs-string"> 读               </span>|<span class="hljs-string"> 写               </span>|<span class="hljs-string"> 执行             </span>|<span class="hljs-string"> 读               </span>|<span class="hljs-string"> 写               </span>|<span class="hljs-string"> 执行             </span>|<span class="hljs-string"> 读       </span>|<span class="hljs-string"> 写       </span>|<span class="hljs-string"> 执行     </span>|<br>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> ---------------- </span>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> -------- </span>|<span class="hljs-string"> -------- </span>|<br>|<span class="hljs-string"> 字符表示 </span>|<span class="hljs-string"> r                </span>|<span class="hljs-string"> w                </span>|<span class="hljs-string"> x                </span>|<span class="hljs-string"> r                </span>|<span class="hljs-string"> w                </span>|<span class="hljs-string"> x                </span>|<span class="hljs-string"> r        </span>|<span class="hljs-string"> w        </span>|<span class="hljs-string"> x        </span>|<br>|<span class="hljs-string"> 数字表示 </span>|<span class="hljs-string"> 4                </span>|<span class="hljs-string"> 2                </span>|<span class="hljs-string"> 1                </span>|<span class="hljs-string"> 4                </span>|<span class="hljs-string"> 2                </span>|<span class="hljs-string"> 1                </span>|<span class="hljs-string"> 4        </span>|<span class="hljs-string"> 2        </span>|<span class="hljs-string"> 1        </span>|<br>|<span class="hljs-string"> 权限分配 </span>|<span class="hljs-string"> 文件所有者(属主) </span>|<span class="hljs-string"> 文件所有者(属主) </span>|<span class="hljs-string"> 文件所有者(属主) </span>|<span class="hljs-string"> 文件所属组(属组) </span>|<span class="hljs-string"> 文件所属组(属组) </span>|<span class="hljs-string"> 文件所属组(属组) </span>|<span class="hljs-string"> 其他用户 </span>|<span class="hljs-string"> 其他用户 </span>|<span class="hljs-string"> 其他用户 </span>|<br><br><br><br>文件默认权限644，文件夹默认权限755<br><br>关常用命令：chmod、chown 、ACL、umask <br><br><span class="hljs-comment">### chmod：命令是控制用户对文件的权限的命令</span><br><br>- 选项<br><br></code></pre></td></tr></table></figure><ul><li>u（owner）表示文件所有者，即创建文件的人</li><li>g（group）:表示和文件所有者相同组的用户</li><li> o（other）：表示非文件所有者和相同group的用户</li><li>a（all）：表示所有用户</li><li> [±=]表示</li><li>+：表示给指定的用户授权指定的权限</li><li>-: 表示撤销指定用户的某个权限</li><li>=: 将指定用户的指定权限重新设置</li><li> [rwx]表示</li><li>r：可读权限</li><li>w：可写权限</li><li>x：可执行权限<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs tap"><br>- 用法：<br><br>  ```sh<br>  [00:35:41 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rw-r--r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:35:46 root@10 data]<span class="hljs-comment">#chmod u+x myfile </span><br>  [00:36:26 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rwxr--r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:36:27 root@10 data]<span class="hljs-comment">#chmod g+w myfile </span><br>  [00:37:03 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rwxrw-r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:37:04 root@10 data]<span class="hljs-comment">#chmod o+x myfile </span><br>  [00:37:31 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rwxrw-r-x<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:37:36 root@10 data]<span class="hljs-comment">#chmod a-x  myfile </span><br>  [00:38:20 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rw-rw-r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:38:22 root@10 data]<span class="hljs-comment">#chmod 644  myfile </span><br>  [00:38:46 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rw-r--r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  [00:38:48 root@10 data]<span class="hljs-comment">#chmod 755  myfile </span><br>  [00:38:58 root@10 data]<span class="hljs-comment">#ll</span><br>  总用量 0<br>  drwxr-xr-x<span class="hljs-number"> 3 </span>zxl  zxl <span class="hljs-number"> 33 </span>8月  <span class="hljs-number"> 1 </span>00:22 dir<br>  -rwxr-xr-x<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 0 </span>8月  <span class="hljs-number"> 1 </span>00:17 myfile<br>  <br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="chown-：命令用于设置文件所有者和文件关联组的命令"><a href="#chown-：命令用于设置文件所有者和文件关联组的命令" class="headerlink" title="chown ：命令用于设置文件所有者和文件关联组的命令"></a>chown ：命令用于设置文件所有者和文件关联组的命令</h3><p>​    Linux/Unix 的文件调用权限分为三级 : 文件所有者（Owner）、用户组（Group）、其它用户（Other Users）。</p><ul><li><p>选项</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-R：递归设置权限，也就是给予目录中的所有文件和子目录设定权限</span><br><span class="hljs-deletion">--reference=参考文件或目录：使用参考文件或参考目录的权限来设置目标文件或目录的权限</span><br></code></pre></td></tr></table></figure></li><li><p><code>权限模式</code>：权限模式分为<strong>符号组合</strong>和<strong>八进制数组合</strong></p></li><li><p><strong>符号组合</strong>的格式是<code>[ugoa][[+-=][permission]]</code>，也就是<code>[用户身份][[赋予方式][权限]]</code>的格式</p><ul><li><p>用户身份参数</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ldif">OWNER <span class="hljs-comment">#只修改所有者</span><br><span class="hljs-attribute">OWNER</span>:GROUP <span class="hljs-comment">#同时修改所有者和属组</span><br>:GROUP <span class="hljs-comment">#只修改属组，冒号也可用 . 替换</span><br><span class="hljs-literal">-</span>-reference=RFILE <span class="hljs-comment">#参考指定的的属性，来修改</span><br><span class="hljs-literal">-</span>R <span class="hljs-comment">#递归，此选项慎用，非常危险！</span><br></code></pre></td></tr></table></figure></li><li><p>赋予方式</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs excel">+：加入权限<br>-：减去权限<br>=：设置权限<br></code></pre></td></tr></table></figure></li><li><p>权限</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">r:</span> 读取权限(read)<br><span class="hljs-symbol">w:</span> 写权限(write)<br><span class="hljs-symbol">x:</span> 执行权限(execute)<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>八进制数组合</strong>的格式是 <code>[0-7][0-7][0-7]</code> 三位数字组成(每一位数字都是权限之和)</p><ul><li><p>第一位是所属者权限之和</p></li><li><p>第二位是所属组权限之和</p></li><li><p>第三位其他人权限之和</p></li></ul><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">r 读取权限对应的数字是 <span class="hljs-number">4</span><br>w 写权限对应的数字是 <span class="hljs-number">2</span><br><span class="hljs-keyword">x</span> 执行权限对应的数字是 <span class="hljs-number">1</span><br>例如读写权限 rw 八进制数表示 <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure></li><li><p>用法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs sh">[00:17:32 root@10 data]<span class="hljs-comment">#touch myfile</span><br>[00:17:48 root@10 data]<span class="hljs-comment">#ll</span><br>总用量 0<br>-rw-r--r-- 1 root root 0 8月   1 00:17 myfile<br>[00:17:51 root@10 data]<span class="hljs-comment">#chown zxl myfile </span><br>[00:18:28 root@10 data]<span class="hljs-comment">#ll</span><br>总用量 0<br>-rw-r--r-- 1 zxl root 0 8月   1 00:17 myfile<br>[00:18:30 root@10 data]<span class="hljs-comment">#chown :zhangxuelong myfile </span><br>[00:19:33 root@10 data]<span class="hljs-comment">#ll</span><br>总用量 0<br>-rw-r--r-- 1 zxl zhangxuelong 0 8月   1 00:17 myfile<br>[00:19:36 root@10 data]<span class="hljs-comment">#chown root:root myfile </span><br>[00:19:57 root@10 data]<span class="hljs-comment">#ll</span><br>总用量 0<br>-rw-r--r-- 1 root root 0 8月   1 00:17 myfile<br>[00:19:58 root@10 data]<span class="hljs-comment">#mkdir  ./dir</span><br>[00:21:32 root@10 data]<span class="hljs-comment">#chown -R zxl:zxl dir/</span><br>[00:21:50 root@10 data]<span class="hljs-comment">#touch dir/file.txt</span><br>[00:22:06 root@10 data]<span class="hljs-comment">#ll dir/</span><br>总用量 0<br>-rw-r--r-- 1 root root 0 8月   1 00:22 file.txt<br>[00:22:12 root@10 data]<span class="hljs-comment">#mkdir dir/dir</span><br>[00:22:49 root@10 data]<span class="hljs-comment">#touch dir/dir/file2.txt</span><br>[00:23:04 root@10 data]<span class="hljs-comment">#ll dir/dir/file2.txt</span><br>-rw-r--r-- 1 root root 0 8月   1 00:23 <span class="hljs-built_in">dir</span>/dir/file2.txt<br>[00:23:18 root@10 data]<span class="hljs-comment">#chown -R zxl:zxl dir/</span><br>[00:23:43 root@10 data]<span class="hljs-comment">#ll dir/</span><br>总用量 0<br>drwxr-xr-x 2 zxl zxl 23 8月   1 00:23 <span class="hljs-built_in">dir</span><br>-rw-r--r-- 1 zxl zxl  0 8月   1 00:22 file.txt<br>[00:23:49 root@10 data]<span class="hljs-comment">#ll dir/dir/</span><br>总用量 0<br>-rw-r--r-- 1 zxl zxl 0 8月   1 00:23 file2.tx<br>************************************************************<br>[00:39:00 root@10 data]<span class="hljs-comment">#ll dir/</span><br>总用量 0<br>drwxr-xr-x 2 zxl zxl 23 8月   1 00:23 <span class="hljs-built_in">dir</span><br>-rw-r--r-- 1 zxl zxl  0 8月   1 00:22 file.txt<br>[00:48:26 root@10 data]<span class="hljs-comment">#ll dir/dir/</span><br>总用量 0<br>-rw-r--r-- 1 zxl zxl 0 8月   1 00:23 file2.txt<br>[00:48:36 root@10 data]<span class="hljs-comment">#chmod -R 777 dir/</span><br>[00:49:04 root@10 data]<span class="hljs-comment">#ll dir/</span><br>总用量 0<br>drwxrwxrwx 2 zxl zxl 23 8月   1 00:23 <span class="hljs-built_in">dir</span><br>-rwxrwxrwx 1 zxl zxl  0 8月   1 00:22 file.txt<br>[00:49:14 root@10 data]<span class="hljs-comment">#ll dir/dir/</span><br>总用量 0<br>-rwxrwxrwx 1 zxl zxl 0 8月   1 00:23 file2.txt<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>磁盘与存储管理</title>
    <link href="/2022/07/24/%E7%A3%81%E7%9B%98%E4%B8%8E%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"/>
    <url>/2022/07/24/%E7%A3%81%E7%9B%98%E4%B8%8E%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="磁盘结构"><a href="#磁盘结构" class="headerlink" title="磁盘结构"></a>磁盘结构</h1><ul><li></li></ul><h1 id="分区类型MBR和GPT"><a href="#分区类型MBR和GPT" class="headerlink" title="分区类型MBR和GPT"></a>分区类型MBR和GPT</h1><figure class="highlight sh"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><pre><code class="hljs sh">[19:31:44 root@localhost ~]<span class="hljs-comment">#hexdump -C -n 512  /dev/sda </span><br>00000000  eb 63 90 10 8e d0 bc 00  b0 b8 00 00 8e d8 8e c0  |.c..............|<br>00000010  fb be 00 7c bf 00 06 b9  00 02 f3 a4 ea 21 06 00  |...|.........!..|<br>00000020  00 be be 07 38 04 75 0b  83 c6 10 81 fe fe 07 75  |....8.u........u|<br>00000030  f3 eb 16 b4 02 b0 01 bb  00 7c b2 80 8a 74 01 8b  |.........|...t..|<br>00000040  4c 02 <span class="hljs-built_in">cd</span> 13 ea 00 7c 00  00 eb fe 00 00 00 00 00  |L.....|.........|<br>00000050  00 00 00 00 00 00 00 00  00 00 00 80 01 00 00 00  |................|<br>00000060  00 00 00 00 ff fa 90 90  f6 c2 80 74 05 f6 c2 70  |...........t...p|<br>00000070  74 02 b2 80 ea 79 7c 00  00 31 c0 8e d8 8e d0 bc  |t....y|..1......|<br>00000080  00 20 fb a0 64 7c 3c ff  74 02 88 c2 52 be 05 7c  |. ..d|&lt;.t...R..||<br>00000090  b4 41 bb aa 55 <span class="hljs-built_in">cd</span> 13 5a  52 72 3d 81 fb 55 aa 75  |.A..U..ZRr=..U.u|<br>000000a0  37 83 e1 01 74 32 31 c0  89 44 04 40 88 44 ff 89  |7...t21..D.@.D..|<br>000000b0  44 02 c7 04 10 00 66 8b  1e 5c 7c 66 89 5c 08 66  |D.....f..\|f.\.f|<br>000000c0  8b 1e 60 7c 66 89 5c 0c  c7 44 06 00 70 b4 42 <span class="hljs-built_in">cd</span>  |..`|f.\..D..p.B.|<br>000000d0  13 72 05 bb 00 70 eb 76  b4 08 <span class="hljs-built_in">cd</span> 13 73 0d 5a 84  |.r...p.v....s.Z.|<br>000000e0  d2 0f 83 de 00 be 85 7d  e9 82 00 66 0f b6 c6 88  |.......&#125;...f....|<br>000000f0  64 ff 40 66 89 44 04 0f  b6 d1 c1 e2 02 88 e8 88  |d.@f.D..........|<br>00000100  f4 40 89 44 08 0f b6 c2  c0 e8 02 66 89 04 66 a1  |.@.D.......f..f.|<br>00000110  60 7c 66 09 c0 75 4e 66  a1 5c 7c 66 31 d2 66 f7  |`|f..uNf.\|f1.f.|<br>00000120  34 88 d1 31 d2 66 f7 74  04 3b 44 08 7d 37 fe c1  |4..1.f.t.;D.&#125;7..|<br>00000130  88 c5 30 c0 c1 e8 02 08  c1 88 d0 5a 88 c6 bb 00  |..0........Z....|<br>00000140  70 8e c3 31 db b8 01 02  <span class="hljs-built_in">cd</span> 13 72 1e 8c c3 60 1e  |p..1......r...`.|<br>00000150  b9 00 01 8e db 31 f6 bf  00 80 8e c6 <span class="hljs-built_in">fc</span> f3 a5 1f  |.....1..........|<br>00000160  61 ff 26 5a 7c be 80 7d  eb 03 be 8f 7d e8 34 00  |a.&amp;Z|..&#125;....&#125;.4.|<br>00000170  be 94 7d e8 2e 00 <span class="hljs-built_in">cd</span> 18  eb fe 47 52 55 42 20 00  |..&#125;.......GRUB .|<br>00000180  47 65 6f 6d 00 48 61 72  64 20 44 69 73 6b 00 52  |Geom.Hard Disk.R|<br>00000190  65 61 64 00 20 45 72 72  6f 72 0d 0a 00 bb 01 00  |ead. Error......|<br>000001a0  b4 0e <span class="hljs-built_in">cd</span> 10 ac 3c 00 75  f4 c3 00 00 00 00 00 00  |.....&lt;.u........|<br>000001b0  00 00 00 00 00 00 00 00  61 e0 3a 38 00 00 80 04  |........a.:8....|<br>000001c0  01 04 83 fe c2 ff 00 08  00 00 00 00 20 00 00 fe  |............ ...|<br>000001d0  c2 ff 83 fe c2 ff 00 08  20 00 00 00 80 0c 00 fe  |........ .......|<br>000001e0  c2 ff 82 fe c2 ff 00 08  a0 0c 00 00 80 00 00 fe  |................|<br>000001f0  c2 ff 05 fe c2 ff 00 08  20 0d 00 f8 <span class="hljs-built_in">df</span> 0b 55 aa  |........ .....U.|<br>00000200<br><br></code></pre></td></tr></table></figure><p><img src="image-20220726005929574.png" alt="image-20220726005929574"></p><h2 id="MBR的备份和还原"><a href="#MBR的备份和还原" class="headerlink" title="MBR的备份和还原"></a>MBR的备份和还原</h2><ul><li>备份MBR</li></ul><p><img src="image-20220726011606091.png" alt="image-20220726011606091"></p><p><img src="image-20220726012113667.png" alt="image-20220726012113667"></p><p><img src="image-20220726012200106.png" alt="image-20220726012200106"></p><p><img src="image-20220726012237168.png" alt="image-20220726012237168"></p><p><img src="image-20220726012251688.png" alt="image-20220726012251688"></p><ul><li>还原MBR</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">reboot</span><br></code></pre></td></tr></table></figure><p><img src="image-20220726012325452.png" alt="image-20220726012325452"></p><p><img src="image-20220726012347063.png" alt="image-20220726012347063"></p><p>按ESC键</p><p><img src="image-20220726012551669.png" alt="image-20220726012551669"></p><p><img src="image-20220726012609035.png" alt="image-20220726012609035"></p><p><img src="image-20220726012910939.png" alt="image-20220726012910939"></p><p><img src="image-20220726013112987.png" alt="image-20220726013112987"></p><p><img src="image-20220726013231729.png" alt="image-20220726013231729"></p><p><img src="image-20220726013251963.png" alt="image-20220726013251963"></p><h2 id="fdisk-l-查看磁盘分区类型"><a href="#fdisk-l-查看磁盘分区类型" class="headerlink" title="fdisk -l 查看磁盘分区类型"></a>fdisk -l 查看磁盘分区类型</h2><p><img src="%E7%A3%81%E7%9B%98%E4%B8%8E%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/image-20220726013930114.png"></p><p><img src="image-20220726014021003.png" alt="image-20220726014021003"></p><h2 id="设备文件"><a href="#设备文件" class="headerlink" title="设备文件"></a>设备文件</h2><h3 id="设备编号"><a href="#设备编号" class="headerlink" title="设备编号"></a>设备编号</h3><ul><li>主要编号</li><li>次要编号</li></ul><h3 id="设备类型"><a href="#设备类型" class="headerlink" title="设备类型"></a>设备类型</h3><ul><li>块设备：block，存取单位“块”，磁盘</li><li>字符设备：char，存取单位“字符”，键盘</li></ul><h3 id="磁盘设备文件的命名"><a href="#磁盘设备文件的命名" class="headerlink" title="磁盘设备文件的命名"></a>磁盘设备文件的命名</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>DEV_FILE<br><span class="hljs-regexp">/dev/</span>sdX <span class="hljs-comment"># SAS,SATA,SCSI,IDE,USB</span><br><span class="hljs-regexp">/dev/</span>nvme0n<span class="hljs-comment"># #nvme协议硬盘，如：第一个硬盘：nvme0n1，第二个硬盘：nvme0n2</span><br></code></pre></td></tr></table></figure><h3 id="虚拟磁盘"><a href="#虚拟磁盘" class="headerlink" title="虚拟磁盘"></a>虚拟磁盘</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>vd<br><span class="hljs-regexp">/dev/</span>xvd<br></code></pre></td></tr></table></figure><h3 id="不同磁盘标识：a-z-aa-ab…"><a href="#不同磁盘标识：a-z-aa-ab…" class="headerlink" title="不同磁盘标识：a-z,aa,ab…"></a>不同磁盘标识：a-z,aa,ab…</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>sda，<span class="hljs-regexp">/dev/</span>sdb, ...<br></code></pre></td></tr></table></figure><h3 id="同一设备上的不同分区：1-2-…"><a href="#同一设备上的不同分区：1-2-…" class="headerlink" title="同一设备上的不同分区：1,2, …"></a>同一设备上的不同分区：1,2, …</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>sda1<br><span class="hljs-regexp">/dev/</span>sda5<br></code></pre></td></tr></table></figure><h3 id="创建设备文件"><a href="#创建设备文件" class="headerlink" title="创建设备文件"></a>创建设备文件</h3><ul><li><p>mknod创建设备文件</p></li><li><p>格式</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">mknod</span> + 文件名 + <span class="hljs-keyword">b</span> + 主要编号 + 次要编号<br></code></pre></td></tr></table></figure></li><li><p>创建块文件和字符文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs sh">[03:39:45 root@10 data]<span class="hljs-comment">#ls</span><br>[03:39:46 root@10 data]<span class="hljs-comment">#df /data/</span><br>文件系统          1K-块   已用     可用 已用% 挂载点<br>/dev/sda5      99564036 727224 98836812    1% /data<br>[03:40:09 root@10 data]<span class="hljs-comment">#ls</span><br>[03:40:18 root@10 data]<span class="hljs-comment">#mknod /data/partition-sdb1 b 8 1</span><br>[03:41:23 root@10 data]<span class="hljs-comment">#ls</span><br>partition-sdb1<br>[03:41:24 root@10 data]<span class="hljs-comment">#ll</span><br>总用量 0<br>brw-r--r-- 1 root root 8, 1 7月  31 03:41 partition-sdb1<br>[03:41:31 root@10 data]<span class="hljs-comment">#mount partition-sdb1 /mnt/</span><br>[03:42:14 root@10 data]<span class="hljs-comment">#ls /mnt/</span><br>config-4.18.0-348.el8.x86_64<br>data<br>efi<br>grub2<br>initramfs-0-rescue-68b00a5c83724da881dcc3a1e31088fa.img<br>initramfs-4.18.0-348.el8.x86_64.img<br>initramfs-4.18.0-348.el8.x86_64kdump.img<br>loader<br>symvers-4.18.0-348.el8.x86_64.gz<br>System.map-4.18.0-348.el8.x86_64<br>vmlinuz-0-rescue-68b00a5c83724da881dcc3a1e31088fa<br>vmlinuz-4.18.0-348.el8.x86_64<br>[03:42:33 root@10 data]<span class="hljs-comment">#ls /boot/</span><br>config-4.18.0-348.el8.x86_64<br>data<br>efi<br>grub2<br>initramfs-0-rescue-68b00a5c83724da881dcc3a1e31088fa.img<br>initramfs-4.18.0-348.el8.x86_64.img<br>initramfs-4.18.0-348.el8.x86_64kdump.img<br>loader<br>symvers-4.18.0-348.el8.x86_64.gz<br>System.map-4.18.0-348.el8.x86_64<br>vmlinuz-0-rescue-68b00a5c83724da881dcc3a1e31088fa<br>vmlinuz-4.18.0-348.el8.x86_64<br>[03:53:56 root@10 data]<span class="hljs-comment">#ll /boot</span><br>总用量 213636<br>-rw-r--r--. 1 root root    193903 10月 19 2021 config-4.18.0-348.el8.x86_64<br>drwxr-xr-x. 2 root root         6 7月  15 11:39 data<br>drwxr-xr-x. 3 root root        17 7月  10 09:46 efi<br>drwx------. 4 root root        83 7月  10 10:10 grub2<br>-rw-------. 1 root root 113628395 7月  10 09:53 initramfs-0-rescue-68b00a5c83724da881dcc3a1e31088fa.img<br>-rw-------. 1 root root  50835217 7月  10 09:56 initramfs-4.18.0-348.el8.x86_64.img<br>-rw-------. 1 root root  29294080 7月  10 10:01 initramfs-4.18.0-348.el8.x86_64kdump.img<br>drwxr-xr-x. 3 root root        21 7月  10 09:51 loader<br>lrwxrwxrwx. 1 root root        45 7月  10 09:51 symvers-4.18.0-348.el8.x86_64.gz -&gt; /lib/modules/4.18.0-348.el8.x86_64/symvers.gz<br>-rw-------. 1 root root   4258248 10月 19 2021 System.map-4.18.0-348.el8.x86_64<br>-rwxr-xr-x. 1 root root  10271880 7月  10 09:52 vmlinuz-0-rescue-68b00a5c83724da881dcc3a1e31088fa<br>-rwxr-xr-x. 1 root root  10271880 10月 19 2021 vmlinuz-4.18.0-348.el8.x86_64<br>[04:02:31 root@10 data]<span class="hljs-comment">#ll /dev/sda1</span><br>brw-rw---- 1 root disk 8, 1 7月  29 09:31 /dev/sda1<br>[04:03:02 root@10 data]<span class="hljs-comment">#lsblk </span><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0  200G  0 disk <br>├─sda1   8:1    0    1G  0 part /data/mn<br>├─sda2   8:2    0  100G  0 part /<br>├─sda3   8:3    0    4G  0 part [SWAP]<br>├─sda4   8:4    0    1K  0 part <br>└─sda5   8:5    0   95G  0 part /data<br>sdb      8:16   0   20G  0 disk <br>sr0     11:0    1 10.1G  0 rom  /run/media/root/CentOS-8-5-2111-x86_64-dvd<br>[04:03:16 root@10 data]<span class="hljs-comment">#df</span><br>文件系统                 1K-块     已用     可用 已用% 挂载点<br>devtmpfs               1871180        0  1871180    0% /dev<br>tmpfs                  1899300        0  1899300    0% /dev/shm<br>tmpfs                  1899300     9828  1889472    1% /run<br>tmpfs                  1899300        0  1899300    0% /sys/fs/cgroup<br>/dev/sda2            104806400 16149676 88656724   16% /<br>/dev/sda5             99564036   727224 98836812    1% /data<br>/data/partition-sdb1   1038336   259948   778388   26% /mnt<br>tmpfs                   379860       52   379808    1% /run/user/0<br>/dev/sr0              10540998 10540998        0  100% /run/media/root/CentOS-8-5-2111-x86_64-dvd<br>[04:04:22 root@10 data]<span class="hljs-comment">#ll /dev/zero </span><br>crw-rw-rw- 1 root root 1, 5 7月  29 09:31 /dev/zero<br>[04:07:49 root@10 data]<span class="hljs-comment">#mknod ./zero -c 1 5</span><br><span class="hljs-built_in">mknod</span>: 不适用的选项 -- c<br>请尝试执行 <span class="hljs-string">&quot;mknod --help&quot;</span> 来获取更多信息。<br>[04:09:10 root@10 data]<span class="hljs-comment">#mknod ./zero c 1 5</span><br>[04:09:22 root@10 data]<span class="hljs-comment">#ls</span><br>mn  partition-sdb1  zero<br><br></code></pre></td></tr></table></figure><h1 id="硬盘类型"><a href="#硬盘类型" class="headerlink" title="硬盘类型"></a>硬盘类型</h1><h2 id="硬盘接口类型"><a href="#硬盘接口类型" class="headerlink" title="硬盘接口类型"></a>硬盘接口类型</h2><ul><li>IDE：133MB/s，并行接口，早期家用电脑</li><li>SCSI：640MB/s，并行接口，早期服务器<br>SATA：6Gbps，SATA数据端口与电源端口是分开的，即需要两条线，一条数据线，一条电源线</li><li>SAS：6Gbps，SAS是一整条线，数据端口与电源端口是一体化的，SAS中是包含供电线的，而SATA中不包含供电线。SATA标准其实是SAS标准的一个子集，二者可兼容，SATA硬盘可以插入SAS主板上，反之不行</li><li>USB：480MB/s</li><li>M.2：</li></ul><p>注意：速度不是由单纯的接口类型决定，支持Nvme协议硬盘速度是最快的</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>linux命令</title>
    <link href="/2022/07/22/linux%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/07/22/linux%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<div align = "center" style="font:30xp">linux命令大全</div><span id="more"></span><h1 id="文件常见处理工具"><a href="#文件常见处理工具" class="headerlink" title="文件常见处理工具"></a>文件常见处理工具</h1><h2 id="文件内容查看命令"><a href="#文件内容查看命令" class="headerlink" title="文件内容查看命令"></a>文件内容查看命令</h2><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><ul><li>打印文本文件</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs cmake">格式：cat [<span class="hljs-keyword">option</span>]...<span class="hljs-keyword">file</span>...<br></code></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs diff">常见选项<br><span class="hljs-deletion">-E：显示行结束符$</span><br><span class="hljs-deletion">-A：显示所有控制符</span><br><span class="hljs-deletion">-n：对一行进行编号</span><br><span class="hljs-deletion">-b：非空行编号</span><br><span class="hljs-deletion">-s：压缩联系的空行成一行</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs bash">[22:56:46 root@localhost ~]<span class="hljs-comment">#cat -E zhang2.sh </span><br><span class="hljs-comment">#!/bin/bash$</span><br><span class="hljs-comment"># **********************************************************$</span><br><span class="hljs-comment">#$</span><br><span class="hljs-comment"># * Author        : 张雪龙$</span><br><span class="hljs-comment"># * Email         : 1024320609@qq.com$</span><br><span class="hljs-comment"># * Create time   : 2022-07-20 15:52$</span><br><span class="hljs-comment"># * Filename      : zhang2.sh$</span><br><span class="hljs-comment"># * Description   : $</span><br><span class="hljs-comment">#$</span><br><span class="hljs-comment"># **********************************************************$</span><br>$<br>$<br>$<br><span class="hljs-built_in">echo</span> 第一个参数 <span class="hljs-variable">$1</span> $<br><span class="hljs-built_in">echo</span> 第二个参数 <span class="hljs-variable">$2</span> $<br><span class="hljs-built_in">echo</span> 第三个参数 <span class="hljs-variable">$3</span> $<br><span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> $<br><span class="hljs-built_in">echo</span> 第所有参数 $* $<br><span class="hljs-built_in">echo</span> 第所有参数 $@$<br>Hello vim$<br>Hello vim2$<br>[22:57:02 root@localhost ~]<span class="hljs-comment">#cat -A zhang2.sh </span><br><span class="hljs-comment">#!/bin/bash$</span><br><span class="hljs-comment"># **********************************************************$</span><br><span class="hljs-comment">#$</span><br><span class="hljs-comment"># * Author        : M-eM-&lt;M- M-iM-^[M-*M-iM-&gt;M-^Y$</span><br><span class="hljs-comment"># * Email         : 1024320609@qq.com$</span><br><span class="hljs-comment"># * Create time   : 2022-07-20 15:52$</span><br><span class="hljs-comment"># * Filename      : zhang2.sh$</span><br><span class="hljs-comment"># * Description   : $</span><br><span class="hljs-comment">#$</span><br><span class="hljs-comment"># **********************************************************$</span><br>$<br>$<br>$<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-dM-8M-^@M-dM-8M-*M-eM-^OM-^BM-fM-^UM-0 <span class="hljs-variable">$1</span> $<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-dM-:M-^LM-dM-8M-*M-eM-^OM-^BM-fM-^UM-0 <span class="hljs-variable">$2</span> $<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-dM-8M-^IM-dM-8M-*M-eM-^OM-^BM-fM-^UM-0 <span class="hljs-variable">$3</span> $<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-eM-^MM-^AM-dM-8M-*M-eM-^OM-^BM-fM-^UM-0 <span class="hljs-variable">$&#123;10&#125;</span> $<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-fM-^IM-^@M-fM-^\M-^IM-eM-^OM-^BM-fM-^UM-0 $* $<br><span class="hljs-built_in">echo</span> M-gM-,M-,M-fM-^IM-^@M-fM-^\M-^IM-eM-^OM-^BM-fM-^UM-0 $@$<br>^[[1;32mHello vim^[[0m$<br>^[[1;34mHello vim2^[[0m$<br><br>[22:57:24 root@localhost ~]<span class="hljs-comment">#cat -n zhang2.sh </span><br>     1<span class="hljs-comment">#!/bin/bash</span><br>     2<span class="hljs-comment"># **********************************************************</span><br>     3<span class="hljs-comment">#</span><br>     4<span class="hljs-comment"># * Author        : 张雪龙</span><br>     5<span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>     6<span class="hljs-comment"># * Create time   : 2022-07-20 15:52</span><br>     7<span class="hljs-comment"># * Filename      : zhang2.sh</span><br>     8<span class="hljs-comment"># * Description   : </span><br>     9<span class="hljs-comment">#</span><br>    10<span class="hljs-comment"># **********************************************************</span><br>    11<br>    12<br>    13<br>    14<span class="hljs-built_in">echo</span> 第一个参数 <span class="hljs-variable">$1</span> <br>    15<span class="hljs-built_in">echo</span> 第二个参数 <span class="hljs-variable">$2</span> <br>    16<span class="hljs-built_in">echo</span> 第三个参数 <span class="hljs-variable">$3</span> <br>    17<span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> <br>    18<span class="hljs-built_in">echo</span> 第所有参数 $* <br>    19<span class="hljs-built_in">echo</span> 第所有参数 <span class="hljs-variable">$@</span><br>    20Hello vim<br>    21Hello vim2<br>[22:58:05 root@localhost ~]<span class="hljs-comment">#cat -b zhang2.sh </span><br>     1<span class="hljs-comment">#!/bin/bash</span><br>     2<span class="hljs-comment"># **********************************************************</span><br>     3<span class="hljs-comment">#</span><br>     4<span class="hljs-comment"># * Author        : 张雪龙</span><br>     5<span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>     6<span class="hljs-comment"># * Create time   : 2022-07-20 15:52</span><br>     7<span class="hljs-comment"># * Filename      : zhang2.sh</span><br>     8<span class="hljs-comment"># * Description   : </span><br>     9<span class="hljs-comment">#</span><br>    10<span class="hljs-comment"># **********************************************************</span><br><br><br><br>    11<span class="hljs-built_in">echo</span> 第一个参数 <span class="hljs-variable">$1</span> <br>    12<span class="hljs-built_in">echo</span> 第二个参数 <span class="hljs-variable">$2</span> <br>    13<span class="hljs-built_in">echo</span> 第三个参数 <span class="hljs-variable">$3</span> <br>    14<span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> <br>    15<span class="hljs-built_in">echo</span> 第所有参数 $* <br>    16<span class="hljs-built_in">echo</span> 第所有参数 <span class="hljs-variable">$@</span><br>    17Hello vim<br>    18Hello vim2<br><br><br></code></pre></td></tr></table></figure><h3 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h3><ul><li>显示行号，相当于cat -b</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">[22:59:18 root@localhost ~]<span class="hljs-comment">#nl zhang2.sh </span><br>     1<span class="hljs-comment">#!/bin/bash</span><br>     2<span class="hljs-comment"># **********************************************************</span><br>     3<span class="hljs-comment">#</span><br>     4<span class="hljs-comment"># * Author        : 张雪龙</span><br>     5<span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>     6<span class="hljs-comment"># * Create time   : 2022-07-20 15:52</span><br>     7<span class="hljs-comment"># * Filename      : zhang2.sh</span><br>     8<span class="hljs-comment"># * Description   : </span><br>     9<span class="hljs-comment">#</span><br>    10<span class="hljs-comment"># **********************************************************</span><br>       <br>       <br>       <br>    11<span class="hljs-built_in">echo</span> 第一个参数 <span class="hljs-variable">$1</span> <br>    12<span class="hljs-built_in">echo</span> 第二个参数 <span class="hljs-variable">$2</span> <br>    13<span class="hljs-built_in">echo</span> 第三个参数 <span class="hljs-variable">$3</span> <br>    14<span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> <br>    15<span class="hljs-built_in">echo</span> 第所有参数 $* <br>    16<span class="hljs-built_in">echo</span> 第所有参数 <span class="hljs-variable">$@</span><br>    17Hello vim<br>    18Hello vim2<br><br></code></pre></td></tr></table></figure><h3 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h3><ul><li>逆向显示文本内容</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[23:00:41 root@localhost ~]#tac zhang2.sh <br>Hello vim2<br>Hello vim<br>echo 第所有参数 $@<br>echo 第所有参数 $<span class="hljs-emphasis">* </span><br><span class="hljs-emphasis">echo 第十个参数 $&#123;10&#125; </span><br><span class="hljs-emphasis">echo 第三个参数 $3 </span><br><span class="hljs-emphasis">echo 第二个参数 $2 </span><br><span class="hljs-emphasis">echo 第一个参数 $1 </span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis"># <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**</span></span><br><span class="hljs-strong"><span class="hljs-emphasis">#</span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># * Description   : </span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># * Filename      : zhang2.sh</span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># * Create time   : 2022-07-20 15:52</span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># * Email         : 1024320609@qq.com</span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># * Author        : 张雪龙</span></span><br><span class="hljs-strong"><span class="hljs-emphasis">#</span></span><br><span class="hljs-strong"><span class="hljs-emphasis"># **</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span></span><br><span class="hljs-emphasis">#!/bin/bash</span><br><span class="hljs-emphasis"></span><br></code></pre></td></tr></table></figure><h3 id="rev"><a href="#rev" class="headerlink" title="rev"></a>rev</h3><ul><li>将同一行的内容逆向显示</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[23:01:56 root@localhost ~]#rev  zhang2.sh <br>hsab/nib/!#<br><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">** #</span><br><span class="hljs-strong">#</span><br><span class="hljs-strong">龙雪张 :        rohtuA <span class="hljs-emphasis">* #</span></span><br><span class="hljs-emphasis"><span class="hljs-strong">moc.qq@9060234201 :         liamE *</span> #</span><br><span class="hljs-strong">25:51 02-70-2202 :   emit etaerC <span class="hljs-emphasis">* #</span></span><br><span class="hljs-emphasis"><span class="hljs-strong">hs.2gnahz :      emaneliF *</span> #</span><br><span class="hljs-strong"> :   noitpircseD <span class="hljs-emphasis">* #</span></span><br><span class="hljs-emphasis"><span class="hljs-strong">#</span></span><br><span class="hljs-emphasis"><span class="hljs-strong">*</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">* #</span></span><br><span class="hljs-emphasis"><span class="hljs-strong"></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"> 1$ 数参个一第 ohce</span></span><br><span class="hljs-emphasis"><span class="hljs-strong"> 2$ 数参个二第 ohce</span></span><br><span class="hljs-emphasis"><span class="hljs-strong"> 3$ 数参个三第 ohce</span></span><br><span class="hljs-emphasis"><span class="hljs-strong"> &#125;01&#123;$ 数参个十第 ohce</span></span><br><span class="hljs-emphasis"><span class="hljs-strong"> *</span>$ 数参有所第 ohce</span><br><span class="hljs-strong">@$ 数参有所第 ohce</span><br><span class="hljs-strong">m0[iv olleHm23;1[</span><br><span class="hljs-strong">0[miv olleHm43;1[</span><br><span class="hljs-strong"></span><br></code></pre></td></tr></table></figure><h3 id="hexdump"><a href="#hexdump" class="headerlink" title="hexdump"></a>hexdump</h3><ul><li>查看非文本文件内容（二进制文件）</li></ul><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[<span class="hljs-number">23</span>:<span class="hljs-number">04</span>:<span class="hljs-number">16</span> root@localhost ~]<span class="hljs-comment">#hexdump -c -n 512  /bin/passwd </span><br><span class="hljs-number">0000000</span> <span class="hljs-number">177</span>   E   L   F <span class="hljs-number">002</span> <span class="hljs-number">001</span> <span class="hljs-number">001</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000010</span> <span class="hljs-number">003</span>  <span class="hljs-string">\0</span>   &gt;  <span class="hljs-string">\0</span> <span class="hljs-number">001</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   <span class="hljs-number">0</span>   <span class="hljs-number">5</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000020</span>   @  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">200</span>   &#123;  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000030</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   @  <span class="hljs-string">\0</span>   <span class="hljs-number">8</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\n</span>  <span class="hljs-string">\0</span>   @  <span class="hljs-string">\0</span> <span class="hljs-number">037</span>  <span class="hljs-string">\0</span> <span class="hljs-number">036</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000040</span> <span class="hljs-number">006</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   @  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000050</span>   @  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   @  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000060</span>   <span class="hljs-number">0</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   <span class="hljs-number">0</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000070</span>  <span class="hljs-string">\b</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">003</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000080</span>   p <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   p <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000090</span>   p <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">034</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000a</span>0 <span class="hljs-number">034</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">001</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000b</span>0 <span class="hljs-number">001</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">005</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000c</span>0  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000d</span>0 <span class="hljs-number">350</span>   <span class="hljs-string">\</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">350</span>   <span class="hljs-string">\</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000e</span>0  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">001</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">006</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00000f</span>0 <span class="hljs-number">350</span>   j  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">350</span>   j      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000100</span> <span class="hljs-number">350</span>   j      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   &lt; <span class="hljs-number">005</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000110</span>   H <span class="hljs-number">006</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000120</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">006</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   k  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000130</span>  <span class="hljs-string">\0</span>   k      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   k      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000140</span> <span class="hljs-number">200</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">200</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000150</span>  <span class="hljs-string">\b</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000160</span> <span class="hljs-number">220</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">220</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000170</span> <span class="hljs-number">220</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000180</span>      <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\b</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000190</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">260</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001a</span>0 <span class="hljs-number">260</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">260</span> <span class="hljs-number">002</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001b</span>0   D  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   D  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001c</span>0 <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   P <span class="hljs-number">345</span>   t   d <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001d</span>0   &lt;   W  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>   &lt;   W  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001e</span>0   &lt;   W  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">244</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">00001f</span>0 <span class="hljs-number">244</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span> <span class="hljs-number">004</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span>  <span class="hljs-string">\0</span><br><span class="hljs-number">0000200</span><br><br></code></pre></td></tr></table></figure><h2 id="分页查看文件内容"><a href="#分页查看文件内容" class="headerlink" title="分页查看文件内容"></a>分页查看文件内容</h2><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><ul><li>可分页查看文件，配合管道实习输出信息的分页</li></ul><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">格式： more [<span class="hljs-keyword">option</span>...] <span class="hljs-keyword">file</span>...<br></code></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-d:显示翻页及退出提示</span><br></code></pre></td></tr></table></figure><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><ul><li>实现分页查看文件或stdin输出，less命令是man命令使用的分页器</li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs excel">查看less有用的命令<br>/文本 搜索 文件<br><span class="hljs-built_in">n</span>/<span class="hljs-built_in">N</span> 跳到下一个或上一个匹配<br></code></pre></td></tr></table></figure><h2 id="显示文本前面或后面的行内容"><a href="#显示文本前面或后面的行内容" class="headerlink" title="显示文本前面或后面的行内容"></a>显示文本前面或后面的行内容</h2><h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><ul><li>显示文件或标准输入的前面文件</li></ul><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">格式：head [option]... [file]...<br></code></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean">选项<br>-c #：指定获取前#个字节<br>-n #：指定获取前#行，#如果是负数，表示从文件头取到倒数第#前，默认打开前<span class="hljs-number">10</span>行<br>-#：同上<br></code></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[23:14:17 root@localhost ~]#head -n -5  zhang2.sh <br><span class="hljs-section">#!/bin/bash</span><br><span class="hljs-section"># <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**</span></span><br><span class="hljs-strong"><span class="hljs-section">#</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Author        : 张雪龙</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Email         : 1024320609@qq.com</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Create time   : 2022-07-20 15:52</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Filename      : zhang2.sh</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Description   : </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">*</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">echo 第一个参数 $1 </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">echo 第二个参数 $2 </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">echo 第三个参数 $3 </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">[23:14:17 root@localhost ~]#head -n -5  zhang2.sh </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#!/bin/bash</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">*</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Author        : 张雪龙</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Email         : 1024320609@qq.com</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Create time   : 2022-07-20 15:52</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Filename      : zhang2.sh</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Description   : </span></span><br><span class="hljs-strong"><span class="hljs-section">#</span></span><br><span class="hljs-strong"><span class="hljs-section"># **</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span></span><br><br>[23:14:17 root@localhost ~]#head -n -5  zhang2.sh <br><span class="hljs-section">#!/bin/bash</span><br><span class="hljs-section"># <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**</span></span><br><span class="hljs-strong"><span class="hljs-section">#</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Author        : 张雪龙</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Email         : 1024320609@qq.com</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Create time   : 2022-07-20 15:52</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Filename      : zhang2.sh</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Description   : </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">*</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">[23:14:26 root@localhost ~]#head -n 5  zhang2.sh </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#!/bin/bash</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">*</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"># *</span> Author        : 张雪龙</span></span><br><span class="hljs-strong"><span class="hljs-section"># <span class="hljs-emphasis">* Email         : 1024320609@qq.com</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">[23:15:26 root@localhost ~]#head -c 5  zhang2.sh </span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section">#!/bi[23:17:13 root@localhost ~]#</span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="hljs-section"></span></span></span><br></code></pre></td></tr></table></figure><h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><ul><li><strong>和head相反，查看文件或标准输入的倒数行</strong></li><li><strong>格式</strong></li></ul><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">tail [option]...[file]...<br></code></pre></td></tr></table></figure><ul><li><strong>选项</strong></li></ul><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><br><span class="hljs-literal">-</span>c <span class="hljs-comment">#：指定获取后#字节</span><br><span class="hljs-literal">-</span>n <span class="hljs-comment">#：指定获取后#行，如果#是负数，表示从第#行开始到文件结束</span><br><span class="hljs-literal">-</span><span class="hljs-comment">#：同上</span><br><span class="hljs-literal">-</span>f：跟踪显示文件fd新追加的内容，常用于日志监控，相当于：--follow=descriptor，当文件删除再新建同名文件，将无法继续跟踪文件<br><span class="hljs-literal">-</span>F：跟踪文件名，相当于：--follow=name --retry，当文件删除在新建同名文件，将可以继续跟踪文件<br>tailif： 类似 tail -f，当文件不增长是并不访问文件，节约资源，centos8已无此工具<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">[23:17:40 root@localhost ~]<span class="hljs-comment">#tail -c 20 zhang2.sh </span><br>1;34mHello vim2<br>[23:27:25 root@localhost ~]<span class="hljs-comment">#tail -n 5 zhang2.sh </span><br><span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> <br><span class="hljs-built_in">echo</span> 第所有参数 $* <br><span class="hljs-built_in">echo</span> 第所有参数 <span class="hljs-variable">$@</span><br>Hello vim<br>Hello vim2<br>[23:28:56 root@localhost ~]<span class="hljs-comment">#tail  -f   zhang2.sh </span><br><br><br><span class="hljs-built_in">echo</span> 第一个参数 <span class="hljs-variable">$1</span> <br><span class="hljs-built_in">echo</span> 第二个参数 <span class="hljs-variable">$2</span> <br><span class="hljs-built_in">echo</span> 第三个参数 <span class="hljs-variable">$3</span> <br><span class="hljs-built_in">echo</span> 第十个参数 <span class="hljs-variable">$&#123;10&#125;</span> <br><span class="hljs-built_in">echo</span> 第所有参数 $* <br><span class="hljs-built_in">echo</span> 第所有参数 <span class="hljs-variable">$@</span><br>Hello vim<br>Hello vim2<br>   <span class="hljs-built_in">echo</span> <span class="hljs-built_in">tail</span> -f <span class="hljs-built_in">command</span>   <br><br></code></pre></td></tr></table></figure><h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><ul><li><strong>按列抽取文本</strong></li><li><strong>格式</strong></li></ul><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">cut [option]...[file]...<br></code></pre></td></tr></table></figure><ul><li><strong>常用选项</strong></li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>-d delimit：指明分隔符，默认tab<br>-f fileds：<br>#：第#个字段，案例：<span class="hljs-number">3</span><br>#,#[,#]:离散的多个字段，例如：<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span><br>#-#：连续的多个字段，例如<span class="hljs-number">1</span><span class="hljs-number">-6</span><br>混合使用：<span class="hljs-number">1</span><span class="hljs-number">-3</span>,<span class="hljs-number">7</span><br>-c：按字符切割<br>--output-delimiter=string指定输出分隔符<br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs bash">[23:37:14 root@localhost ~]<span class="hljs-comment">#cut -d: -f1,3,5 passwd </span><br>root:0:root<br>bin:1:bin<br>daemon:2:daemon<br>adm:3:adm<br>lp:4:lp<br><span class="hljs-built_in">sync</span>:5:<span class="hljs-built_in">sync</span><br>shutdown:6:shutdown<br>halt:7:halt<br>mail:8:mail<br>operator:11:operator<br>games:12:games<br>ftp:14:FTP User<br>nobody:65534:Kernel Overflow User<br>dbus:81:System message bus<br>systemd-coredump:999:systemd Core Dumper<br>systemd-resolve:193:systemd Resolver<br>tss:59:Account used <span class="hljs-keyword">for</span> TPM access<br>polkitd:998:User <span class="hljs-keyword">for</span> polkitd<br>geoclue:997:User <span class="hljs-keyword">for</span> geoclue<br>rtkit:172:RealtimeKit<br>pipewire:996:PipeWire System Daemon<br>pulse:171:PulseAudio System Daemon<br>qemu:107:qemu user<br>usbmuxd:113:usbmuxd user<br>unbound:995:Unbound DNS resolver<br>gluster:994:GlusterFS daemons<br>rpc:32:Rpcbind Daemon<br>avahi:70:Avahi mDNS/DNS-SD Stack<br>chrony:993:<br>saslauth:992:Saslauthd user<br>libstoragemgmt:991:daemon account <span class="hljs-keyword">for</span> libstoragemgmt<br>dnsmasq:983:Dnsmasq DHCP and DNS server<br>radvd:75:radvd user<br>sssd:982:User <span class="hljs-keyword">for</span> sssd<br>cockpit-ws:981:User <span class="hljs-keyword">for</span> cockpit web service<br>cockpit-wsinstance:980:User <span class="hljs-keyword">for</span> cockpit-ws instances<br>colord:979:User <span class="hljs-keyword">for</span> colord<br>rpcuser:29:RPC Service User<br>setroubleshoot:978:<br>flatpak:977:User <span class="hljs-keyword">for</span> flatpak system helper<br>gdm:42:<br>clevis:976:Clevis Decryption Framework unprivileged user<br>gnome-initial-setup:975:<br>tcpdump:72:<br>sshd:74:Privilege-separated SSH<br>zxl:1000:zxl<br>mysql:123:<br>zhangxuelong:1001:<br>zhangsan:1002:<br>test01:1003:<br>test02:1004:<br>apache:48:Apache<br><br>[23:37:52 root@localhost ~]<span class="hljs-comment">#cut -d: -f1-3,5 passwd </span><br>root:x:0:root<br>bin:x:1:bin<br>daemon:x:2:daemon<br>adm:x:3:adm<br>lp:x:4:lp<br><span class="hljs-built_in">sync</span>:x:5:<span class="hljs-built_in">sync</span><br>shutdown:x:6:shutdown<br>halt:x:7:halt<br>mail:x:8:mail<br>operator:x:11:operator<br>games:x:12:games<br>ftp:x:14:FTP User<br>nobody:x:65534:Kernel Overflow User<br>dbus:x:81:System message bus<br>systemd-coredump:x:999:systemd Core Dumper<br>systemd-resolve:x:193:systemd Resolver<br>tss:x:59:Account used <span class="hljs-keyword">for</span> TPM access<br>polkitd:x:998:User <span class="hljs-keyword">for</span> polkitd<br>geoclue:x:997:User <span class="hljs-keyword">for</span> geoclue<br>rtkit:x:172:RealtimeKit<br>pipewire:x:996:PipeWire System Daemon<br>pulse:x:171:PulseAudio System Daemon<br>qemu:x:107:qemu user<br>usbmuxd:x:113:usbmuxd user<br>unbound:x:995:Unbound DNS resolver<br>gluster:x:994:GlusterFS daemons<br>rpc:x:32:Rpcbind Daemon<br>avahi:x:70:Avahi mDNS/DNS-SD Stack<br>chrony:x:993:<br>saslauth:x:992:Saslauthd user<br>libstoragemgmt:x:991:daemon account <span class="hljs-keyword">for</span> libstoragemgmt<br>dnsmasq:x:983:Dnsmasq DHCP and DNS server<br>radvd:x:75:radvd user<br>sssd:x:982:User <span class="hljs-keyword">for</span> sssd<br>cockpit-ws:x:981:User <span class="hljs-keyword">for</span> cockpit web service<br>cockpit-wsinstance:x:980:User <span class="hljs-keyword">for</span> cockpit-ws instances<br>colord:x:979:User <span class="hljs-keyword">for</span> colord<br>rpcuser:x:29:RPC Service User<br>setroubleshoot:x:978:<br>flatpak:x:977:User <span class="hljs-keyword">for</span> flatpak system helper<br>gdm:x:42:<br>clevis:x:976:Clevis Decryption Framework unprivileged user<br>gnome-initial-setup:x:975:<br>tcpdump:x:72:<br>sshd:x:74:Privilege-separated SSH<br>zxl:x:1000:zxl<br>mysql:x:123:<br>zhangxuelong:x:1001:<br>zhangsan:x:1002:<br>test01:x:1003:<br>test02:x:1004:<br>apache:x:48:Apache<br><br><br>[23:38:40 root@localhost ~]<span class="hljs-comment">#df</span><br>文件系统           1K-块    已用     可用 已用% 挂载点<br>devtmpfs         1871176       0  1871176    0% /dev<br>tmpfs            1899296       0  1899296    0% /dev/shm<br>tmpfs            1899296    9648  1889648    1% /run<br>tmpfs            1899296       0  1899296    0% /sys/fs/cgroup<br>/dev/sda2      104806400 5954468 98851932    6% /<br>/dev/sda5       99564036  727228 98836808    1% /data<br>/dev/sda1        1038336  259948   778388   26% /boot<br>tmpfs             379856      12   379844    1% /run/user/42<br>tmpfs             379856       0   379856    0% /run/user/0<br>[23:39:56 root@localhost ~]<span class="hljs-comment">#df | cut -c 45-46</span><br><br> 0<br> 0<br> 1<br> 0<br> 6<br> 1<br>26<br> 1<br> 0<br><br>[23:40:58 root@localhost ~]<span class="hljs-comment">#echo &#123;1..5&#125;</span><br>1 2 3 4 5<br>[23:43:22 root@localhost ~]<span class="hljs-comment">#echo &#123;1..5&#125; | cut -d &quot; &quot; -f1-5 --output-delimiter=&quot;+&quot;</span><br>1+2+3+4+5<br>[23:44:06 root@localhost ~]<span class="hljs-comment">#echo &#123;1..5&#125; | cut -d &quot; &quot; -f1-5 --output-delimiter=&quot;+&quot;|bc</span><br>15<br><br></code></pre></td></tr></table></figure><h3 id="paste"><a href="#paste" class="headerlink" title="paste"></a>paste</h3><ul><li><strong>合并多个文件同行好的列到一行</strong></li><li><strong>格式</strong></li></ul><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">paste [option]...[file]...<br></code></pre></td></tr></table></figure><ul><li><strong>常用选项</strong></li></ul><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>d <span class="hljs-comment">#分隔符：指定分隔符，默认用tab</span><br><span class="hljs-literal">-</span>s <span class="hljs-comment">#所有行合并成一行显示</span><br></code></pre></td></tr></table></figure><ul><li>案例</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">[23:50:07 root@localhost ~]<span class="hljs-comment">#cat p2.txt </span><br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>[23:50:12 root@localhost ~]<span class="hljs-comment">#cat p1.txt </span><br>a<br>b<br>c<br>d<br>e<br>f<br>g<br>[23:50:31 root@localhost ~]<span class="hljs-comment">#paste p1 p2</span><br><span class="hljs-built_in">paste</span>: p1: 没有那个文件或目录<br>[23:50:42 root@localhost ~]<span class="hljs-comment">#paste p1.txt p2.txt</span><br>a1<br>b2<br>c3<br>d4<br>e5<br>f6<br>g7<br><br>[23:51:42 root@localhost ~]<span class="hljs-comment">#paste -d&quot;:&quot; p1.txt p2.txt</span><br>a:1<br>b:2<br>c:3<br>d:4<br>e:5<br>f:6<br>g:7<br><br>[23:52:17 root@localhost ~]<span class="hljs-comment">#paste -s p1.txt p2.txt</span><br>abcdefg<br>1234567<br>[23:53:23 root@localhost ~]<span class="hljs-comment">#paste -s -d &quot;_&quot; p1.txt p2.txt</span><br>a_b_c_d_e_f_g<br>1_2_3_4_5_6_7<br><br>[00:02:15 root@localhost ~]<span class="hljs-comment">#cat user.txt </span><br>zhangsan<br>zxl<br>zhangxuelong<br>[00:02:31 root@localhost ~]<span class="hljs-comment">#cat password.txt </span><br>123<br>321<br>123<br>[00:02:36 root@localhost ~]<span class="hljs-comment">#paste -d &quot;:&quot; user.txt password.txt | chpasswd </span><br>[00:02:42 root@localhost ~]<span class="hljs-comment">#</span><br><br></code></pre></td></tr></table></figure><h2 id="分析文本的工具"><a href="#分析文本的工具" class="headerlink" title="分析文本的工具"></a>分析文本的工具</h2><h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h3><ul><li><strong>文本数据统计</strong></li><li><strong>选项</strong></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-l：只计数行数</span><br><span class="hljs-deletion">-w：只计数单词总数</span><br><span class="hljs-deletion">-c：只计数字节总数</span><br><span class="hljs-deletion">-L：显示文件中最长行的长度</span><br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">[00:05:34 root@localhost ~]<span class="hljs-comment">#wc passwd </span><br>  52  111 2830 passwd<br>[00:05:46 root@localhost ~]<span class="hljs-comment">#cat passwd |wc</span><br>     52     111    2830<br>[00:06:07 root@localhost ~]<span class="hljs-comment">#cat passwd |wc -l</span><br>52<br>[00:06:26 root@localhost ~]<span class="hljs-comment">#cat passwd |wc -c</span><br>2830<br>[00:06:30 root@localhost ~]<span class="hljs-comment">#cat passwd |wc -m</span><br>2830<br>[00:06:35 root@localhost ~]<span class="hljs-comment">#cat passwd |wc -L</span><br>94<br><br></code></pre></td></tr></table></figure><h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><ul><li><strong>文本排序</strong></li><li><strong>格式</strong></li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss">sort <span class="hljs-selector-attr">[option]</span> <span class="hljs-built_in">file</span>(s)<br></code></pre></td></tr></table></figure><ul><li><strong>常用选项</strong></li></ul><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span>r：执行反方向（由下至上）整理<br><span class="hljs-literal">-</span>R：随机排序<br><span class="hljs-literal">-</span>n：执行按数字大小整理<br><span class="hljs-literal">-</span>h：人类可读排序，如：2K 1G<br><span class="hljs-literal">-</span>f：选项忽略（fold）字符串的字符大小写<br><span class="hljs-literal">-</span>u：选项（独特，unique），合并重复项，即去重<br><span class="hljs-literal">-</span>t：c选项使用c做为字段界定符<br><span class="hljs-literal">-</span>k <span class="hljs-comment">#：选项安装使用c字符分隔的#列来整理能够使用多次</span><br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#按照uid（第三列）数字由大到小排序，并只显示3行</span><br>[00:06:48 root@localhost ~]<span class="hljs-comment">#cat passwd |sort -t &quot;:&quot; -k3 -nr | head -n 3</span><br>nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin<br>test02:x:1004:1004::/home/test02:/bin/bash<br>test01:x:1003:1003::/home/test01:/bin/bash<br><br><span class="hljs-comment">#统计http访问量</span><br>[00:19:31 root@localhost ~]<span class="hljs-comment">#head /var/log/httpd/access_log</span><br>192.168.100.1 - - [21/Jul/2022:11:07:35 +0800] <span class="hljs-string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 196 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:07:36 +0800] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> 403 199691 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:07:36 +0800] <span class="hljs-string">&quot;GET /poweredby.png HTTP/1.1&quot;</span> 200 5714 <span class="hljs-string">&quot;http://192.168.100.30/&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:07:36 +0800] <span class="hljs-string">&quot;GET /icons/poweredby.png HTTP/1.1&quot;</span> 200 643 <span class="hljs-string">&quot;http://192.168.100.30/&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:09:35 +0800] <span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span> 200 49 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:09:35 +0800] <span class="hljs-string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 196 <span class="hljs-string">&quot;http://192.168.100.30/&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:10:27 +0800] <span class="hljs-string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 196 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:10:27 +0800] <span class="hljs-string">&quot;-&quot;</span> 408 - <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;-&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:10:27 +0800] <span class="hljs-string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 196 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>192.168.100.1 - - [21/Jul/2022:11:10:28 +0800] <span class="hljs-string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 196 <span class="hljs-string">&quot;-&quot;</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot;</span><br>[00:19:43 root@localhost ~]<span class="hljs-comment">#cut -d &quot; &quot; -f1 | head </span><br>^C<br>[00:21:08 root@localhost ~]<span class="hljs-comment">#cut -d &quot; &quot; -f1 /var/log/httpd/access_log | head </span><br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>192.168.100.1<br>[00:21:27 root@localhost ~]<span class="hljs-comment">#cut -d &quot; &quot; -f1 /var/log/httpd/access_log |sort -u </span><br>192.168.100.1<br>192.168.100.30<br><br><span class="hljs-comment">#统计分区使用率</span><br>[00:22:32 root@localhost ~]<span class="hljs-comment">#df</span><br>文件系统           1K-块    已用     可用 已用% 挂载点<br>devtmpfs         1871176       0  1871176    0% /dev<br>tmpfs            1899296       0  1899296    0% /dev/shm<br>tmpfs            1899296    9648  1889648    1% /run<br>tmpfs            1899296       0  1899296    0% /sys/fs/cgroup<br>/dev/sda2      104806400 5981732 98824668    6% /<br>/dev/sda5       99564036  727228 98836808    1% /data<br>/dev/sda1        1038336  259948   778388   26% /boot<br>tmpfs             379856      12   379844    1% /run/user/42<br>tmpfs             379856       0   379856    0% /run/user/0<br>[00:33:17 root@localhost ~]<span class="hljs-comment">#df | cut -c &quot;45-46&quot;|sort -rn|head -n1</span><br>26<br></code></pre></td></tr></table></figure><p>面试题：两个文件a.txt ,b.txt 合并两个文件，并输出时确保每个数字也唯一</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">[00:38:13 root@localhost ~]<span class="hljs-comment">#cat a.txt b.txt </span><br>100<br>200<br>300<br>400<br>500<br>800<br>100<br>500<br>300<br>400<br>600<br>800<br>100<br>200<br>600<br>[00:38:32 root@localhost ~]<span class="hljs-comment">#cat a.txt b.txt |sort -u</span><br>100<br>200<br>300<br>400<br>500<br>600<br>800<br><br></code></pre></td></tr></table></figure><h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><ul><li><strong>去重命令，uniq命令从输入中删除前后相接的重复的行</strong></li><li><strong>格式</strong></li></ul><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">uni<span class="hljs-string">q [option]</span>...[file]...<br></code></pre></td></tr></table></figure><ul><li><strong>常见选项</strong></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-c：显示每行重复出现的次数</span><br><span class="hljs-deletion">-d：仅显示重复过的行</span><br><span class="hljs-deletion">-u：仅显示不曾重复的行</span><br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#统计http访问量次数</span><br>[00:39:15 root@localhost ~]<span class="hljs-comment">#cut -d &quot; &quot; -f1 /var/log/httpd/access_log |uniq -c | sort -rn </span><br>     16 192.168.100.1<br>     14 192.168.100.1<br>      5 192.168.100.30<br>      3 192.168.100.1<br>      1 192.168.100.30<br>      1 192.168.100.30<br>      1 192.168.100.1<br><br></code></pre></td></tr></table></figure><h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><ul><li><strong>命令比较两个文件之间的区别</strong></li><li><strong>选项</strong></li></ul><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-u：选项来输出统一的（unified）different格式文件，最适用于补丁文件</span><br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs bash">[01:34:42 root@localhost ~]<span class="hljs-comment">#diff a.txt b.txt </span><br>1,2d0<br>&lt; 100<br>&lt; 200<br>5c3<br>&lt; 500<br>---<br>&gt; 600<br>8c6,7<br>&lt; 500<br>---<br>&gt; 200<br>&gt; 600<br>[01:34:58 root@localhost ~]<span class="hljs-comment">#diff -u a.txt b.txt </span><br>--- a.txt2022-07-23 00:37:40.166152947 +0800<br>+++ b.txt2022-07-23 00:38:13.457150762 +0800<br>@@ -1,8 +1,7 @@<br>-100<br>-200<br> 300<br> 400<br>-500<br>+600<br> 800<br> 100<br>-500<br>+200<br>+600<br><br>[01:35:12 root@localhost ~]<span class="hljs-comment">#diff -u a.txt b.txt &gt; f.patch</span><br>[01:36:28 root@localhost ~]<span class="hljs-comment">#rm -f b.txt </span><br>[01:36:40 root@localhost ~]<span class="hljs-comment">#patch -b a.txt f.patch </span><br>patching file a.txt<br>[01:37:41 root@localhost ~]<span class="hljs-comment">#cat a.txt a.txt.orig </span><br>300<br>400<br>600<br>800<br>100<br>200<br>600<br>100<br>200<br>300<br>400<br>500<br>800<br>100<br>500<br><br><br></code></pre></td></tr></table></figure><h3 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h3><ul><li><strong>复制在其他文件中进行的改变（要谨慎适用）</strong></li><li><strong>选项</strong></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">-<span class="hljs-selector-tag">b</span>：选项来自动备份改变了的文件<br></code></pre></td></tr></table></figure><ul><li><p><strong>vimidff</strong></p></li><li><p><strong>相当于 vim -d</strong></p></li><li><p><strong>案例</strong></p></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[01:38:06 root@localhost ~]</span><span class="hljs-selector-id">#which</span> vimdiff <br>/usr/bin/vimdiff<br><span class="hljs-selector-attr">[01:41:15 root@localhost ~]</span><span class="hljs-selector-id">#ll</span> /usr/bin/vimdiff<br>lrwxrwxrwx. <span class="hljs-number">1</span> root root <span class="hljs-number">3</span> <span class="hljs-number">9</span>月  <span class="hljs-number">22</span> <span class="hljs-number">2021</span> /usr/bin/vimdiff -&gt; vim<br><span class="hljs-selector-attr">[01:41:32 root@localhost ~]</span><span class="hljs-selector-id">#vimdiff</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span><span class="hljs-selector-class">.orig</span> <br>还有 <span class="hljs-number">2</span> 个文件等待编辑<br></code></pre></td></tr></table></figure><p><img src="image-20220723014509036.png" alt="image-20220723014509036"></p><h3 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a>cmp</h3><ul><li><strong>查看二进制文件的不同</strong></li><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">[01:43:03 root@localhost ~]<span class="hljs-comment">#cmp /bin/ls /bin/dir </span><br>/bin/ls /bin/dir 不同：第 793 字节，第 1 行<br>[01:51:39 root@localhost ~]<span class="hljs-comment">#hexdump -s 790 -cn 30 /bin/ls  </span><br>0000316   U  \0 274 313   L 027   Q   l   j 232 325 234   &gt; 301 233   4<br>0000326   | 203   <span class="hljs-comment">#   l 004 302  \0  \0  \0  \0 003  \0  \0  \0        </span><br>0000334<br>[01:53:09 root@localhost ~]<span class="hljs-comment">#hexdump -s 790 -cn 30 /bin/dir  </span><br>0000316   U  \0   J 257 260 035   q   B 266 347 340 376   . 345   &#125; 372<br>0000326 347   Z   &lt; 365 206 216  \0  \0  \0  \0 003  \0  \0  \0        <br>0000334<br><br></code></pre></td></tr></table></figure><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><ul><li>基本表达式</li><li>扩展表达式</li></ul><h2 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h2><h3 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a>字符匹配</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs markdown">.：匹配任意单个字符（\n）外，可以是一个汉字或其他国家的文字<br>[]:匹配指定范围的任意单个字符，示例：[zhang]、[0-9]、[a-z]、[a-zA-Z]<br>[<span class="hljs-symbol">^</span>]:<span class="hljs-link">匹配指定范围外的人员单个字符，示例[^zhang]</span><br>[<span class="hljs-symbol">:alnum:</span>]:<span class="hljs-link">字母和数字</span><br>[<span class="hljs-symbol">:alpha:</span>]:<span class="hljs-link">表示因为大小写字符,可以是a-z,A-Z</span><br>[<span class="hljs-symbol">:lower:</span>]:<span class="hljs-link">表示小写字母，等价于[a-z]</span><br>[<span class="hljs-symbol">:upper:</span>]:<span class="hljs-link">表示大小字母，等价于[A-Z]</span><br>[<span class="hljs-symbol">:blank:</span>]:<span class="hljs-link">表示空白字符</span><br>[<span class="hljs-symbol">:space:</span>]:<span class="hljs-link">包括空格、制表符（水平和垂直）、换行符、回车符等各种类型的空白，比[:blank:]包含的范围广</span><br>[<span class="hljs-symbol">:cntrl:</span>]:<span class="hljs-link">不可打印的控制字符</span><br><span class="hljs-section">[:digit:]:十进制数字</span><br><span class="hljs-section">---------------------------------------------------------------------------</span><br>\s:匹配任何空白字符，包括空格、制表符（水平和垂直）、换行符、换页符等等，等价于[\f\r\t\v],主要Unicode正则  表达式会匹配全角空格符<br>\S:匹配任何非空白字符，等价于[^\f\r\t\v]<br>\w:匹配任意一个字母，数字，下划线，汉字，其他国家文字的字符，等价于[<span class="hljs-emphasis">_[:alnum:]字]</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">\W:匹配任意非一个字母，数字，下划线，汉字，其他国家文字的字符，等价于[^_</span>[:alnum:]字]<br></code></pre></td></tr></table></figure><ul><li><strong>案例</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">[02:12:38 root@localhost ~]<span class="hljs-comment">#ls /etc/ |grep &#x27;rc[.0-6]&#x27;</span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br>rc.d<br>rc.local<br>[02:13:00 root@localhost ~]<span class="hljs-comment">#ls /etc/ |grep &#x27;rc[.0-6]\.&#x27;</span><br>rc0.d<br>rc1.d<br>rc2.d<br>rc3.d<br>rc4.d<br>rc5.d<br>rc6.d<br><br></code></pre></td></tr></table></figure><h3 id="匹配次数"><a href="#匹配次数" class="headerlink" title="匹配次数"></a>匹配次数</h3><ul><li>用在要指定次数的字符后面，用于指定前面电子阀要出现的次数</li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs excel">*：匹配前面字符的任意次数，包括<span class="hljs-number">0</span>次，贪婪模式：尽可能长的匹配<br>.*：任意长度的任意字符<br>\?<span class="hljs-symbol">:</span>匹配其前面的字符出现<span class="hljs-number">0</span>次或<span class="hljs-number">1</span>次，即可有可无<br>\+<span class="hljs-symbol">:</span>匹配其前面的字符出现最少<span class="hljs-number">1</span>次，即：肯定大于等于<span class="hljs-number">1</span>次<br>\&#123;<span class="hljs-built_in">n</span>\&#125;<span class="hljs-symbol">:</span>匹配前面的字符<span class="hljs-built_in">N</span>次<br>\&#123;m,<span class="hljs-built_in">n</span>\&#125;<span class="hljs-symbol">:</span>匹配前面的字符至少m次，最多<span class="hljs-built_in">n</span>次<br>\&#123;,\n&#125;：匹配前面的字符最多<span class="hljs-built_in">n</span>次，&lt;=<span class="hljs-built_in">n</span><br>\&#123;<span class="hljs-built_in">n</span>,\&#125;：匹配前面的字符不少于<span class="hljs-built_in">n</span>次<br><br></code></pre></td></tr></table></figure><p>案例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs bash">[14:03:27 root@localhost data]<span class="hljs-comment">#ls</span><br> aaa.txt   aa.txt                abc.txt   acb.txt   ada.txt   ad.txt    aed.txt   afc.txt   agb.txt   ddda.log<br> aab.txt   aba.txt               abd.txt   acc.txt   adb.txt   aea.txt   ae.txt    afd.txt   agc.txt<br> aac.txt   abb.txt               ab.txt    acd.txt   adc.txt   aeb.txt   afa.txt   af.txt    agd.txt<br> aad.txt  <span class="hljs-string">&#x27;[abc][ab][abc].log&#x27;</span>   aca.txt   ac.txt    add.txt   aec.txt   afb.txt   aga.txt   ag.txt<br>[14:03:30 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a\?.txt&quot;</span><br>aaa.txt<br>aab.txt<br>aac.txt<br>aad.txt<br>aa.txt<br>aba.txt<br>abb.txt<br>abc.txt<br>abd.txt<br>ab.txt<br>aca.txt<br>acb.txt<br>acc.txt<br>acd.txt<br>ac.txt<br>ada.txt<br>adb.txt<br>adc.txt<br>add.txt<br>ad.txt<br>aea.txt<br>aeb.txt<br>aec.txt<br>aed.txt<br>ae.txt<br>afa.txt<br>afb.txt<br>afc.txt<br>afd.txt<br>af.txt<br>aga.txt<br>agb.txt<br>agc.txt<br>agd.txt<br>ag.txt<br>[14:03:55 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a\+.txt&quot;</span><br>aaa.txt<br>aa.txt<br>aba.txt<br>aca.txt<br>ada.txt<br>aea.txt<br>afa.txt<br>aga.txt<br>[14:06:10 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a\&#123;2,\&#125;.txt&quot;</span><br>aaa.txt<br>aa.txt<br>[14:07:03 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a\&#123;,2\&#125;.txt&quot;</span><br>aaa.txt<br>aab.txt<br>aac.txt<br>aad.txt<br>aa.txt<br>aba.txt<br>abb.txt<br>abc.txt<br>abd.txt<br>ab.txt<br>aca.txt<br>acb.txt<br>acc.txt<br>acd.txt<br>ac.txt<br>ada.txt<br>adb.txt<br>adc.txt<br>add.txt<br>ad.txt<br>aea.txt<br>aeb.txt<br>aec.txt<br>aed.txt<br>ae.txt<br>afa.txt<br>afb.txt<br>afc.txt<br>afd.txt<br>af.txt<br>aga.txt<br>agb.txt<br>agc.txt<br>agd.txt<br>ag.txt<br>[14:07:16 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a\&#123;1,2\&#125;.txt&quot;</span><br>aaa.txt<br>aa.txt<br>aba.txt<br>aca.txt<br>ada.txt<br>aea.txt<br>afa.txt<br>aga.txt<br>[14:07:44 root@localhost data]<span class="hljs-comment">#ls | grep &quot;a.*.txt&quot;</span><br>aaa.txt<br>aab.txt<br>aac.txt<br>aad.txt<br>aa.txt<br>aba.txt<br>abb.txt<br>abc.txt<br>abd.txt<br>ab.txt<br>aca.txt<br>acb.txt<br>acc.txt<br>acd.txt<br>ac.txt<br>ada.txt<br>adb.txt<br>adc.txt<br>add.txt<br>ad.txt<br>aea.txt<br>aeb.txt<br>aec.txt<br>aed.txt<br>ae.txt<br>afa.txt<br>afb.txt<br>afc.txt<br>afd.txt<br>af.txt<br>aga.txt<br>agb.txt<br>agc.txt<br>agd.txt<br>ag.txt<br>[14:08:13 root@localhost data]<span class="hljs-comment">#ls | grep &quot;aaa*.txt&quot;</span><br>aaa.txt<br>aa.txt<br><br></code></pre></td></tr></table></figure><ul><li>匹配正负数</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h3 id="位置锚定"><a href="#位置锚定" class="headerlink" title="位置锚定"></a>位置锚定</h3><ul><li>位置锚定可以用于定位出现的位置</li></ul><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs elixir">^：行首锚定，用于模式的最左侧<br><span class="hljs-variable">$：</span>行尾锚定，用于模式的最右侧<br>^&lt;<span class="hljs-title class_">PATTERN</span>&gt;<span class="hljs-variable">$：</span>用于模式匹配最右侧<br>^<span class="hljs-variable">$：</span>空行<br>^[[<span class="hljs-symbol">:space</span><span class="hljs-symbol">:</span>]]*<span class="hljs-variable">$：</span>空白行<br>\&lt; 或 \b：词首锚定，用于单词模式的左侧<br>\&gt; 或 \b：词尾锚定，用于单词模式的右侧<br>\&lt;<span class="hljs-title class_">PATTERN</span>&gt;：匹配整个单词<br></code></pre></td></tr></table></figure><ul><li>案例</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[14:31:34 root@localhost data]<span class="hljs-comment">#grep &#x27;^[^#]&#x27; /etc/fstab </span><br>UUID=23a498b0-3783-46e4-b55f-fdb1e1c699bb /                       xfs     defaults        0 0<br>UUID=39c438a4-ad8d-4c9c-a001-7794dc13131a /boot                   xfs     defaults        0 0<br>UUID=6c74e5a8-ebc9-4329-8454-b838f5833073 /data                   xfs     defaults        0 0<br>UUID=b65aa78c-be4d-4c68-a276-c31aee04579a none                    swap    defaults        0 0<br><br></code></pre></td></tr></table></figure><h1 id="shell编程"><a href="#shell编程" class="headerlink" title="shell编程"></a>shell编程</h1><h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs sh">[01:19:16 root@localhost ~]<span class="hljs-comment">#vim chengji.sh</span><br><br>  1 <span class="hljs-comment">#!/bin/bash</span><br>  2 <span class="hljs-comment"># **********************************************************</span><br>  3 <span class="hljs-comment">#</span><br>  4 <span class="hljs-comment"># * Author        : 张雪龙</span><br>  5 <span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>  6 <span class="hljs-comment"># * Create time   : 2022-07-24 00:36</span><br>  7 <span class="hljs-comment"># * Filename      : chengji.sh</span><br>  8 <span class="hljs-comment"># * Description   : </span><br>  9 <span class="hljs-comment">#</span><br> 10 <span class="hljs-comment"># **********************************************************</span><br> 11 <br> 12 <span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入你的成绩: &quot;</span> score<br> 13 [[ <span class="hljs-variable">$score</span> =~ ^(100|[0-9]&#123;1,2&#125;)$ ]] || &#123; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;请输入合法的分数！&quot;</span> ; <span class="hljs-built_in">exit</span> ; &#125;<br> 14 <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$score</span> -lt 60 ] ;<span class="hljs-keyword">then</span><br> 15         <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;及格!&quot;</span><br> 16 <span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$score</span> -lt 80 ] ;<span class="hljs-keyword">then</span><br> 17         <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;良好!&quot;</span><br> 18 <span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$score</span> -lt 100 ] ;<span class="hljs-keyword">then</span><br> 19         <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;优秀!&quot;</span><br> 20 <span class="hljs-keyword">else</span><br> 21         <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;不及格!&quot;</span><br> 22 <span class="hljs-keyword">fi</span><br> <br> <br> [02:11:55 root@localhost ~]<span class="hljs-comment">#vim BMI.sh</span><br><br>  1 <span class="hljs-comment">#!/bin/bash</span><br>  2 <span class="hljs-comment"># **********************************************************</span><br>  3 <span class="hljs-comment">#</span><br>  4 <span class="hljs-comment"># * Author        : 张雪龙</span><br>  5 <span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>  6 <span class="hljs-comment"># * Create time   : 2022-07-24 01:58</span><br>  7 <span class="hljs-comment"># * Filename      : BMI.sh</span><br>  8 <span class="hljs-comment"># * Description   : </span><br>  9 <span class="hljs-comment">#</span><br> 10 <span class="hljs-comment"># **********************************************************</span><br> 11 <br> 12 <span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入你的身高(m)： &quot;</span> HIGH<br> 13 <span class="hljs-keyword">if</span> [[ ! <span class="hljs-string">&quot;<span class="hljs-variable">$HIGH</span>&quot;</span> =~ ^[0-2]([.][0-9]&#123;2&#125;)?$ ]] ;<span class="hljs-keyword">then</span><br> 14     <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;请输入身高有误！&quot;</span> <br> 15     <span class="hljs-built_in">exit</span> 1<br> 16 <span class="hljs-keyword">fi</span><br> 17 <span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入你的体重(kg)： &quot;</span> WEIGHT<br> 18 <span class="hljs-keyword">if</span>  [[ ! <span class="hljs-string">&quot;<span class="hljs-variable">$WEIGHT</span>&quot;</span> =~ ^[0-9]&#123;0,3&#125;$ ]] ;<span class="hljs-keyword">then</span><br> 19     <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;请输入体重有误！&quot;</span> <br> 20     <span class="hljs-built_in">exit</span> 2<br> 21 <span class="hljs-keyword">fi</span><br> 22 <br> 23 BMI=` <span class="hljs-built_in">echo</span> <span class="hljs-variable">$WEIGHT</span>/<span class="hljs-variable">$HIGH</span>^2|bc `<br> 24 <br> 25 <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$BMI</span> -le 18 ] ;<span class="hljs-keyword">then</span><br> 26     <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;你太瘦了！&quot;</span><br> 27 <span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$BMI</span> -le 28 ] ;<span class="hljs-keyword">then</span><br> 28     <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;你身材很棒！！&quot;</span><br> 29 <span class="hljs-keyword">else</span><br> 30     <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;你太胖了！&quot;</span><br> 31 <span class="hljs-keyword">fi</span><br><br><br></code></pre></td></tr></table></figure><h2 id="case"><a href="#case" class="headerlink" title="case"></a>case</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sh">[04:19:17 root@localhost ~]<span class="hljs-comment">#vim menu.sh</span><br><br> 11 <br> 12 <span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;\E[$[RANDOM%7+31];1m&quot;</span> <br> 13 <br> 14 <span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string"> 15 请选择！</span><br><span class="hljs-string"> 16 1)备份数据库</span><br><span class="hljs-string"> 17 2)清理日志</span><br><span class="hljs-string"> 18 3)软件升级</span><br><span class="hljs-string"> 19 4)删库跑路</span><br><span class="hljs-string"> 20 EOF</span><br> 21 <br> 22 <br> 23 <span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;请输入上面数字1-5： &quot;</span> MENU<br> 24 [[ <span class="hljs-variable">$MENU</span> =~ ^[1-5]$ ]] || &#123; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;请输入正确的数字！&quot;</span> ; <span class="hljs-built_in">exit</span> ; &#125;<br> 25 <br> 26 <span class="hljs-keyword">case</span> <span class="hljs-variable">$MENU</span> <span class="hljs-keyword">in</span><br> 27 1)<br> 28      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;备份数据库&quot;</span><br> 29      <span class="hljs-built_in">exit</span><br> 30      ;;<br> 31 2)<br> 32      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;清理日志&quot;</span><br> 33      <span class="hljs-built_in">exit</span><br> 34      ;;<br> 35 3)   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;软件升级&quot;</span><br> 36      <span class="hljs-built_in">exit</span><br> 37      ;;<br> 38 4)<br> 39      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;删库跑路&quot;</span><br> 40      <span class="hljs-built_in">exit</span><br> 41      ;;<br> 42 *)<br> 43      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;输入错误！&quot;</span><br> 44 <span class="hljs-keyword">esac</span><br> 45 <span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;\E[0m&quot;</span><br><br></code></pre></td></tr></table></figure><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sh">[04:42:39 root@localhost ~]<span class="hljs-comment">#bash jjcfb.sh </span><br>1*1=1<br>2*1=22*2=4<br>3*1=33*2=63*3=9<br>4*1=44*2=84*3=124*4=16<br>5*1=55*2=105*3=155*4=205*5=25<br>6*1=66*2=126*3=186*4=246*5=306*6=36<br>7*1=77*2=147*3=217*4=287*5=357*6=427*7=49<br>8*1=88*2=168*3=248*4=328*5=408*6=488*7=568*8=64<br>9*1=99*2=189*3=279*4=369*5=459*6=549*7=639*8=729*9=81<br>[04:42:41 root@localhost ~]<span class="hljs-comment">#vim jjcfb.sh</span><br><br>  1 <span class="hljs-comment">#!/bin/bash</span><br>  2 <span class="hljs-comment"># **********************************************************</span><br>  3 <span class="hljs-comment">#</span><br>  4 <span class="hljs-comment"># * Author        : 张雪龙</span><br>  5 <span class="hljs-comment"># * Email         : 1024320609@qq.com</span><br>  6 <span class="hljs-comment"># * Create time   : 2022-07-24 04:34</span><br>  7 <span class="hljs-comment"># * Filename      : jjcfb.sh</span><br>  8 <span class="hljs-comment"># * Description   : </span><br>  9 <span class="hljs-comment">#</span><br> 10 <span class="hljs-comment"># **********************************************************</span><br> 11 <br> 12 <br> 13 <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> &#123;1..9&#125; ;<span class="hljs-keyword">do</span><br> 14     <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> `<span class="hljs-built_in">seq</span> <span class="hljs-variable">$i</span>` ;<span class="hljs-keyword">do</span><br> 15     <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>*<span class="hljs-variable">$j</span>=$[i*j]\t\c&quot;</span><br> 16     <span class="hljs-keyword">done</span><br> 17 <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;&quot;</span><br> 18 <span class="hljs-keyword">done</span><br> 19 <span class="hljs-built_in">exit</span><br><br></code></pre></td></tr></table></figure><h1 id=""><a href="#" class="headerlink" title=""></a></h1><p>修改提示符格式范例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">PS1=<span class="hljs-string">&quot;\[\e[1;5;41;33m\][\u@\h \W]\\$\[\e[0m\]&quot;</span><br>PS1=<span class="hljs-string">&quot;\[\e[1;32m\][\t \[\e[1;33m\]\u\[\e[35m\]@\h\[\e[1;31m\] \W\[\e[1;32m\]]\[\e[0m\]\\$&quot;</span><br></code></pre></td></tr></table></figure><p>提示符格式说明：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">\e 控制符\033<br>\u 当前用户<br>\h 主机名简称<br>\H 主机名<br>\w 当前工作目录<br>\W 当前工作目录基名<br>\t 24小时时间格式<br>\T 12小时时间格式<br>! 命令历史数<br></code></pre></td></tr></table></figure><h1 id="开机后命令历史数"><a href="#开机后命令历史数" class="headerlink" title="开机后命令历史数"></a>开机后命令历史数</h1>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>面试问题</title>
    <link href="/2022/07/14/%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/"/>
    <url>/2022/07/14/%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>linux面试题</p><span id="more"></span><h1 id="linux文件类型有几种？"><a href="#linux文件类型有几种？" class="headerlink" title="linux文件类型有几种？"></a>linux文件类型有几种？</h1><ul><li><p>```sh<br>7种。<br>1、普通文件类型。</p><div class="code-wrapper"><pre><code class="hljs">纯文本文件(ASCII)二进制文件(binary)数据格式的文件(data)</code></pre></div><p>2、目录文件类型。<br>   用于存放文件名以及其相关信息的文件，是内核组织文件系统的基本节点。目录文件可以包含下一级文    件目录或者普通文件，在Linux中，目录文件是一种文件<br>3、块设备文件类型。<br>   就是存储数据以供系统存取的接口设备，简单而言就是硬盘。例如一号硬盘的代码是 /dev/hda1等文件。<br>4、字符设备类型。<br>   字符设备文件：即串行端口的接口设备，例如键盘、鼠标等等。<br>5、套接字文件类型。<br>   这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信。<br>6、管道文件类型。<br>   是一种很特殊的文件，主要用于不同进程的信息传递。当两个进程需要进行数据或者信息传递时，可以    使用通道文件，一个进程将需要传递的数据或者信息写入管道的一端，另一进程从管道的另一端取得所    需要的数据或者信息，通常管道是建立在调整缓存中。<br>7、链接文件类型。<br>   是一种特殊文件，指向一个真实存在的文件链接，类似于Windows下的快捷方式，链接文件的不同，又    可分为硬链接文件和符号链接文件。</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><pre><code class="hljs mipsasm"><br><br><br><span class="hljs-comment"># 批量修改文件</span><br><br> - ```<br>   rename<br>   [root@localhost ~]<span class="hljs-comment"># rename txt txt.org /data/*.txt</span><br>   [root@localhost ~]<span class="hljs-comment"># ls /data/</span><br>    a                <span class="hljs-keyword">b.txt.org </span>  d.txt.<span class="hljs-keyword">org </span>  <span class="hljs-keyword">j.txt.org </span>  p.txt.<span class="hljs-keyword">org </span>  v.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    A                c           e.txt.<span class="hljs-keyword">org </span>  k.txt.<span class="hljs-keyword">org </span>  q.txt.<span class="hljs-keyword">org </span>  w.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>   <span class="hljs-string">&#x27;[a-d].txt.org&#x27;</span>   C           f.txt.<span class="hljs-keyword">org </span>  l.txt.<span class="hljs-keyword">org </span>  r.txt.<span class="hljs-keyword">org </span>  x.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    a.txt.<span class="hljs-keyword">org </span>       c.txt.<span class="hljs-keyword">org </span>  g.txt.<span class="hljs-keyword">org </span>  m.txt.<span class="hljs-keyword">org </span>  s.txt.<span class="hljs-keyword">org </span>  y.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    <span class="hljs-keyword">b </span>               d           h.txt.<span class="hljs-keyword">org </span>  n.txt.<span class="hljs-keyword">org </span>  t.txt.<span class="hljs-keyword">org </span>  z.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    <span class="hljs-keyword">B </span>               D           i.txt.<span class="hljs-keyword">org </span>  o.txt.<span class="hljs-keyword">org </span>  u.txt.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>   [root@localhost ~]<span class="hljs-comment"># rename  txt.org org  /data/*.org</span><br>   [root@localhost ~]<span class="hljs-comment"># ls /data/</span><br>    a            <span class="hljs-keyword">b </span>      C       d.<span class="hljs-keyword">org </span>  h.<span class="hljs-keyword">org </span>  l.<span class="hljs-keyword">org </span>  p.<span class="hljs-keyword">org </span>  t.<span class="hljs-keyword">org </span>  x.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    A            <span class="hljs-keyword">B </span>      c.<span class="hljs-keyword">org </span>  e.<span class="hljs-keyword">org </span>  i.<span class="hljs-keyword">org </span>  m.<span class="hljs-keyword">org </span>  q.<span class="hljs-keyword">org </span>  u.<span class="hljs-keyword">org </span>  y.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>   <span class="hljs-string">&#x27;[a-d].org&#x27;</span>   <span class="hljs-keyword">b.org </span>  d       f.<span class="hljs-keyword">org </span>  <span class="hljs-keyword">j.org </span>  n.<span class="hljs-keyword">org </span>  r.<span class="hljs-keyword">org </span>  v.<span class="hljs-keyword">org </span>  z.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>    a.<span class="hljs-keyword">org </span>       c       D       g.<span class="hljs-keyword">org </span>  k.<span class="hljs-keyword">org </span>  o.<span class="hljs-keyword">org </span>  s.<span class="hljs-keyword">org </span>  w.<span class="hljs-keyword">org</span><br><span class="hljs-keyword"></span>   <br></code></pre></td></tr></table></figure><h1 id="常见面试题"><a href="#常见面试题" class="headerlink" title="常见面试题"></a>常见面试题</h1><p>冯诺依曼体系中计算机有哪些组件?<br>Linux 哲学思想(法则,原则)是什么?<br>请你谈谈如何成为一名优秀的运维工程师，以及需要具备哪些方面的能力?<br>你的日常运维工作是哪些事项?<br>你在工作中最大成绩是什么?<br>哪件事在你的印象最深刻?<br>你前一家公司的计算机规模是多少?<br>请描述一下你前一家公司的IT架构</p></li></ul><h1 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h1><ol><li>当用户docker对/testdir 目录无执行权限时，意味着无法做哪些操作？</li><li>当用户mongodb对/testdir 目录无读权限时，意味着无法做哪些操作？</li><li>当用户redis 对/testdir 目录无写权限时，该目录下的只读文件file1是否可修改和删除？</li><li>当用户zabbix对/testdir 目录有写和执行权限时，该目录下的只读文件file1是否可修改和删除？</li><li>复制/etc/fstab文件到/var/tmp下，设置文件所有者为tomcat读写权限，所属组为apps组有读写<br>权限，其他人无权限</li><li>误删除了用户git的家目录，请重建并恢复该用户家目录及相应的权限属性</li></ol><h1 id="怎么样随机生成密码"><a href="#怎么样随机生成密码" class="headerlink" title="怎么样随机生成密码"></a>怎么样随机生成密码</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /dev/urandom | <span class="hljs-built_in">tr</span> -dc <span class="hljs-string">&#x27;[:alnum:]&#x27;</span>|<span class="hljs-built_in">head</span> -c16<br></code></pre></td></tr></table></figure><h1 id="有两个文件，a-txt与b-txt-，合并两个文件，并输出时确保每个数字也唯一"><a href="#有两个文件，a-txt与b-txt-，合并两个文件，并输出时确保每个数字也唯一" class="headerlink" title="有两个文件，a.txt与b.txt ，合并两个文件，并输出时确保每个数字也唯一"></a>有两个文件，a.txt与b.txt ，合并两个文件，并输出时确保每个数字也唯一</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-comment">#a.txt中的每一个数字在本文件唯一</span><br>200<br>100<br>34556<br>23<br><span class="hljs-string">...</span><br><span class="hljs-comment">#b.txt中的每一个数字在本文件唯一</span><br>123<br>43<br>200<br>3321<br><span class="hljs-string">...</span><br><span class="hljs-comment">#就是将两个文件合并后重复的行去除，不保留</span><br>100<br>345563<br>123<br>43<br>3321<br></code></pre></td></tr></table></figure><h1 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h1><h2 id="习题1"><a href="#习题1" class="headerlink" title="习题1"></a>习题1</h2><ol><li>找出ifconfig “网卡名” 命令结果中本机的IPv4地址</li><li>查出分区空间使用率的最大百分比值</li><li>查出用户UID最大值的用户名、UID及shell类型</li><li>查出/tmp的权限，以数字方式显示</li><li>统计当前连接本机的每个远程主机IP的连接数，并按从大到小排序</li></ol><h2 id="正则表达式练习"><a href="#正则表达式练习" class="headerlink" title="正则表达式练习"></a>正则表达式练习</h2><p>1、显示/proc/meminfo文件中以大小s开头的行(要求：使用两种方法)<br>2、显示/etc/passwd文件中不以/bin/bash结尾的行<br>3、显示用户rpc默认的shell程序<br>4、找出/etc/passwd中的两位或三位数<br>5、显示CentOS7的/etc/grub2.cfg文件中，至少以一个空白字符开头的且后面有非空白字符的行<br>6、找出“netstat -tan”命令结果中以LISTEN后跟任意多个空白字符结尾的行<br>7、显示CentOS7上所有UID小于1000以内的用户名和UID<br>8、添加用户bash、testbash、basher、sh、nologin(其shell为/sbin/nologin),找出/etc/passwd用户<br>名和shell同名的行<br>9、利用df和grep，取出磁盘各分区利用率，并从大到小排序</p><h2 id="扩展正则表达式练习"><a href="#扩展正则表达式练习" class="headerlink" title="扩展正则表达式练习"></a>扩展正则表达式练习</h2><p>1、显示三个用户root、mage、wang的UID和默认shell<br>2、找出/etc/rc.d/init.d/functions文件中行首为某单词(包括下划线)后面跟一个小括号的行<br>3、使用egrep取出/etc/rc.d/init.d/functions中其基名<br>4、使用egrep取出上面路径的目录名<br>5、统计last命令中以root登录的每个主机IP地址登录次数<br>6、利用扩展正则表达式分别表示0-9、10-99、100-199、200-249、250-255<br>7、显示ifconfig命令结果中所有IPv4地址<br>8、将此字符串：welcome to magedu linux 中的每个字符去重并排序，重复次数多的排到前面</p><h2 id="练习：用-for-实现"><a href="#练习：用-for-实现" class="headerlink" title="练习：用 for 实现"></a>练习：用 for 实现</h2><p>1、判断/var/目录下所有文件的类型<br>2、添加10个用户user1-user10，密码为8位随机字符<br>3、/etc/rc.d/rc3.d目录下分别有多个以K开头和以S开头的文件；分别读取每个文件，以K开头的输出为<br>文件加stop，以S开头的输出为文件名加start，如K34filename stop S66filename start<br>4、编写脚本，提示输入正整数n的值，计算1+2+…+n的总和<br>5、计算100以内所有能被3整除的整数之和<br>6、编写脚本，提示请输入网络地址，如192.168.0.0，判断输入的网段中主机在线状态<br>7、打印九九乘法表<br>8、在/testdir目录下创建10个html文件,文件名格式为数字N（从1到10）加随机8个字母，如：<br>1AbCdeFgH.html<br>9、打印等腰三角形<br>10、猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个。第二天早上又将剩下的桃子<br>吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，只<br>剩下一个桃子了。求第一天共摘了多少？</p><h1 id="算出所有人的年龄总和"><a href="#算出所有人的年龄总和" class="headerlink" title="算出所有人的年龄总和"></a>算出所有人的年龄总和</h1><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#cat /data/age.txt</span><br>xiaoming=<span class="hljs-number">20</span><br>xiaohong=<span class="hljs-number">18</span><br>xiaoqiang=<span class="hljs-number">22</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#cut -d<span class="hljs-string">&quot;=&quot;</span> -f2 /data/age.txt|tr <span class="hljs-string">&#x27;\n&#x27;</span> + | grep -Eo <span class="hljs-string">&quot;.*[0-9]&quot;</span>|bc</span><br><span class="hljs-number">60</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#grep -Eo <span class="hljs-string">&quot;[0-9]+&quot;</span> /data/age.txt | tr <span class="hljs-string">&#x27;\n&#x27;</span> + | grep -Eo <span class="hljs-string">&quot;.*[0-</span></span><br><span class="hljs-string"><span class="hljs-meta">9]&quot;</span>|bc</span><br><span class="hljs-number">60</span><br>[root<span class="hljs-symbol">@centos8</span> ~]<span class="hljs-meta">#grep -oE <span class="hljs-string">&#x27;[0-9]+&#x27;</span> /data/age.txt| paste -s -d+|bc</span><br><span class="hljs-number">60</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>文件管理</title>
    <link href="/2022/07/14/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/"/>
    <url>/2022/07/14/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><span id="more"></span>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>个人日记</title>
    <link href="/2022/07/13/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/"/>
    <url>/2022/07/13/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><span id="more"></span><figure class="highlight ruleslanguage"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><pre><code class="hljs ruleslanguage">今日分享<br><span class="hljs-number">1.</span> 在线虚拟画板 https:<span class="hljs-comment">//excalidraw.com/</span><br><span class="hljs-number">2.</span> 跨平台的开源的Aria2 GUI软件 。https:<span class="hljs-comment">//github.com/persepolisdm/persepolis</span><br><span class="hljs-number">3.</span> LVS NAT工作模式<br>实现原理：NAT模型其实就是一个多路的DNAT，客户端对VIP进行请求，Director通过事先指定好的调度算法计算出应该转发到那台<span class="hljs-keyword">RS</span>上，并修改请求报文的目标地址为RIP，通过DIP送往<span class="hljs-keyword">RS</span>。当<span class="hljs-keyword">RS</span>响应客户端报文给CIP，在经过Director时，Director又会修改源地址为VIP并将响应报文发送给客户端，这段过程对于用户来说是透明的。<br>NAT特性：<br><span class="hljs-number">1</span>）<span class="hljs-keyword">RS</span>和Director必须要在同一个IP网段中。<br><span class="hljs-number">2</span>）<span class="hljs-keyword">RS</span>的网关必须指向DIP<br><span class="hljs-number">3</span>）可以实现端口映射<br><span class="hljs-number">4</span>）请求报文和响应报文都会经过Director<br><span class="hljs-number">5</span>）<span class="hljs-keyword">RS</span>可以是任意OS<br><span class="hljs-number">6</span>）DIP和RIP只能是内网IP<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>. nginx USR1信号可以重载日志，可以在一定大小时将日志移动走，重置日志，即可完成日志分割。HUP信号对应reload。<br><span class="hljs-number">2</span>. grafana监控kubernetes  https:<span class="hljs-regexp">//m</span>p.weixin.qq.com<span class="hljs-regexp">/s/</span><span class="hljs-number">1</span>hPGCA3gwT7QJ62ro26ZJg<br><span class="hljs-number">3</span>. nginx特性和功能<br>特性<br>模块化设计、较好的扩展性<br>高可靠性：一个master启动一或多个worker,每个worker响应多个请求<br>低内存消耗：<span class="hljs-number">10000</span>个keepalive连接在Nginx中仅消耗<span class="hljs-number">2.5</span>MB内存（官方数据）<br>支持热部署：不停机更新配置文件、更新日志文件、更新服务器程序版本<br>功能<br>静态web资源服务器，能够缓存打开的文件描述符<br>支持http<span class="hljs-regexp">/imap/</span>pop3/smtp的反向代理；支持缓存、负载均衡<br>支持fastcgi(fpm)<br>模块化，非DSO机制，支持过滤器zip压缩，SSI以及图像大小调整<br>支持SSL<br></code></pre></td></tr></table></figure><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sas">1. 常见的几种网络故障案例分析与解决！<br>https://mp.weixin.qq.com/s?__biz=MzIxMTEyOTM2Ng==<span class="hljs-variable">&amp;mid</span>=2247492229<span class="hljs-variable">&amp;idx</span>=1<span class="hljs-variable">&amp;sn</span>=d9ce593d9d951ededc026f33d9ab6d8b<span class="hljs-variable">&amp;chksm</span>=9758a7fca02f2eea9a0616883c459e310ebb5c576d9dad730605bb2888729d93c445caeb57a5<span class="hljs-variable">&amp;mpshare</span>=1<span class="hljs-variable">&amp;scene</span>=23<span class="hljs-variable">&amp;srcid</span>=0112DRCKZll1lBD8t3kzRepw<span class="hljs-variable">&amp;sharer_sharetime</span>=1610417414955<span class="hljs-variable">&amp;sharer_shareid</span>=526a33875b341a963104be96ad05b723#rd<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">2</span>. mysql读写分离<br><br>简介<br>Atlas是由 Qihoo <span class="hljs-number">360</span>公司Web平台部基础架构团队开发维护的一个基于MySQL协议的数据中间层项目。它在MySQL官方推出的MySQL-Proxy <span class="hljs-number">0.8</span>.<span class="hljs-number">2</span>版本的基础上，修改了大量bug，添加了很多功能特性。而且安装方便。配置的注释写的蛮详细的，都是中文。<br><br>主要功能<br>读写分离<br>从库负载均衡<br>IP过滤<br>自动分表<br>DBA可平滑上下线DB<br>自动摘除宕机的DB<br>下载地址：https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Qihoo360/</span>Atlas<br><br><span class="hljs-number">1</span>.rpm安装<br>rpm -ivh Atlas-<span class="hljs-number">2.2</span>.<span class="hljs-number">1</span>.el6.x86_64.rpm<br><span class="hljs-number">2</span>.配置<br>cd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql-proxy/</span>conf<br>mv test.cnf test.cnf.bak<br><br>配置文件解读：<br>[mysql-proxy]   <span class="hljs-comment">#模块名字</span><br>admin-username = user   <span class="hljs-comment">#用来控制atlas的用户（不是mysql用户）</span><br>admin-password = pwd<br>proxy-backend-addresses = <span class="hljs-number">10.0</span>.<span class="hljs-number">0.160</span>:<span class="hljs-number">3306</span>    <span class="hljs-comment">#后端提供写操作的节点</span><br>proxy-read-only-backend-addresses = <span class="hljs-number">10.0</span>.<span class="hljs-number">200</span>:<span class="hljs-number">3306</span>,<span class="hljs-number">10.0</span>.<span class="hljs-number">0.120</span>:<span class="hljs-number">3306</span>  <span class="hljs-comment">#提供读的节点</span><br>pwds = repl:<span class="hljs-number">3</span>yb5jEku5h4=,mha:O2jBXONX098=   <span class="hljs-comment">#这2个用户是后端数据库真实存在的</span><br><br>daemon = true  <span class="hljs-comment">#后台运行</span><br><br>keepalive = true    <span class="hljs-comment">#高可用检查节点的状态</span><br>event-threads = <span class="hljs-number">8</span>  <span class="hljs-comment">#线程的个数（连接池）</span><br>log-level = message <span class="hljs-comment">#日志记录的等级</span><br>log-path = <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql-proxy/</span>log  <span class="hljs-comment">#日志路径</span><br>sql-log=ON  <span class="hljs-comment">#经过atlas路由的sql语句</span><br>proxy-address = <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">33060</span>  <span class="hljs-comment">#代理的地址和端口号</span><br>admin-address = <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">2345</span>  <span class="hljs-comment">#管理地址</span><br>charset=utf8    <span class="hljs-comment">#字符编码</span><br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql-proxy/</span>bin/mysql-proxyd test start <span class="hljs-comment">#启动atlas</span><br><br>验证：netstat -lntup | grep proxy<br><br>tcp <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">2345</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:* LISTEN <span class="hljs-number">7719</span>/mysql-proxy<br>tcp <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">0.140</span>:<span class="hljs-number">33060</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:* LISTEN <span class="hljs-number">7719</span>/mysql-proxy<br><br>测试：mysql -umha -p... -h <span class="hljs-number">10.0</span>.<span class="hljs-number">0.160</span>(配合mha-vip使用) -P 端口<span class="hljs-number">33060</span><br><br>读的操作是<span class="hljs-number">2</span>台slave服务器<br>写操作是<span class="hljs-number">1</span>台master服务器<br>环境要求：<br>需要添加一个应用用户<br>grant update,insert on *.* to <span class="hljs-string">&#x27;app&#x27;</span>@<span class="hljs-string">&#x27;10.0.0.%&#x27;</span> identified by <span class="hljs-string">&#x27;123.com&#x27;</span>; <span class="hljs-comment">#授权并创建用户 查看每个节点是否同步</span><br><br>在atlas中添加用户<br> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql-proxy/</span>bin/encrypt llll  <span class="hljs-comment">#使用此命令生成加密字符（不同用户间用,隔开）</span><br>tF5TeinkMj8=<br><br>重启mysql-proxy服务<br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql-proxy/</span>bin/mysql-proxyd test start<br>验证：<br>mysql -uapp -plll -h10.<span class="hljs-number">0.0</span>.<span class="hljs-number">160</span> -P33060<br>[hermit auto=<span class="hljs-string">&quot;1&quot;</span> loop=<span class="hljs-string">&quot;1&quot;</span> unexpand=<span class="hljs-string">&quot;0&quot;</span> fullheight=<span class="hljs-string">&quot;0&quot;</span>]netease_songs<span class="hljs-comment">#:109998[/hermit]</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">每日分享：<br>检查 Linux 磁盘使用情况<br>https:<span class="hljs-regexp">//</span>linux.cn/article-<span class="hljs-number">14823</span>-<span class="hljs-number">1</span>.html<br></code></pre></td></tr></table></figure><h3 id="修改网卡名称设置为ens0"><a href="#修改网卡名称设置为ens0" class="headerlink" title="修改网卡名称设置为ens0"></a>修改网卡名称设置为ens0</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1、文件追加：net.<span class="hljs-attribute">ifnames</span>=0<br>[17:33:31 root@localhost ~]#vim /etc/default/grub <br><span class="hljs-attribute">GRUB_TIMEOUT</span>=5<br><span class="hljs-attribute">GRUB_DISTRIBUTOR</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$(sed &#x27;s, release .*$,,g&#x27; /etc/system-release)</span>&quot;</span><br><span class="hljs-attribute">GRUB_DEFAULT</span>=saved<br><span class="hljs-attribute">GRUB_DISABLE_SUBMENU</span>=<span class="hljs-literal">true</span><br><span class="hljs-attribute">GRUB_TERMINAL_OUTPUT</span>=<span class="hljs-string">&quot;console&quot;</span><br><span class="hljs-attribute">GRUB_CMDLINE_LINUX</span>=<span class="hljs-string">&quot;crashkernel=auto resume=UUID=b65aa78c-be4d-4c68-a276-c31aee04579a rhgb quiet net.ifnames=0&quot;</span><br><span class="hljs-attribute">GRUB_DISABLE_RECOVERY</span>=<span class="hljs-string">&quot;true&quot;</span><br><span class="hljs-attribute">GRUB_ENABLE_BLSCFG</span>=<span class="hljs-literal">true</span><br>2、加载grup并重启<br>[17:44:26 root@localhost ~]#grub2-mkconfig /boot/grub2/grub.cfg ;reboot<br>3、由于网卡已重置需在本机重新配置IP地址<br></code></pre></td></tr></table></figure><h3 id="vim默认配置"><a href="#vim默认配置" class="headerlink" title="vim默认配置"></a>vim默认配置</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs stata">1、在用户家目录配置：vim /root/.vimrc<br><span class="hljs-string">&quot;&quot;</span><span class="hljs-keyword">set</span> nu<br><span class="hljs-keyword">set</span> si<br><span class="hljs-keyword">set</span> incsearch<br><span class="hljs-keyword">set</span> showcmd<br>imap &lt;<span class="hljs-keyword">tab</span>&gt;  &lt;c-<span class="hljs-keyword">n</span>&gt;<br>nmap &lt;<span class="hljs-keyword">tab</span>&gt;  v&gt; <br><br><span class="hljs-keyword">set</span> wildmode=longest:<span class="hljs-keyword">list</span>,full<br>inoremap &#x27; &#x27;&#x27;&lt;Esc&gt;i<br>inoremap <span class="hljs-string">&quot; &quot;</span>&quot;&lt;Esc&gt;i<br>inoremap ( ()&lt;Esc&gt;i<br>inoremap [ []&lt;Esc&gt;i<br>inoremap &#123; &#123;&#125;&lt;Esc&gt;i<br>inoremap &lt; &lt;&gt;&lt;Esc&gt;i<br><br>autocmd BufNewFile *.<span class="hljs-keyword">sh</span> exec <span class="hljs-string">&quot;:call AddTitleForShell()&quot;</span><br>function  AddTitleForShell()<br>        call <span class="hljs-keyword">append</span>(0,<span class="hljs-string">&quot;#!/bin/bash&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(1,<span class="hljs-string">&quot;# **********************************************************&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(2,<span class="hljs-string">&quot;#&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(3,<span class="hljs-string">&quot;# * Author        : 张雪龙&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(4,<span class="hljs-string">&quot;# * Email         : 1024320609@qq.com&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(5,<span class="hljs-string">&quot;# * Create time   : &quot;</span>.strftime(<span class="hljs-string">&quot;%Y-%m-%d %H:%M&quot;</span>))<br>        call <span class="hljs-keyword">append</span>(6,<span class="hljs-string">&quot;# * Filename      : &quot;</span>.<span class="hljs-keyword">expand</span>(<span class="hljs-string">&quot;%:t&quot;</span>))<br>        call <span class="hljs-keyword">append</span>(7,<span class="hljs-string">&quot;# * Description   : &quot;</span>)<br>        call <span class="hljs-keyword">append</span>(8,<span class="hljs-string">&quot;#&quot;</span>)<br>        call <span class="hljs-keyword">append</span>(9,<span class="hljs-string">&quot;# **********************************************************&quot;</span>)<br>endfunction<br></code></pre></td></tr></table></figure><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">显示3条历史记录::<span class="hljs-built_in">history</span> n<br>[21:46:01 root@localhost ~]<span class="hljs-comment">#history 3</span><br>  993  vim /etc/default/grub <br>  994  grub2-mkconfig /boot/grub2/grub.cfg ;reboot<br>  995  <span class="hljs-built_in">history</span> 3<br><br></code></pre></td></tr></table></figure><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir">清除历史记录<span class="hljs-symbol">:history</span> -c<br>[<span class="hljs-number">21</span><span class="hljs-symbol">:</span><span class="hljs-number">53</span><span class="hljs-symbol">:</span><span class="hljs-number">24</span> root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment">#history -c</span><br>[<span class="hljs-number">21</span><span class="hljs-symbol">:</span><span class="hljs-number">53</span><span class="hljs-symbol">:</span><span class="hljs-number">41</span> root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment">#history </span><br>    <span class="hljs-number">1</span>  history <br>[<span class="hljs-number">21</span><span class="hljs-symbol">:</span><span class="hljs-number">53</span><span class="hljs-symbol">:</span><span class="hljs-number">47</span> root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs subunit">临时修改历史列表为时间格式：HISTTIMEFORMAT<br>[21:56:27 root@localhost ~]#HISTTIMEFORMAT=&quot;%F %T&quot;<br>[21:56:58 root@localhost ~]#history <br>    1  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:53:47history <br>    2  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:55:56echo $HISTIMEFORMAT<br>    3  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:56:23HISTIMEFORMAT=&quot;%F %T&quot;<br>    4  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:56:27history <br>    5  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:56:58HISTTIMEFORMAT=&quot;%F %T&quot;<br>    6  2022<span class="hljs-string">-07</span><span class="hljs-string">-21</span> 21:57:02history <br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">永久修改历史列表格式<br>[<span class="hljs-number">22</span>:<span class="hljs-number">18</span>:<span class="hljs-number">51</span> root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta">#echo HISTTIMEFORMAT=<span class="hljs-string">&quot;%F %T&quot;</span> &gt;&gt; .bash_profile</span><br></code></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">history</span>命令快捷方式使用<br>1、执行上一条命令<br>[22<span class="hljs-function">:20</span><span class="hljs-function">:32</span> root@localhost ~]<span class="hljs-comment">#!!</span><br>vim <span class="hljs-string">.bash_profile</span> <br>[22<span class="hljs-function">:22</span><span class="hljs-function">:25</span> root@localhost ~]<span class="hljs-comment">#!-1</span><br>vim <span class="hljs-string">.bash_profile</span> <br>向上键！<br><br></code></pre></td></tr></table></figure><h3 id="命令行扩展"><a href="#命令行扩展" class="headerlink" title="命令行扩展"></a>命令行扩展</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sh">1、家目录：~<br>    [23:10:16 root@localhost /]<span class="hljs-comment">#cd ~</span><br>    [23:10:20 root@localhost ~]<span class="hljs-comment">#</span><br>2、用户家目录：~username<br>[23:10:20 root@localhost ~]<span class="hljs-comment">#cd ~zxl</span><br>[23:11:02 root@localhost zxl]<span class="hljs-comment">#</span><br>3、以逗号为分割的字符串或系列：&#123;&#125;<br>[23:11:02 root@localhost zxl]<span class="hljs-comment">#echo &#123;a,b,c,d&#125;.txt</span><br>a.txt b.txt c.txt d.txt<br>    [23:13:01 root@localhost zxl]<span class="hljs-comment">#echo &#123;a,b,c,d&#125;/e.txt</span><br>    a/e.txt b/e.txt c/e.txt d/e.txt<br>    [23:14:37 root@localhost zxl]<span class="hljs-comment">#echo &#123;a..z&#125;.txt</span><br>    a.txt b.txt c.txt d.txt e.txt f.txt g.txt h.txt i.txt j.txt k.txt l.txt m.txt n.txt o.txt p.txt q.txt r.txt s.txt t.txt u.txt v.txt w.txt x.txt y.txt z.txt<br>    [23:15:22 root@localhost zxl]<span class="hljs-comment">#echo &#123;1..10&#125;.txt</span><br>    1.txt 2.txt 3.txt 4.txt 5.txt 6.txt 7.txt 8.txt 9.txt 10.txt<br></code></pre></td></tr></table></figure><h3 id="通配符glob"><a href="#通配符glob" class="headerlink" title="通配符glob"></a>通配符glob</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs tap">*：匹配任意长度字符<br>[23:20:20 root@localhost data]<span class="hljs-comment">#ls -l ./aa* </span><br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ./aaa.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ./aab.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ./aac.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ./aad.txt<br>?:匹配任意一个单个字符<br>    [23:23:03 root@localhost data]<span class="hljs-comment">#ls -l ./ada?</span><br>    ls: 无法访问&#x27;./ada?&#x27;: 没有那个文件或目录<br>    [23:23:06 root@localhost data]<span class="hljs-comment">#ls -l ./ada.tx?</span><br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ./ada.txt<br>[]:匹配中括号指定集内任意单个字符<br>    [23:27:12 root@localhost data]<span class="hljs-comment">#ls -l [a][abcdefg][a].txt</span><br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 aaa.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 aba.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 aca.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 ada.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 aea.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 afa.txt<br>    -rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 21 </span>23:19 aga.txt<br><br></code></pre></td></tr></table></figure><h3 id="变量引用和赋值"><a href="#变量引用和赋值" class="headerlink" title="变量引用和赋值"></a>变量引用和赋值</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">变量名=变量对应的值<br>    [<span class="hljs-number">23</span>:<span class="hljs-number">29</span>:<span class="hljs-number">46</span> root<span class="hljs-symbol">@localhost</span> data]<span class="hljs-meta">#name=zhangsan</span><br>    [<span class="hljs-number">23</span>:<span class="hljs-number">31</span>:<span class="hljs-number">53</span> root<span class="hljs-symbol">@localhost</span> data]<span class="hljs-meta">#echo $name</span><br>    zhangsan<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">删除自定义变量<br>unset 变量名<br>    <span class="hljs-selector-attr">[23:31:53 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$name</span><br>    zhangsan<br>    <span class="hljs-selector-attr">[23:31:58 root@localhost data]</span><span class="hljs-selector-id">#unset</span> name<br>    <span class="hljs-selector-attr">[23:33:25 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$name</span><br><br></code></pre></td></tr></table></figure><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">变量名使用规则<br><span class="hljs-number">1</span>、只能包含字母数字和下划线，不能以数字开头<br><span class="hljs-number">2</span>、不能使用shell的命令和关键字作为变量，如<span class="hljs-keyword">if</span> <span class="hljs-keyword">do</span> done 等<br><span class="hljs-number">3</span>、变量内容如果为空，可使用双引号或单引号可以括号起来<br><span class="hljs-number">4</span>、转义字符（<span class="hljs-string">\）的使用，将一些特殊字符号显示为字面本身的符号，如enter键、$,\,&#x27;,&quot;,空格符</span><br><span class="hljs-number">5</span>、如果变量没有赋值引用，其值为空，即为<span class="hljs-literal">null</span><br><span class="hljs-number">6</span>、变量引用时，若变量名和其它字符相连时，需要用$&#123;变量名&#125;<br></code></pre></td></tr></table></figure><h3 id="变量的分类"><a href="#变量的分类" class="headerlink" title="变量的分类"></a>变量的分类</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gauss">普通变量：作用域在当前<span class="hljs-built_in">shell</span>中，不包括其子进程，所有的普通变量在<span class="hljs-built_in">shell</span>进程终止时，会自动销毁<br>环境变量：作用域在当前进程和其子进程，需要关键字export或<span class="hljs-keyword">declare</span> -x来声明，才可以成为环境变量<br>本地变量：作用域即可引用到的范围，比如函数，需要使用关键字<span class="hljs-keyword">local</span>来声明才能成为本地变量<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus">环境变量声明：export 变量名<br><span class="hljs-selector-attr">[23:59:43 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$BASHPID</span> <br><span class="hljs-number">2063</span><br><span class="hljs-selector-attr">[00:00:05 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$NAME</span> <br>zhangxuelong<br><span class="hljs-selector-attr">[00:00:19 root@localhost data]</span><span class="hljs-selector-id">#bash</span><br><span class="hljs-selector-attr">[00:00:24 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$NAME</span> <br>zhangxuelong<br><span class="hljs-selector-attr">[00:00:36 root@localhost data]</span><span class="hljs-selector-id">#echo</span> <span class="hljs-variable">$BASHPID</span> <br><span class="hljs-number">3451</span><br>注释：NAME变量在子进程传值不变<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">环境变量相关命令：<br><span class="hljs-built_in">export</span><br><span class="hljs-built_in">declare</span> +x<br><span class="hljs-built_in">env</span><br></code></pre></td></tr></table></figure><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">只读变量名：只能只读不能修改变量<br>声明：<span class="hljs-meta">readonly</span> 变量名<br><br></code></pre></td></tr></table></figure><p>常见的系统内置变量</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dts">UID：当前用户ID<br>HOME：当前用户的家目录<br><span class="hljs-symbol">SHELL:</span>当前使用的shell类型<br><span class="hljs-symbol">BASHPID:</span>当前BASH的进程编号即PID<br>HISTSIZE：记录命令历史数目<br>MALL：当前用户邮件信箱文件存储目录<br>PATH：执行文件的搜索路径。目录之间以冒号分隔，搜索路径是按路径目录顺序查询<br>LANG：系统使用的语言及编码字符集，可以用locale -a 可以查看系统支持的所有语系编码，如需永久生  效：<span class="hljs-keyword">/etc/</span>locale.com文件<br>RANDOM：随机生成数字的变量，变量取值范围<span class="hljs-number">0</span><span class="hljs-number">-32767</span>之间<br><span class="hljs-symbol">PS1:</span>命令提示符<br>OSTYPE：操作系统类型——linux-gnu<br>HOSTTYPE：主机类型——x86_64<br>MACHTYPE：主机类型——x86_64-redhat-linux-gnu<br></code></pre></td></tr></table></figure><p>执行状态结果：$?</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">bash：执行后悔生成一个状态码，值范围：0-255,0表示执行成功，1-255表示前一个命令出现的各种错误<br>$?：<br>[00:21:31 root@localhost data]<span class="hljs-comment">#echo aaaa</span><br>aaaa<br>[00:26:29 root@localhost data]<span class="hljs-comment">#echo $?</span><br>0<br>[00:26:37 root@localhost data]<span class="hljs-comment">#cp sad dsad</span><br><span class="hljs-built_in">cp</span>: 无法获取<span class="hljs-string">&#x27;sad&#x27;</span> 的文件状态(<span class="hljs-built_in">stat</span>): 没有那个文件或目录<br>[00:26:59 root@localhost data]<span class="hljs-comment">#echo $?</span><br>1<br></code></pre></td></tr></table></figure><h3 id="一次执行多个命令"><a href="#一次执行多个命令" class="headerlink" title="一次执行多个命令"></a>一次执行多个命令</h3><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mel">分号连接多条命令<br>格式：命令<span class="hljs-number">1</span>；命令；<span class="hljs-number">2</span>命令<span class="hljs-number">3</span><br>[<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">02</span> root@localhost data]#echo sdasd;touch ddda.<span class="hljs-keyword">log</span>;ehco nihaoya<br>sdasd<br>bash: ehco: 未找到命令...<br>相似命令是： <span class="hljs-string">&#x27;echo&#x27;</span><br>[<span class="hljs-number">00</span>:<span class="hljs-number">29</span>:<span class="hljs-number">54</span> root@localhost data]#<span class="hljs-keyword">ls</span> ddda.<span class="hljs-keyword">log</span> <br>ddda.<span class="hljs-keyword">log</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">小括号包含多个命令<br>格式：(命令1；命令2；命令3)<br>提示：()会开启子shell，所有()内执行，不会影响当前shell中的变量值<br>[00:33:01 root@localhost data]#<span class="hljs-attribute">name</span>=aaa<br>[00:33:13 root@localhost data]#<span class="hljs-attribute">age</span>=18<br>[00:33:28 root@localhost data]#echo <span class="hljs-variable">$name</span>;(<span class="hljs-attribute">age</span>=20;echo <span class="hljs-variable">$NAME</span> <span class="hljs-variable">$age</span>)<span class="hljs-built_in"></span><br><span class="hljs-built_in">aaa</span><br><span class="hljs-built_in"></span>20<br>[00:35:05 root@localhost data]#echo <span class="hljs-variable">$name</span><br>aaa<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">花括号包含多个命令<br>格式：&#123;命令1；命令2；命令3&#125;<br>提示&#123;&#125;不会开启子shell，&#123;&#125;中的变量赋值会影响当前的shell中的变量值，&#123;&#125;和命令至少要一个空格，最后一个命令必须以<span class="hljs-string">&quot;;&quot;</span>或换行符结束<br>[00:35:05 root@localhost data]#echo <span class="hljs-variable">$name</span><span class="hljs-built_in"></span><br><span class="hljs-built_in">aaa</span><br><span class="hljs-built_in"></span>[00:39:57 root@localhost data]#&#123; echo <span class="hljs-variable">$name</span>;<span class="hljs-attribute">name</span>=bbb;echo <span class="hljs-variable">$name</span>;&#125;<span class="hljs-built_in"></span><br><span class="hljs-built_in">aaa</span><br><span class="hljs-built_in"></span>bbb<br>[00:41:40 root@localhost data]#echo <span class="hljs-variable">$name</span> <br>bbb<br></code></pre></td></tr></table></figure><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">格式：vim [<span class="hljs-keyword">option</span>]...<span class="hljs-keyword">file</span>...<br></code></pre></td></tr></table></figure><p>选项[option]</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle">+#：打开文件第几行<br>    [<span class="hljs-number">21</span>:<span class="hljs-number">25</span>:<span class="hljs-number">06</span> root@localhost ~]#vim + <span class="hljs-regexp">/etc/</span>passwd<br>    [<span class="hljs-number">21</span>:<span class="hljs-number">31</span>:<span class="hljs-number">21</span> root@localhost ~]#vim +<span class="hljs-number">2</span> <span class="hljs-regexp">/etc/</span>passwd<br>+/pattern(正则) <br>[<span class="hljs-number">21</span>:<span class="hljs-number">34</span>:<span class="hljs-number">40</span> root@localhost ~]#vim +<span class="hljs-regexp">/zxl  /</span>etc/passwd<br>-b <span class="hljs-keyword">file</span> 二进制文件打开<br>-d <span class="hljs-keyword">file</span> <span class="hljs-keyword">file</span> 比较多个文件，相当于 vimdiff<br>-m <span class="hljs-keyword">file</span> 只读打开文件<br>-e<span class="hljs-keyword">file</span> 直接进入ex模式<br><br></code></pre></td></tr></table></figure><h4 id="三种主要模式和转换"><a href="#三种主要模式和转换" class="headerlink" title="三种主要模式和转换"></a>三种主要模式和转换</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">1、命令或普通模式，默认模式，可以移动光标，剪切/粘贴文本<br>2、插入或编辑模式：用于修改文本<br>3、扩展命令或命令行模式：保存、退出等<br></code></pre></td></tr></table></figure><p>命令模式转换插入模式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span>：在光标所在出输入<br><span class="hljs-selector-tag">I</span>：光标所在行首输入<br><span class="hljs-selector-tag">a</span>：光标所在出后面输入<br><span class="hljs-selector-tag">A</span>：光标所在行末输入<br>o：当前光标所在行下方打开新一行输入<br>O：当前光标所在行上方打开新一行输入<br></code></pre></td></tr></table></figure><h4 id="扩展命令模式基本命令"><a href="#扩展命令模式基本命令" class="headerlink" title="扩展命令模式基本命令"></a>扩展命令模式基本命令</h4><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">w：写入磁盘文件<br>wq：写入并退出<br>x：写入并退出<br>X：加密<br>q：不保存，退出<br>q!：不保存，强制退出<br>r filename：读文件到当前文件中<br>w filename：当前文件内容写入另外一个文件<br>!command  执行命令<br>r!command 读取命令的输出<br></code></pre></td></tr></table></figure><p>地址定界</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">格式<br>：start_pos,end_pos <span class="hljs-keyword">cmd</span><br></code></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean">地址定界格式<br>#：#具体第几行，例如:<span class="hljs-number">2</span>  表示光标定位第二行<br>#,#：#从左侧#表示起始行，到右侧#表示结尾行<br>#,+#：从左侧#表示起始行，加上右侧#表示的行数，例如<span class="hljs-number">2</span>,<span class="hljs-number">3</span> 表示<span class="hljs-number">2</span>到<span class="hljs-number">5</span>行<br>.：当前行<br>$:最后一行<br>.,$<span class="hljs-number">-1</span>:当前行到最后一行减一<br>/pattern/：从当前行向下查找，直到匹配pattern的第一行，即正则表达式<br></code></pre></td></tr></table></figure><p>地址定界后跟一个编辑命令</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">d：删除<br>y：复制<br>w <span class="hljs-built_in">file</span>：另存为指定文件<br>r <span class="hljs-built_in">file</span>：在指定位置插入指定文件中的所有内容<br>t<span class="hljs-comment">#：将当前指定的行复制到行后</span><br>m<span class="hljs-comment">#：将当前指定的行移动到行后</span><br></code></pre></td></tr></table></figure><p>查找并替换</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">格式：<br>s<span class="hljs-regexp">/要查找的内容/</span>替换为的内容/修饰符<br>修饰符：<br>i：忽略大小写<br>g：全局替换，默认情况，每行只能替换一次出现<br>gc：全局替换，每次替换前提问<br></code></pre></td></tr></table></figure><p>定制vim工作特性</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">配置文件：<br><span class="hljs-regexp">/etc/</span>vimrc全局配置<br>~/.vimrc个人配置<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">行号<br>显示：<span class="hljs-built_in">set</span> number，简写：<span class="hljs-built_in">set</span> nu<br>取消：<span class="hljs-built_in">set</span> nonumber，简写：<span class="hljs-built_in">set</span> nonu<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">忽略字符大小写<br>启用：<span class="hljs-built_in">set</span> ignorecase 简写 <span class="hljs-built_in">set</span> ic<br>不忽略：<span class="hljs-built_in">set</span> noic<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">自动缩进<br>启用：<span class="hljs-built_in">set</span> aotoindent，简写<span class="hljs-built_in">set</span> ai<br>禁用：<span class="hljs-built_in">set</span> noai<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">复制保留格式<br>启用：<span class="hljs-built_in">set</span> paste<br>禁用：<span class="hljs-built_in">set</span> nopaste<br></code></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams">显示tab^|和换行符和<span class="hljs-symbol">$</span>显示<br>启用：<span class="hljs-keyword">set</span> list<br>禁用：<span class="hljs-keyword">set</span><span class="hljs-comment">nolist</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">高亮搜索<br>启用：<span class="hljs-built_in">set</span> hlsearch<br>禁用：<span class="hljs-built_in">set</span>nohlsearch 简写：nohl<br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">语法高亮<br>启用：<span class="hljs-keyword">syntax</span> <span class="hljs-keyword">no</span><br>禁用：<span class="hljs-keyword">syntax</span> off<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">文件格式<br>启用Windows格式：<span class="hljs-built_in">set</span> <span class="hljs-attribute">fileformat</span>=dos<br>启用Unix格式：<span class="hljs-built_in">set</span> <span class="hljs-attribute">fileformat</span>=unix<br>简写 <span class="hljs-built_in">set</span> <span class="hljs-attribute">ff</span>=dos|Unix<br></code></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams">tab用空格替代<br>启用：<span class="hljs-keyword">set</span> expandtab  默认<span class="hljs-comment">8</span>个空格代替<span class="hljs-comment">tab</span><br>禁用：<span class="hljs-keyword">set</span> <span class="hljs-comment">noexpand</span><br>简写：<span class="hljs-keyword">set</span> <span class="hljs-comment">et</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">设置缩进宽度<br>向右缩进命令模式&gt;&gt;<br>向左缩进命令模式&lt;&lt;<br>设置缩进为4个字符：<span class="hljs-built_in">set</span> <span class="hljs-attribute">shiftwidth</span>=4<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">设置文本宽度<br><span class="hljs-built_in">set</span> <span class="hljs-attribute">textwidth</span>=65  从左向右计数<br><span class="hljs-built_in">set</span> <span class="hljs-attribute">wrapmargin</span>=15 从走向左计数<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">设置光标所在行的标识标识线<br>启用：<span class="hljs-built_in">set</span> cursorline 简写 <span class="hljs-built_in">set</span> cul<br>禁用：<span class="hljs-built_in">set</span> nocursorline <br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">加密<br>启用：<span class="hljs-built_in">set</span> <span class="hljs-attribute">key</span>=password<br>禁用：<span class="hljs-built_in">set</span> key=<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">set的帮助<br>:help option-list<br><span class="hljs-meta">:set or :set</span> all<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">退出<span class="hljs-keyword">vim</span>快捷键，必须在命令模式下操作<br>ZZ：保存退出<br>ZQ：不保存退出<br><br></code></pre></td></tr></table></figure><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">删除命令<br>d：结合光标跳转字符，实习范围删除<br>d$：删除到行尾<br><span class="hljs-section">d^:删除到非空行</span><br>dd：删除当前行<br><span class="hljs-comment">#dd：多行删除</span><br><span class="hljs-section">D:等同于D$</span><br></code></pre></td></tr></table></figure><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less">粘贴命令<br><span class="hljs-selector-tag">p</span>(小写):<br><span class="hljs-selector-tag">P</span>（大写）<br></code></pre></td></tr></table></figure><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs http">将文件的内容在当前终端运行一次,才能使用系统变量，要不然值为空<br>. /etc/os-release<br><br>[23:54:17 root@localhost ~]#cat /etc/os-release<br>NAME=&quot;CentOS Linux&quot;<br>VERSION=&quot;8&quot;<br>ID=&quot;centos&quot;<br>ID_LIKE=&quot;rhel fedora&quot;<br>VERSION_ID=&quot;8&quot;<br>PLATFORM_ID=&quot;platform:el8&quot;<br>PRETTY_NAME=&quot;CentOS Linux 8&quot;<br>ANSI_COLOR=&quot;0;31&quot;<br>CPE_NAME=&quot;cpe:/o:centos:centos:8&quot;<br>HOME_URL=&quot;https://centos.org/&quot;<br>BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;<br>CENTOS_MANTISBT_PROJECT=&quot;CentOS-8&quot;<br>CENTOS_MANTISBT_PROJECT_VERSION=&quot;8&quot;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>个人计划</title>
    <link href="/2022/07/11/%E4%B8%AA%E4%BA%BA%E8%AE%A1%E5%88%92/"/>
    <url>/2022/07/11/%E4%B8%AA%E4%BA%BA%E8%AE%A1%E5%88%92/</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h1 id="linux入门基础"><a href="#linux入门基础" class="headerlink" title="linux入门基础"></a>linux入门基础</h1><h2 id="1-linux登录和远程连接"><a href="#1-linux登录和远程连接" class="headerlink" title="1. linux登录和远程连接"></a>1. linux登录和远程连接</h2><h3 id="1-1用户类型"><a href="#1-1用户类型" class="headerlink" title="1.1用户类型"></a>1.1用户类型</h3><ul><li><p>root 用户</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">特殊的管理账号<br>超级用户<br>root能够完整的系统控制<br>非必要，不要登录root<br></code></pre></td></tr></table></figure></li><li><p>普通用户</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">权限有限<br>造成损害的能力较小<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2终端类型"><a href="#1-2终端类型" class="headerlink" title="1.2终端类型"></a>1.2终端类型</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">控制台终端：/dev/console<br>串行终端：/dev/ssyS<span class="hljs-comment">#</span><br>虚拟终端:<span class="hljs-built_in">tty</span>:teletypewriters, /dev/tty<span class="hljs-comment">#,tty可有n个，Ctrl+Alt+F</span><br>伪终端：pty：pseudo-tty，/dev/pts/<span class="hljs-comment">#</span><br>图形终端：startx,xwindows<br>--------------------------------------------------<br>Centos6:ctrl+Alt+F7<br>Centos7:在哪个终端启用，即位于哪个虚拟终端<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@localhost ~]<span class="hljs-comment"># tty</span><br>/dev/pts/2<br></code></pre></td></tr></table></figure><h2 id="2-命令行扩展"><a href="#2-命令行扩展" class="headerlink" title="2. 命令行扩展"></a>2. 命令行扩展</h2><ul><li><p>比较“” ，’’,``三者区别</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@localhost ~]<span class="hljs-comment"># echo &quot;echo $HOSTNAME&quot;</span><br><span class="hljs-built_in">echo</span> localhost.localdomain<br>[root@localhost ~]<span class="hljs-comment"># echo &#x27;echo $HOSTNAME&#x27;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$HOSTNAME</span><br>[root@localhost ~]<span class="hljs-comment"># echo `echo $HOSTNAME`</span><br>localhost.localdomain<br><br><span class="hljs-comment">#结论</span><br>双引号：若引号，不能识别命令，但可以识别变量<br>单引号：强引号，不能识别命令和变量<br>反向单引号：里面的内容必须是可执行的命令，并且有输出信息<br><br>[root@localhost ~]<span class="hljs-comment"># echo ` echo $PATH`.log</span><br>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin.log<br>[root@localhost ~]<span class="hljs-comment"># echo `$PATH`.log</span><br>-bash: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin: 没有那个文件或目录<br>.<span class="hljs-built_in">log</span><br>[root@localhost ~]<span class="hljs-comment">#  `echo $PATH`.log</span><br>-bash: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin.log: 没有那个文件或目录<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost ~]<span class="hljs-comment"># echo &#123;1..10&#125;</span><br>1 2 3 4 5 6 7 8 9 10<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;1..10..2&#125;</span><br>1 3 5 7 9<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;2..10..2&#125;</span><br>2 4 6 8 10<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;20..10..2&#125;</span><br>20 18 16 14 12 10<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;a..z..2&#125;</span><br>a c e g i k m o q s u w y<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;a b c&#125;</span><br>&#123;a b c&#125;<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;a, b, c&#125;</span><br>&#123;a, b, c&#125;<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;a,b,c&#125;</span><br>a b c<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;abc&#125;</span><br>&#123;abc&#125;<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;a,b,c&#125;.&#123;txt,log&#125;</span><br>a.txt a.log b.txt b.log c.txt c.log<br>[root@localhost ~]<span class="hljs-comment"># echo &#123;1..5&#125;.&#123;txt,log&#125;</span><br>1.txt 1.<span class="hljs-built_in">log</span> 2.txt 2.<span class="hljs-built_in">log</span> 3.txt 3.<span class="hljs-built_in">log</span> 4.txt 4.<span class="hljs-built_in">log</span> 5.txt 5.<span class="hljs-built_in">log</span><br>[root@localhost ~]<span class="hljs-comment"># echo ./test/&#123;data,log,pid&#125;</span><br>./test/data ./test/log ./test/pid<br>[root@localhost ~]<span class="hljs-comment"># echo file&#123;,.bak&#125;</span><br>file file.bak<br><br></code></pre></td></tr></table></figure></li></ul><p>​          </p><h2 id="2-linux的终端基本操作"><a href="#2-linux的终端基本操作" class="headerlink" title="2. linux的终端基本操作"></a>2. linux的终端基本操作</h2><ul><li><p>查看CUP配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash">1、lscpu<br>[23:07:39 root@localhost ~]<span class="hljs-comment">#lscpu</span><br>架构：           x86_64<br>CPU 运行模式：   32-bit, 64-bit<br>字节序：         Little Endian<br>CPU:             4<br>在线 CPU 列表：  0-3<br>每个核的线程数： 1<br>每个座的核数：   4<br>座：             1<br>NUMA 节点：      1<br>厂商 ID：        GenuineIntel<br>BIOS Vendor ID:  GenuineIntel<br>CPU 系列：       6<br>型号：           140<br>型号名称：       11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>BIOS Model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>步进：           1<br>CPU MHz：        2419.202<br>BogoMIPS：       4838.40<br>超管理器厂商：   VMware<br>虚拟化类型：     完全<br>L1d 缓存：       48K<br>L1i 缓存：       32K<br>L2 缓存：        1280K<br>L3 缓存：        8192K<br>NUMA 节点0 CPU： 0-3<br>标记：           fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat pku ospke md_clear flush_l1d arch_capabilities<br><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs sh">2、/proc/cpuinfo<br>[23:07:43 root@localhost ~]<span class="hljs-comment">#cat /proc/cpuinfo </span><br>processor: 0<br>vendor_id: GenuineIntel<br>cpu family: 6<br>model: 140<br>model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>stepping: 1<br>microcode: 0x66<br>cpu MHz: 2419.202<br>cache size: 8192 KB<br>physical <span class="hljs-built_in">id</span>: 0<br>siblings: 4<br>core <span class="hljs-built_in">id</span>: 0<br>cpu cores: 4<br>apicid: 0<br>initial apicid: 0<br>fpu: <span class="hljs-built_in">yes</span><br>fpu_exception: <span class="hljs-built_in">yes</span><br>cpuid level: 27<br>wp: <span class="hljs-built_in">yes</span><br>flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat pku ospke md_clear flush_l1d arch_capabilities<br>bugs: spectre_v1 spectre_v2 spec_store_bypass swapgs itlb_multihit<br>bogomips: 4838.40<br>clflush size: 64<br>cache_alignment: 64<br>address sizes: 43 bits physical, 48 bits virtual<br>power management:<br><br>processor: 1<br>vendor_id: GenuineIntel<br>cpu family: 6<br>model: 140<br>model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>stepping: 1<br>microcode: 0x66<br>cpu MHz: 2419.202<br>cache size: 8192 KB<br>physical <span class="hljs-built_in">id</span>: 0<br>siblings: 4<br>core <span class="hljs-built_in">id</span>: 1<br>cpu cores: 4<br>apicid: 1<br>initial apicid: 1<br>fpu: <span class="hljs-built_in">yes</span><br>fpu_exception: <span class="hljs-built_in">yes</span><br>cpuid level: 27<br>wp: <span class="hljs-built_in">yes</span><br>flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat pku ospke md_clear flush_l1d arch_capabilities<br>bugs: spectre_v1 spectre_v2 spec_store_bypass swapgs itlb_multihit<br>bogomips: 4838.40<br>clflush size: 64<br>cache_alignment: 64<br>address sizes: 43 bits physical, 48 bits virtual<br>power management:<br><br>processor: 2<br>vendor_id: GenuineIntel<br>cpu family: 6<br>model: 140<br>model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>stepping: 1<br>microcode: 0x66<br>cpu MHz: 2419.202<br>cache size: 8192 KB<br>physical <span class="hljs-built_in">id</span>: 0<br>siblings: 4<br>core <span class="hljs-built_in">id</span>: 2<br>cpu cores: 4<br>apicid: 2<br>initial apicid: 2<br>fpu: <span class="hljs-built_in">yes</span><br>fpu_exception: <span class="hljs-built_in">yes</span><br>cpuid level: 27<br>wp: <span class="hljs-built_in">yes</span><br>flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat pku ospke md_clear flush_l1d arch_capabilities<br>bugs: spectre_v1 spectre_v2 spec_store_bypass swapgs itlb_multihit<br>bogomips: 4838.40<br>clflush size: 64<br>cache_alignment: 64<br>address sizes: 43 bits physical, 48 bits virtual<br>power management:<br><br>processor: 3<br>vendor_id: GenuineIntel<br>cpu family: 6<br>model: 140<br>model name: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz<br>stepping: 1<br>microcode: 0x66<br>cpu MHz: 2419.202<br>cache size: 8192 KB<br>physical <span class="hljs-built_in">id</span>: 0<br>siblings: 4<br>core <span class="hljs-built_in">id</span>: 3<br>cpu cores: 4<br>apicid: 3<br>initial apicid: 3<br>fpu: <span class="hljs-built_in">yes</span><br>fpu_exception: <span class="hljs-built_in">yes</span><br>cpuid level: 27<br>wp: <span class="hljs-built_in">yes</span><br>flags: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid avx512f avx512dq rdseed adx smap clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xsaves arat pku ospke md_clear flush_l1d arch_capabilities<br>bugs: spectre_v1 spectre_v2 spec_store_bypass swapgs itlb_multihit<br>bogomips: 4838.40<br>clflush size: 64<br>cache_alignment: 64<br>address sizes: 43 bits physical, 48 bits virtual<br>power management:<br><br></code></pre></td></tr></table></figure></li><li><p>查看内存</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-number">1</span>、free<br>[<span class="hljs-number">23</span>:<span class="hljs-number">57</span>:<span class="hljs-number">59</span> <span class="hljs-type">root</span>@<span class="hljs-type">localhost</span> ~]<span class="hljs-comment">#free</span><br>              total        used        free      shared  buff/cache   available<br>Mem:        <span class="hljs-number">3798596</span>      <span class="hljs-number">663792</span>     <span class="hljs-number">2516444</span>       <span class="hljs-number">10892</span>      <span class="hljs-number">618360</span>     <span class="hljs-number">2886888</span><br>Swap:       <span class="hljs-number">4194300</span>           <span class="hljs-number">0</span>     <span class="hljs-number">4194300</span><br><br><span class="hljs-number">1.1</span>、free <span class="hljs-literal">-h</span> 转换内存单位格式<br>[<span class="hljs-number">00</span>:<span class="hljs-number">05</span>:<span class="hljs-number">39</span> <span class="hljs-type">root</span>@<span class="hljs-type">localhost</span> ~]<span class="hljs-comment">#free -h</span><br>              total        used        free      shared  buff/cache   available<br>Mem:          <span class="hljs-number">3.6</span><span class="hljs-built_in">Gi</span>       <span class="hljs-number">647</span><span class="hljs-built_in">Mi</span>       <span class="hljs-number">2.4</span><span class="hljs-built_in">Gi</span>        <span class="hljs-number">10</span><span class="hljs-built_in">Mi</span>       <span class="hljs-number">604</span><span class="hljs-built_in">Mi</span>       <span class="hljs-number">2.8</span><span class="hljs-built_in">Gi</span><br>Swap:         <span class="hljs-number">4.0</span><span class="hljs-built_in">Gi</span>          <span class="hljs-number">0</span>B       <span class="hljs-number">4.0</span><span class="hljs-built_in">Gi</span><br><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs sh">2、<span class="hljs-built_in">cat</span> /proc/meminfo<br>[00:01:38 root@localhost ~]<span class="hljs-comment">#cat /proc/meminfo </span><br>MemTotal:        3798596 kB<br>MemFree:         2516672 kB<br>MemAvailable:    2887200 kB<br>Buffers:            3276 kB<br>Cached:           549296 kB<br>SwapCached:            0 kB<br>Active:           151912 kB<br>Inactive:         780616 kB<br>Active(anon):       2356 kB<br>Inactive(anon):   388492 kB<br>Active(file):     149556 kB<br>Inactive(file):   392124 kB<br>Unevictable:           0 kB<br>Mlocked:               0 kB<br>SwapTotal:       4194300 kB<br>SwapFree:        4194300 kB<br>Dirty:                 0 kB<br>Writeback:             0 kB<br>AnonPages:        380008 kB<br>Mapped:           220528 kB<br>Shmem:             10892 kB<br>KReclaimable:      65932 kB<br>Slab:             138624 kB<br>SReclaimable:      65932 kB<br>SUnreclaim:        72692 kB<br>KernelStack:        8400 kB<br>PageTables:        23256 kB<br>NFS_Unstable:          0 kB<br>Bounce:                0 kB<br>WritebackTmp:          0 kB<br>CommitLimit:     6093596 kB<br>Committed_AS:    2062856 kB<br>VmallocTotal:   34359738367 kB<br>VmallocUsed:           0 kB<br>VmallocChunk:          0 kB<br>Percpu:            96768 kB<br>HardwareCorrupted:     0 kB<br>AnonHugePages:    182272 kB<br>ShmemHugePages:        0 kB<br>ShmemPmdMapped:        0 kB<br>FileHugePages:         0 kB<br>FilePmdMapped:         0 kB<br>HugePages_Total:       0<br>HugePages_Free:        0<br>HugePages_Rsvd:        0<br>HugePages_Surp:        0<br>Hugepagesize:       2048 kB<br>Hugetlb:               0 kB<br>DirectMap4k:      186176 kB<br>DirectMap2M:     4007936 kB<br>DirectMap1G:     2097152 kB<br><br></code></pre></td></tr></table></figure></li><li><p>查看硬盘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">1、lsblk<br>[00:03:30 root@localhost ~]<span class="hljs-comment">#lsblk </span><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0  200G  0 disk <br>├─sda1   8:1    0    1G  0 part /boot<br>├─sda2   8:2    0  100G  0 part /<br>├─sda3   8:3    0    4G  0 part [SWAP]<br>├─sda4   8:4    0    1K  0 part <br>└─sda5   8:5    0   95G  0 part /data<br>sr0     11:0    1 10.1G  0 rom <br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">2、/proc/partitions <br>[00:10:37 root@localhost ~]<span class="hljs-comment">#cat /proc/partitions </span><br>major minor  <span class="hljs-comment">#blocks  name</span><br><br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 0 </span><span class="hljs-number"> 209715200 </span>sda<br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 1 </span>  <span class="hljs-number"> 1048576 </span>sda1<br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 2 </span><span class="hljs-number"> 104857600 </span>sda2<br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 3 </span>  <span class="hljs-number"> 4194304 </span>sda3<br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 4 </span>        <span class="hljs-number"> 1 </span>sda4<br>  <span class="hljs-number"> 8 </span>      <span class="hljs-number"> 5 </span> <span class="hljs-number"> 99612672 </span>sda5<br> <span class="hljs-number"> 11 </span>      <span class="hljs-number"> 0 </span> <span class="hljs-number"> 10541056 </span>sr0<br><br></code></pre></td></tr></table></figure></li><li><p>查看系统架构（64位还是32位）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">arch</span><br>[<span class="hljs-number">00</span>:<span class="hljs-number">12</span>:<span class="hljs-number">16</span> root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment">#arch </span><br>x86_64<br><br></code></pre></td></tr></table></figure></li><li><p>查看系统内核版本</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span>、uname -r<br><span class="hljs-selector-attr">[00:13:12 root@localhost ~]</span><span class="hljs-selector-id">#uname</span> -r<br><span class="hljs-number">4.18</span>.<span class="hljs-number">0</span>-<span class="hljs-number">348</span><span class="hljs-selector-class">.el8</span><span class="hljs-selector-class">.x86_64</span><br><br></code></pre></td></tr></table></figure></li><li><p>查看Linux系统发行版本</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs makefile">1、cat /etc/os-release<br><span class="hljs-section">[00:16:59 root@localhost ~]#cat /etc/os-release </span><br>NAME=<span class="hljs-string">&quot;CentOS Linux&quot;</span><br>VERSION=<span class="hljs-string">&quot;8&quot;</span><br>ID=<span class="hljs-string">&quot;centos&quot;</span><br>ID_LIKE=<span class="hljs-string">&quot;rhel fedora&quot;</span><br>VERSION_ID=<span class="hljs-string">&quot;8&quot;</span><br>PLATFORM_ID=<span class="hljs-string">&quot;platform:el8&quot;</span><br>PRETTY_NAME=<span class="hljs-string">&quot;CentOS Linux 8&quot;</span><br>ANSI_COLOR=<span class="hljs-string">&quot;0;31&quot;</span><br>CPE_NAME=<span class="hljs-string">&quot;cpe:/o:centos:centos:8&quot;</span><br>HOME_URL=<span class="hljs-string">&quot;https://centos.org/&quot;</span><br>BUG_REPORT_URL=<span class="hljs-string">&quot;https://bugs.centos.org/&quot;</span><br>CENTOS_MANTISBT_PROJECT=<span class="hljs-string">&quot;CentOS-8&quot;</span><br>CENTOS_MANTISBT_PROJECT_VERSION=<span class="hljs-string">&quot;8&quot;</span><br><br></code></pre></td></tr></table></figure></li><li><p>系统登陆提示</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-number">1</span>、/etc/motd  登录后提示   <br>vim /etc/motd<br>ni hao ya zhang xue long<br><br>[C:\~]$ <br><br>Connecting <span class="hljs-keyword">to</span> <span class="hljs-number">192.168</span><span class="hljs-number">.100</span><span class="hljs-number">.30</span>:<span class="hljs-number">22.</span>..<br><span class="hljs-keyword">Connection</span> established.<br><span class="hljs-keyword">To</span> <span class="hljs-keyword">escape</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">local</span> shell, press <span class="hljs-string">&#x27;Ctrl+Alt+]&#x27;</span>.<br><br>ni hao ya zhang xue long<br>Activate the web console <span class="hljs-keyword">with</span>: systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now cockpit.socket</span><br><br>Last <span class="hljs-keyword">login</span>: Thu Jul <span class="hljs-number">14</span> <span class="hljs-number">00</span>:<span class="hljs-number">29</span>:<span class="hljs-number">21</span> <span class="hljs-number">2022</span><br><span class="hljs-keyword">Session</span> lifetime based <span class="hljs-keyword">on</span> X11 requested, but X11 initialization failed.<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">2</span>、<span class="hljs-regexp">/etc/i</span>ssue.net 登录前提示<br></code></pre></td></tr></table></figure></li><li><p>时间命令</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span>、<span class="hljs-type">date</span> 软件时钟<br><span class="hljs-number">1.1</span>、查看数据<br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span><br><span class="hljs-number">2022</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">14</span>日 星期四 <span class="hljs-number">00</span>:<span class="hljs-number">50</span>:<span class="hljs-number">48</span> CST<br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span> <span class="hljs-operator">+</span>&quot;%F %T&quot;<br><span class="hljs-number">2022</span><span class="hljs-number">-07</span><span class="hljs-number">-14</span> <span class="hljs-number">00</span>:<span class="hljs-number">52</span>:<span class="hljs-number">22</span><br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span> <span class="hljs-operator">+</span>&quot;%Y-%m-%d %H:%M:%S&quot;<br><span class="hljs-number">2022</span><span class="hljs-number">-07</span><span class="hljs-number">-14</span> <span class="hljs-number">00</span>:<span class="hljs-number">53</span>:<span class="hljs-number">20</span><br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span> <span class="hljs-operator">-</span>d <span class="hljs-number">-2</span><span class="hljs-keyword">day</span><br><span class="hljs-number">2022</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">12</span>日 星期二 <span class="hljs-number">00</span>:<span class="hljs-number">55</span>:<span class="hljs-number">22</span> CST<br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span> <span class="hljs-operator">-</span>d &quot;-1year -3day&quot;<br><span class="hljs-number">2021</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">11</span>日 星期日 <span class="hljs-number">00</span>:<span class="hljs-number">56</span>:<span class="hljs-number">09</span> CST<br><br><span class="hljs-number">1.2</span>、设置时间<br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span> <span class="hljs-operator">-</span>s &quot;2021-07-01&quot;<br><span class="hljs-number">2021</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">01</span>日 星期四 <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> CST<br>[root<span class="hljs-variable">@localhost</span> <span class="hljs-operator">~</span>]# <span class="hljs-type">date</span>  <span class="hljs-number">071401022022.50</span><br><span class="hljs-number">2022</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">14</span>日 星期四 <span class="hljs-number">01</span>:<span class="hljs-number">02</span>:<span class="hljs-number">50</span> CST<br><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-number">2</span>、clock 硬件时钟<br><span class="hljs-number">2.1</span>、查看时钟<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># clock</span><br><span class="hljs-number">2022</span><span class="hljs-number">-07</span><span class="hljs-number">-14</span> <span class="hljs-number">01</span>:<span class="hljs-number">04</span>:<span class="hljs-number">24.517933</span>+<span class="hljs-number">08</span>:<span class="hljs-number">00</span><br><span class="hljs-number">2.2</span>、硬件时钟修正软件时钟<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># date -s <span class="hljs-string">&quot;2022-07-08&quot;</span></span><br><span class="hljs-number">2022</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">08</span>日 星期五 <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> CST<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># clock -s</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># date</span><br><span class="hljs-number">2022</span>年 <span class="hljs-number">07</span>月 <span class="hljs-number">14</span>日 星期四 <span class="hljs-number">01</span>:<span class="hljs-number">06</span>:<span class="hljs-number">55</span> CST<br><span class="hljs-number">2.3</span>、软件时钟修正硬件时钟<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># clock -w</span><br><br></code></pre></td></tr></table></figure></li><li><p>日历</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs sh">1、查看日历<br>[root@localhost ~]<span class="hljs-comment"># cal</span><br>      七月 2022     <br>日 一 二 三 四 五 六<br>                1  2<br> 3  4  5  6  7  8  9<br>10 11 12 13 14 15 16<br>17 18 19 20 21 22 23<br>24 25 26 27 28 29 30<br>31    <br>[root@localhost ~]<span class="hljs-comment"># cal 2022</span><br>                               2022                               <br><br>        一月                   二月                   三月        <br>日 一 二 三 四 五 六   日 一 二 三 四 五 六   日 一 二 三 四 五 六<br>                   1          1  2  3  4  5          1  2  3  4  5<br> 2  3  4  5  6  7  8    6  7  8  9 10 11 12    6  7  8  9 10 11 12<br> 9 10 11 12 13 14 15   13 14 15 16 17 18 19   13 14 15 16 17 18 19<br>16 17 18 19 20 21 22   20 21 22 23 24 25 26   20 21 22 23 24 25 26<br>23 24 25 26 27 28 29   27 28                  27 28 29 30 31      <br>30 31                                                             <br>        四月                   五月                   六月        <br>日 一 二 三 四 五 六   日 一 二 三 四 五 六   日 一 二 三 四 五 六<br>                1  2    1  2  3  4  5  6  7             1  2  3  4<br> 3  4  5  6  7  8  9    8  9 10 11 12 13 14    5  6  7  8  9 10 11<br>10 11 12 13 14 15 16   15 16 17 18 19 20 21   12 13 14 15 16 17 18<br>17 18 19 20 21 22 23   22 23 24 25 26 27 28   19 20 21 22 23 24 25<br>24 25 26 27 28 29 30   29 30 31               26 27 28 29 30      <br>                                                                  <br>        七月                   八月                   九月        <br>日 一 二 三 四 五 六   日 一 二 三 四 五 六   日 一 二 三 四 五 六<br>                1  2       1  2  3  4  5  6                1  2  3<br> 3  4  5  6  7  8  9    7  8  9 10 11 12 13    4  5  6  7  8  9 10<br>10 11 12 13 14 15 16   14 15 16 17 18 19 20   11 12 13 14 15 16 17<br>17 18 19 20 21 22 23   21 22 23 24 25 26 27   18 19 20 21 22 23 24<br>24 25 26 27 28 29 30   28 29 30 31            25 26 27 28 29 30   <br>31                                                                <br>        十月                  十一月                 十二月       <br>日 一 二 三 四 五 六   日 一 二 三 四 五 六   日 一 二 三 四 五 六<br>                   1          1  2  3  4  5                1  2  3<br> 2  3  4  5  6  7  8    6  7  8  9 10 11 12    4  5  6  7  8  9 10<br> 9 10 11 12 13 14 15   13 14 15 16 17 18 19   11 12 13 14 15 16 17<br>16 17 18 19 20 21 22   20 21 22 23 24 25 26   18 19 20 21 22 23 24<br>23 24 25 26 27 28 29   27 28 29 30            25 26 27 28 29 30 31<br>30 31                                                             <br>[root@localhost ~]<span class="hljs-comment"># </span><br><br></code></pre></td></tr></table></figure></li><li><p>开关机命令</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-number">1</span>、关机<br>halt<br>poweroff<br><span class="hljs-number">2</span>、重启<br>reboot<br>reboot -f 强制重启<br>reboot -p 切断电源<br>ctrl+alt+delet<br><span class="hljs-number">2</span>、关机或重启：<span class="hljs-keyword">shutdown</span> [option]...[<span class="hljs-keyword">time</span>][message]<br><span class="hljs-keyword">shutdown</span> -h 等于 halt<br><span class="hljs-keyword">shutdown</span> -r 等于  reboot<br><span class="hljs-keyword">shutdown</span> -c  取消关机或重启命令<br>[<span class="hljs-keyword">time</span>]：无指定时间，默认相当于+<span class="hljs-number">1</span><br>now：现在<br>+<span class="hljs-comment">#：相对于时间表示法，几分钟（+3）</span><br>hh:mm ：绝对时间表示，指定具体时间<br><br><br><br><br></code></pre></td></tr></table></figure></li><li><p>查看开关机时间多久</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uptime</span><br>[root@rocky8 ~]<span class="hljs-comment"># uptime </span><br> 01:31:26 up 50 min,  2 <span class="hljs-built_in">users</span>,  load average: 0.01, 0.11, 0.11<br><br></code></pre></td></tr></table></figure></li><li><p>查看命令是否在运行</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">ps -aux|grep <span class="hljs-built_in">sleep</span><br>[root@localhost ~]<span class="hljs-comment"># sleep 1000</span><br>[root@rocky8 ~]<span class="hljs-comment"># ps -aux|grep sleep</span><br>root        3392  0.0  0.1   7316   888 ?        S    01:42   0:00 <span class="hljs-built_in">sleep</span> 60<br>root        3394  0.0  0.1  12136   984 pts/0    S+   01:43   0:00 grep --color=auto <span class="hljs-built_in">sleep</span><br>[root@rocky8 ~]<span class="hljs-comment"># </span><br><br></code></pre></td></tr></table></figure></li><li><p>后台运行命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">screen  需另外安装yum instal screen  -y<br>[root@localhost ~]<span class="hljs-comment"># screen </span><br>[root@localhost ~]<span class="hljs-comment"># sleep 999</span><br>关闭当前命令窗口，打开新命令窗口<br>[root@localhost ~]<span class="hljs-comment"># ps -aux|grep sleep</span><br>root       12883  0.0  0.0   7528   900 pts/2    S+   01:46   0:00 <span class="hljs-built_in">sleep</span> 1000<br>root       13002  0.0  0.0   7528   892 pts/1    S+   01:50   0:00 <span class="hljs-built_in">sleep</span> 999<br>root       13011  0.0  0.0   7528   896 ?        S    01:51   0:00 <span class="hljs-built_in">sleep</span> 60<br>root       13051  0.0  0.0  12348  1100 pts/0    S+   01:52   0:00 grep --color=auto <span class="hljs-built_in">sleep</span><br><br><br></code></pre></td></tr></table></figure></li><li><p>tmux增加版:screen</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">  <br></code></pre></td></tr></table></figure></li><li></li></ul><h2 id="3-linux的命令执行过程和命令格式"><a href="#3-linux的命令执行过程和命令格式" class="headerlink" title="3. linux的命令执行过程和命令格式"></a>3. linux的命令执行过程和命令格式</h2><ul><li>修改提示符格式</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">临时修改：<br>PS1=<span class="hljs-string">&quot;\[\e[1;5;41;33m\][\u@\h \W]\\$\[\e[0m\]&quot;</span><br>PS1=<span class="hljs-string">&quot;\[\e[1;32m\][\t \[\e[1;33m\]\u\[\e[35m\]@\h\[\e[1;31m\] \W\[\e[1;32m\]]\[\e[0m\]\\$&quot;</span><br><br></code></pre></td></tr></table></figure><h2 id="4-获取帮助命令"><a href="#4-获取帮助命令" class="headerlink" title="4.获取帮助命令"></a>4.获取帮助命令</h2><ul><li><p>whatis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">该命令刚安装系统后不能立即使用，需制作数据库后才可使用<br><span class="hljs-comment">#Centos7之后</span><br>mandb生成<br><span class="hljs-comment">#Centos6版本之前</span><br>makewhatis<br></code></pre></td></tr></table></figure></li><li><p>man</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">外部命令使用指南<br></code></pre></td></tr></table></figure></li><li><p>whereis</p></li><li><p>/usr/share/doc</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">命令自身提供的官方使用指南<br></code></pre></td></tr></table></figure><ul><li><h3 id="yum源替换成阿里epel源"><a href="#yum源替换成阿里epel源" class="headerlink" title="yum源替换成阿里epel源"></a>yum源替换成阿里epel源</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">rename <span class="hljs-string">&#x27;.repo&#x27;</span> <span class="hljs-string">&#x27;.repo.bak&#x27;</span> /etc/yum.repos.d/*.repo<br>curl https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo -o /etc/yum.repos.d/Centos-8.repo<br>curl https://mirrors.aliyun.com/repo/epel-archive-8.repo -o /etc/yum.repos.d/epel-archive-8.repo<br>yum clean all &amp;&amp; yum makecache <br></code></pre></td></tr></table></figure></li><li><h3 id="设置中文字符集"><a href="#设置中文字符集" class="headerlink" title="设置中文字符集"></a>设置中文字符集</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">查看是否存在中文字符集：localectl list-locales<br><br>安装中文字符集：yum -y install langpacks-zh_CN.noarch<br><br>再查看字符集：localectl list-locales<br><br>设置中文字符集：localectl set-locale LANG=zh_CN.utf8<br></code></pre></td></tr></table></figure><hr></li><li><h3 id="文件传输命令工具"><a href="#文件传输命令工具" class="headerlink" title="文件传输命令工具"></a>文件传输命令工具</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> lrzsz<br>下载：rz<br>上传：sz 文件名<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="6-Linux的各种符号用法"><a href="#6-Linux的各种符号用法" class="headerlink" title="6.Linux的各种符号用法"></a>6.Linux的各种符号用法</h2><ul><li><p>hexdump </p><ul><li><p>简要描述</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">磁盘文件是以二进制形式保存字符，而展示给用户时是通过软件打开文件时软件通过编码转换为用户可识别字符<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">以16进制查看文档<br>[root@localhost ~]<span class="hljs-comment"># cat zhangsan_2022-07-14_01\:58\:49.log </span><br>dsasda<br>[root@localhost ~]<span class="hljs-comment"># hexdump  -C zhangsan_2022-07-14_01\:58\:49.log </span><br>00000000  64 73 61 73 64 61 0a                              |dsasda.|<br>00000007<br><br></code></pre></td></tr></table></figure></li><li><p>编码</p><ul><li><p>GB2312：中国编码</p></li><li><p>ASCII：美国编码</p></li><li><p>UNICODE：国际编码</p></li><li><p>UTF-8：增强的国际编码（万国码）</p></li><li><p>各系统默认编码</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">wi<span class="hljs-symbol">n7</span>及以下系统默认<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="7、Linux的各种快捷键"><a href="#7、Linux的各种快捷键" class="headerlink" title="7、Linux的各种快捷键"></a>7、Linux的各种快捷键</h2><ul><li><p>tab键补全</p><ul><li>2tab键可以补全子命令或文件补全</li><li>string+2tab 以string开头命令补全</li><li>/+2tab 可以列出/目录下所有文件和目录</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">默认centos/rocky系统最小化安装未安装补全命令，图形界面系统安装已含有该命令<br>root@localhost ~]<span class="hljs-comment"># yum -y install bash-completion</span><br>上次元数据过期检查：1:28:58 前，执行于 2022年07月14日 星期四 09时55分55秒。<br>软件包 bash-completion-1:2.7-5.el8.noarch 已安装。<br>依赖关系解决。<br>无需任何处理。<br>完毕！<br><br></code></pre></td></tr></table></figure></li><li><p>！+history命令数字</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cat zhangsan_2022-07-14_01\:58\:49.log </span><br>dsasda<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># history </span><br>    <span class="hljs-number">1</span>  cat zhangsan_2022<span class="hljs-number">-07</span><span class="hljs-number">-14</span>_01\:<span class="hljs-number">58</span>\:<span class="hljs-number">49.</span><span class="hljs-built_in">log</span> <br>    <span class="hljs-number">2</span>  history <br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># !1</span><br>cat zhangsan_2022<span class="hljs-number">-07</span><span class="hljs-number">-14</span>_01\:<span class="hljs-number">58</span>\:<span class="hljs-number">49.</span><span class="hljs-built_in">log</span> <br>dsasda<br></code></pre></td></tr></table></figure></li><li><p>!+?+string</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@localhost ~]<span class="hljs-comment"># date +&quot;%F_%T&quot;</span><br>2022-07-14_11:50:37<br>[root@localhost ~]<span class="hljs-comment"># !?date</span><br><span class="hljs-built_in">date</span> +<span class="hljs-string">&quot;%F_%T&quot;</span><br>2022-07-14_11:50:45<br>[root@localhost ~]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure></li><li><p>快捷键</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-number">1</span>、alt+. 返回上一条命令参数<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># echo <span class="hljs-string">&quot;aaaa&quot;</span></span><br>aaaa<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># <span class="hljs-string">&quot;aaaa&quot;</span></span><br><span class="hljs-number">2</span>、Ctrl+l 清屏<br><span class="hljs-number">3</span>、ctrl+S 命令窗口屏蔽显示命令<br><span class="hljs-number">4</span>、ctrl+q 清除命令窗口屏蔽显示命令<br><span class="hljs-number">5</span>、ctrl+c 终止命令执行<br><span class="hljs-number">6</span>、ctrl+d 删除当前光标字符<br><span class="hljs-number">7</span>、ctrl+&lt; 光标向右移动一个单词结尾，相当于alt+f<br><span class="hljs-number">8</span>、ctrl+&gt; 光标向左移动一个单纯首字母，相当于alt+b<br><span class="hljs-number">9</span>、ctrl+r 删除当前整行<br><span class="hljs-number">10</span>、ctrl+a 光标到命令行首，相当于Home<br><span class="hljs-number">11</span>、ctrl+e 光标到命令行尾，相当于End<br></code></pre></td></tr></table></figure></li></ul><h2 id="8、Linux的目录结构"><a href="#8、Linux的目录结构" class="headerlink" title="8、Linux的目录结构"></a>8、Linux的目录结构</h2><ul><li><p>/:根目录结构</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># ll /</span><br>总用量 28<br>lrwxrwxrwx.  <span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 7 </span>6月 <span class="hljs-number"> 22 </span>2021 bin -&gt; usr/bin<br>dr-xr-xr-x.  <span class="hljs-number"> 5 </span>root root<span class="hljs-number"> 4096 </span>7月 <span class="hljs-number"> 10 </span>10:01 boot<br>drwxr-xr-x.  <span class="hljs-number"> 2 </span>root root   <span class="hljs-number"> 6 </span>7月 <span class="hljs-number"> 10 </span>09:45 data<br>drwxr-xr-x. <span class="hljs-number"> 18 </span>root root<span class="hljs-number"> 3080 </span>7月 <span class="hljs-number"> 13 </span>10:53 dev<br>drwxr-xr-x.<span class="hljs-number"> 142 </span>root root<span class="hljs-number"> 8192 </span>7月 <span class="hljs-number"> 14 </span>08:52 etc<br>drwxr-xr-x.  <span class="hljs-number"> 3 </span>root root  <span class="hljs-number"> 17 </span>7月 <span class="hljs-number"> 10 </span>10:08 home<br>lrwxrwxrwx.  <span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 7 </span>6月 <span class="hljs-number"> 22 </span>2021 lib -&gt; usr/lib<br>lrwxrwxrwx.  <span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 9 </span>6月 <span class="hljs-number"> 22 </span>2021 lib64 -&gt; usr/lib64<br>drwxr-xr-x.  <span class="hljs-number"> 2 </span>root root   <span class="hljs-number"> 6 </span>6月 <span class="hljs-number"> 22 </span>2021 media<br>drwxr-xr-x.  <span class="hljs-number"> 3 </span>root root  <span class="hljs-number"> 18 </span>7月 <span class="hljs-number"> 10 </span>09:50 mnt<br>drwxr-xr-x.  <span class="hljs-number"> 2 </span>root root   <span class="hljs-number"> 6 </span>6月 <span class="hljs-number"> 22 </span>2021 opt<br>dr-xr-xr-x.<span class="hljs-number"> 279 </span>root root   <span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 13 </span>10:52 proc<br>dr-xr-x---. <span class="hljs-number"> 15 </span>root root<span class="hljs-number"> 4096 </span>7月 <span class="hljs-number"> 14 </span>14:37 root<br>drwxr-xr-x. <span class="hljs-number"> 43 </span>root root<span class="hljs-number"> 1240 </span>7月 <span class="hljs-number"> 14 </span>01:40 run<br>lrwxrwxrwx.  <span class="hljs-number"> 1 </span>root root   <span class="hljs-number"> 8 </span>6月 <span class="hljs-number"> 22 </span>2021 sbin -&gt; usr/sbin<br>drwxr-xr-x.  <span class="hljs-number"> 2 </span>root root   <span class="hljs-number"> 6 </span>6月 <span class="hljs-number"> 22 </span>2021 srv<br>dr-xr-xr-x. <span class="hljs-number"> 13 </span>root root   <span class="hljs-number"> 0 </span>7月 <span class="hljs-number"> 13 </span>10:53 sys<br>drwxrwxrwt. <span class="hljs-number"> 24 </span>root root<span class="hljs-number"> 4096 </span>7月 <span class="hljs-number"> 14 </span>13:43 tmp<br>drwxr-xr-x. <span class="hljs-number"> 13 </span>root root <span class="hljs-number"> 158 </span>7月 <span class="hljs-number"> 10 </span>09:49 usr<br>drwxr-xr-x. <span class="hljs-number"> 21 </span>root root<span class="hljs-number"> 4096 </span>7月 <span class="hljs-number"> 10 </span>10:01 var<br><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
